{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/main.js","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?b048","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?ac20","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?4412","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?7625","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?326f","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue?ea6a"],"names":["createPage","Page","uid","that","data","products","stock","out_stock","button_disabled","beizhu_text","out_products","all_money","real_money","onLoad","uni","getStorageSync","i","length","Number","total_money","toFixed","onShow","methods","formSubmit","e","console","log","showToast","title","icon","add_tb_record","showLoading","pointer","Bmob","Pointer","stockId","set","objectId","out_stockId","billsObj","Array","detailObj","query","Query","equalTo","goodsName","find","then","res","num","num1","common","upload_good_withNoCan","obj","reserve","get","save","tempBills","detailBills","user","pointer2","operater","pointer1","tempGoods_id","modify_retailPrice","goodsId","stock_name","out_reserve","out_objectId","type","push","saveAll","bills","success","poiID","masterId","poiID1","detail","value","input_beizhu","operationId","hideLoading","setStorageSync","setTimeout","removeStorageSync","nickName","auto_print","print","autoPrint","navigateBack","delta","error"],"mappings":"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","file":"pages/common/good_allocation/allocation_detail/allocation_detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/common/good_allocation/allocation_detail/allocation_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./allocation_detail.vue?vue&type=template&id=28b7abf6&\"\nvar renderjs\nimport script from \"./allocation_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./allocation_detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./allocation_detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('28b7abf6')) {\n      api.createRecord('28b7abf6', component.options)\n    } else {\n      api.reload('28b7abf6', component.options)\n    }\n    module.hot.accept(\"./allocation_detail.vue?vue&type=template&id=28b7abf6&\", function () {\n      api.rerender('28b7abf6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/testdd/kcb_all/pages/common/good_allocation/allocation_detail/allocation_detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allocation_detail.vue?vue&type=template&id=28b7abf6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allocation_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allocation_detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\";\nimport common from '@/utils/common.js';\nimport send_temp from '@/utils/send_temp.js';\nimport print from '@/utils/print.js';\nimport _goods from '@/utils/goods.js';\n\nlet uid;\nlet that;\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproducts: [],\n\t\t\tstock: '', //调出仓库\n\t\t\tout_stock: '', //调入仓库\n\t\t\tbutton_disabled: false,\n\t\t\tbeizhu_text: \"\",\n\t\t\tout_products: [], //调入的商品\n\t\t\tall_money: 0,\n\t\t\treal_money: 0,\n\t\t}\n\t},\n\tonLoad() {\n\t\tthat = this;\n\t\tuid = uni.getStorageSync(\"uid\");\n\n\t\tthis.products = uni.getStorageSync(\"products\");\n\t\tfor (let i = 0; i < this.products.length; i++) {\n\t\t\tthis.all_money = Number((this.products[i].total_money + this.all_money).toFixed(2))\n\t\t}\n\t\tthis.real_money = Number(this.all_money.toFixed(2))\n\t},\n\tonShow() {\n\t\tthat.stock = uni.getStorageSync(\"warehouse\")[0].stock\n\t\tthat.out_stock = uni.getStorageSync(\"out_warehouse\") ? uni.getStorageSync(\"out_warehouse\")[0].stock : ''\n\t},\n\tmethods: {\n\n\t\tformSubmit: function(e) {\n\t\t\tconsole.log(e)\n\n\t\t\tthis.button_disabled = true;\n\t\t\tif (that.out_stock == '' || that.out_stock == null) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请选择调入仓库\",\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\n\t\t\t\tthis.button_disabled = false;\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthat.add_tb_record(e)\n\t\t},\n\n\t\t//生成调拨单\n\t\tadd_tb_record(e) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"上传中...\"\n\t\t\t});\n\n\t\t\tconst pointer = Bmob.Pointer('stocks');\n\t\t\tlet stockId = pointer.set(that.stock.objectId);\n\t\t\tlet out_stockId = pointer.set(that.out_stock.objectId);\n\n\n\t\t\tlet billsObj = new Array();\n\t\t\tlet detailObj = [];\n\t\t\tfor (let i = 0; i < this.products.length; i++) {\n\t\t\t\tconst query = Bmob.Query('NGoods');\n\t\t\t\tquery.equalTo(\"goodsName\", \"==\", that.products[i].goodsName);\n\t\t\t\tquery.equalTo(\"userId\", \"==\", uid);\n\t\t\t\tquery.equalTo(\"stocks\", \"==\", that.out_stock.objectId);\n\t\t\t\tquery.find().then(res => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tlet out_products = []\n\t\t\t\t\tlet num\n\t\t\t\t\tlet num1\n\t\t\t\t\tif (res.length == 0) {\n\t\t\t\t\t\t//console.log(that.products[i].goodsName)\n\t\t\t\t\t\tcommon.upload_good_withNoCan(that.products[i], that.out_stock, Number(this.products[i].num), \"allocation\").then(\n\t\t\t\t\t\t\tres => {\n\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\tlet obj = {}\n\t\t\t\t\t\t\t\tobj.objectId = res[1].objectId\n\t\t\t\t\t\t\t\tobj.reserve = Number(this.products[i].num)\n\t\t\t\t\t\t\t\tout_products[0] = obj\n\t\t\t\t\t\t\t\tnum = Number(this.products[i].reserve) - Number(this.products[i].num);\n\t\t\t\t\t\t\t\tnum1 = Number(this.products[i].num);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconst query = Bmob.Query('NGoods');\n\t\t\t\t\t\t\t\tquery.get(that.products[i].objectId).then(res => {\n\t\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tres.set('reserve', num)\n\t\t\t\t\t\t\t\t\tres.save()\n\t\t\t\t\t\t\t\t\tquery.get(out_products[0].objectId).then(res => {\n\t\t\t\t\t\t\t\t\t\tres.set('reserve', num1)\n\t\t\t\t\t\t\t\t\t\tres.save()\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//单据\n\t\t\t\t\t\t\t\tlet tempBills = Bmob.Query('NBills');\n\t\t\t\t\t\t\t\tlet detailBills = {}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\tlet user = pointer.set(uid)\n\t\t\t\t\t\t\t\tlet pointer2 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\tlet operater = pointer2.set(uni.getStorageSync(\"masterId\"))\n\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('NGoods')\n\t\t\t\t\t\t\t\tlet tempGoods_id = pointer1.set(this.products[i].objectId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttempBills.set('goodsName', this.products[i].goodsName);\n\t\t\t\t\t\t\t\ttempBills.set('retailPrice', Number(this.products[i].modify_retailPrice));\n\t\t\t\t\t\t\t\ttempBills.set('num', Number(this.products[i].num));\n\t\t\t\t\t\t\t\ttempBills.set('total_money', Number(this.products[i].total_money));\n\t\t\t\t\t\t\t\ttempBills.set('goodsId', tempGoods_id);\n\t\t\t\t\t\t\t\ttempBills.set('userId', user);\n\t\t\t\t\t\t\t\ttempBills.set('type', -2);\n\t\t\t\t\t\t\t\ttempBills.set('opreater', operater);\n\t\t\t\t\t\t\t\ttempBills.set(\"stock\", stockId);\n\t\t\t\t\t\t\t\ttempBills.set(\"out_stock\", out_stockId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet goodsId = {}\n\t\t\t\t\t\t\t\tdetailBills.goodsName = this.products[i].goodsName\n\t\t\t\t\t\t\t\tdetailBills.stock = that.stock.stock_name\n\t\t\t\t\t\t\t\tdetailBills.out_stock = that.out_stock.stock_name\n\t\t\t\t\t\t\t\tdetailBills.reserve = this.products[i].reserve\n\t\t\t\t\t\t\t\tdetailBills.out_reserve = out_products[0].reserve\n\t\t\t\t\t\t\t\tgoodsId.objectId = this.products[i].objectId\n\t\t\t\t\t\t\t\tgoodsId.out_objectId = out_products[0].objectId\n\t\t\t\t\t\t\t\tgoodsId.reserve = num\n\t\t\t\t\t\t\t\tgoodsId.out_reserve = num1\n\t\t\t\t\t\t\t\tdetailBills.goodsId = goodsId\n\t\t\t\t\t\t\t\tdetailBills.num = Number(this.products[i].num)\n\t\t\t\t\t\t\t\tdetailBills.type = -2\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbillsObj.push(tempBills)\n\t\t\t\t\t\t\t\tdetailObj.push(detailBills)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//插入单据\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (i == (this.products.length - 1)) {\n\t\t\t\t\t\t\t\t\tBmob.Query('NBills').saveAll(billsObj).then(function(res) {\n\t\t\t\t\t\t\t\t\t\t\t//console.log(\"批量新增单据成功\", res);\n\t\t\t\t\t\t\t\t\t\t\tlet bills = []\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\tbills.push(res[i].success.objectId)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\t\t\tlet poiID = pointer.set(uid);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\t\t\tlet poiID1 = pointer1.set(masterId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tlet query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t\t\t//query.set(\"relations\", relID);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"detail\", detailObj);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"bills\", bills);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"beizhu\", e.detail.value.input_beizhu);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"type\", -2);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"opreater\", poiID1);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"stock\", stockId);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"out_stock\", out_stockId);\n\t\t\t\t\t\t\t\t\t\t\tquery.set(\"master\", poiID);\n\t\t\t\t\t\t\t\t\t\t\tquery.set('goodsName', that.products[0].goodsName);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet operationId = res.objectId;\n\t\t\t\t\t\t\t\t\t\t\t\t//console.log(\"添加操作历史记录成功\", res);\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t//uni.removeStorageSync(\"customs\"); //移除这个缓存\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '产品调拨成功',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.button_disabled = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"is_option\", true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//uni.removeStorageSync(\"warehouse\");\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"out_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"category\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommon.log(uni.getStorageSync(\"user\").nickName + \"调拨了'\" + that.products[0].goodsName + \"'等\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.products.length + \"商品\", -2, res.objectId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/*let params = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data1\": res.objectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data2\": uni.getStorageSync(\"user\").nickName + \"调拨了'\" + that.products[0].goodsName + \"'等\" + that.products\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length + \"商品\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data3\": that.stock ? that.stock.stock_name : \"未填写\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data4\": res.createdAt,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"remark\": e.detail.value.input_beizhu ? e.detail.value.input_beizhu : \"未填写\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"url\": \"https://www.jimuzhou.com/h5/pages/report/EnteringHistory/detail/detail?id=\" + res.objectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsend_temp.send_temp(params);*/\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//自动打印\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (uni.getStorageSync(\"setting\").auto_print) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprint.autoPrint(operationId);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelta: 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfunction(error) {\n\t\t\t\t\t\t\t\t\t\t\t// 批量新增异常处理\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"异常处理\");\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tout_products = res\n\t\t\t\t\t\tnum = Number(this.products[i].reserve) - Number(this.products[i].num);\n\t\t\t\t\t\tnum1 = Number(out_products[0].reserve) + Number(this.products[i].num);\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst query = Bmob.Query('NGoods');\n\t\t\t\t\t\tquery.get(that.products[i].objectId).then(res => {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tres.set('reserve', num)\n\t\t\t\t\t\t\tres.save()\n\t\t\t\t\t\t\tquery.get(out_products[0].objectId).then(res => {\n\t\t\t\t\t\t\t\tres.set('reserve', num1)\n\t\t\t\t\t\t\t\tres.save()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\t//单据\n\t\t\t\t\t\tlet tempBills = Bmob.Query('NBills');\n\t\t\t\t\t\tlet detailBills = {}\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\tlet user = pointer.set(uid)\n\t\t\t\t\t\tlet pointer2 = Bmob.Pointer('_User')\n\t\t\t\t\t\tlet operater = pointer2.set(uni.getStorageSync(\"masterId\"))\n\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('NGoods')\n\t\t\t\t\t\tlet tempGoods_id = pointer1.set(this.products[i].objectId);\n\t\t\t\t\t\t\n\t\t\t\t\t\ttempBills.set('goodsName', this.products[i].goodsName);\n\t\t\t\t\t\t//tempBills.set('retailPrice', (this.products[i].modify_retailPrice).toString());\n\t\t\t\t\t\ttempBills.set('num', Number(this.products[i].num));\n\t\t\t\t\t\t//tempBills.set('total_money', this.products[i].total_money);\n\t\t\t\t\t\ttempBills.set('goodsId', tempGoods_id);\n\t\t\t\t\t\ttempBills.set('userId', user);\n\t\t\t\t\t\ttempBills.set('type', -2);\n\t\t\t\t\t\ttempBills.set('opreater', operater);\n\t\t\t\t\t\ttempBills.set(\"stock\", stockId);\n\t\t\t\t\t\ttempBills.set(\"out_stock\", out_stockId);\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet goodsId = {}\n\t\t\t\t\t\tdetailBills.goodsName = this.products[i].goodsName\n\t\t\t\t\t\tdetailBills.stock = that.stock.stock_name\n\t\t\t\t\t\tdetailBills.out_stock = that.out_stock.stock_name\n\t\t\t\t\t\tdetailBills.reserve = this.products[i].reserve\n\t\t\t\t\t\tdetailBills.out_reserve = out_products[0].reserve\n\t\t\t\t\t\tgoodsId.objectId = this.products[i].objectId\n\t\t\t\t\t\tgoodsId.out_objectId = out_products[0].objectId\n\t\t\t\t\t\tgoodsId.reserve = num\n\t\t\t\t\t\tgoodsId.out_reserve = num1\n\t\t\t\t\t\tdetailBills.goodsId = goodsId\n\t\t\t\t\t\tdetailBills.num = Number(this.products[i].num)\n\t\t\t\t\t\tdetailBills.type = -2\n\t\t\t\t\t\t\n\t\t\t\t\t\tbillsObj.push(tempBills)\n\t\t\t\t\t\tdetailObj.push(detailBills)\n\t\t\t\t\t\t\n\t\t\t\t\t\t//插入单据\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (i == (this.products.length - 1)) {\n\t\t\t\t\t\t\tBmob.Query('NBills').saveAll(billsObj).then(function(res) {\n\t\t\t\t\t\t\t\t\t//console.log(\"批量新增单据成功\", res);\n\t\t\t\t\t\t\t\t\tlet bills = []\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\t\t\t\t\t\tbills.push(res[i].success.objectId)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID = pointer.set(uid);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID1 = pointer1.set(masterId);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t//query.set(\"relations\", relID);\n\t\t\t\t\t\t\t\t\tquery.set(\"detail\", detailObj);\n\t\t\t\t\t\t\t\t\tquery.set(\"bills\", bills);\n\t\t\t\t\t\t\t\t\tquery.set(\"beizhu\", e.detail.value.input_beizhu);\n\t\t\t\t\t\t\t\t\tquery.set(\"type\", -2);\n\t\t\t\t\t\t\t\t\tquery.set(\"opreater\", poiID1);\n\t\t\t\t\t\t\t\t\tquery.set(\"stock\", stockId);\n\t\t\t\t\t\t\t\t\tquery.set(\"out_stock\", out_stockId);\n\t\t\t\t\t\t\t\t\tquery.set(\"master\", poiID);\n\t\t\t\t\t\t\t\t\tquery.set('goodsName', that.products[0].goodsName);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\tlet operationId = res.objectId;\n\t\t\t\t\t\t\t\t\t\t//console.log(\"添加操作历史记录成功\", res);\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t//uni.removeStorageSync(\"customs\"); //移除这个缓存\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '产品调拨成功',\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tthat.button_disabled = false;\n\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"is_option\", true);\n\t\t\t\t\t\t\t\t\t\t\t\t//uni.removeStorageSync(\"warehouse\");\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"out_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"category\")\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\tcommon.log(uni.getStorageSync(\"user\").nickName + \"调拨了'\" + that.products[0].goodsName + \"'等\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.products.length + \"商品\", -2, res.objectId);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t/*let params = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data1\": res.objectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data2\": uni.getStorageSync(\"user\").nickName + \"调拨了'\" + that.products[0].goodsName + \"'等\" + that.products\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length + \"商品\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data3\": that.stock ? that.stock.stock_name : \"未填写\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data4\": res.createdAt,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"remark\": e.detail.value.input_beizhu ? e.detail.value.input_beizhu : \"未填写\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"url\": \"https://www.jimuzhou.com/h5/pages/report/EnteringHistory/detail/detail?id=\" + res.objectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\tsend_temp.send_temp(params);*/\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t//自动打印\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (uni.getStorageSync(\"setting\").auto_print) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprint.autoPrint(operationId);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelta: 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfunction(error) {\n\t\t\t\t\t\t\t\t\t// 批量新增异常处理\n\t\t\t\t\t\t\t\t\tconsole.log(\"异常处理\");\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allocation_detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allocation_detail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}