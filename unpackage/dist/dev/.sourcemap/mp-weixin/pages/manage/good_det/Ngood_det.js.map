{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/main.js","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue?365c","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue?15c1","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue?13d7","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue?f817","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue","webpack:///C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue?319e"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","isRealationNew","recyclableRender","staticRenderFns","_withStripped","that","uid","uniSegmentedControl","GoodDet","goodDetBottom","productPurchase","productSell","data","items","current","user","uni","getStorageSync","badnum","num","desc","bad_numshow","product","selected_item","productId","type","thisStock","onLoad","console","log","removeStorageSync","id","getDetail_byId","onShow","showModal","title","content","stock","stock_name","success","res","confirm","query","Bmob","Query","equalTo","objectId","find","then","length","common","upload_good_withNoCan","showToast","icon","cancel","onShareAppMessage","from","target","goodsName","path","methods","onClickItem","value","stocks","showLoading","include","all_reserve","setStorageSync","item","order","stocks_o","reserve","toFixed","show_float","good_id","now_model","models","push","identity","rights","othercurrent","indexOf","costPrice","nousetime","js_date_time","productCode","hideLoading","confrim_badnum","pointer","Pointer","poiID","set","pointer1","poiID1","product_id","last_bad_num","Number","bad_num","now_bad_num","save","getDetail_noId","add_badnum"],"mappings":"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","file":"pages/manage/good_det/Ngood_det.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/manage/good_det/Ngood_det.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./Ngood_det.vue?vue&type=template&id=6e85c40a&\"\nvar renderjs\nimport script from \"./Ngood_det.vue?vue&type=script&lang=js&\"\nexport * from \"./Ngood_det.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ngood_det.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"新建文件夹 (8)/wechat/pages/manage/good_det/Ngood_det.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Ngood_det.vue?vue&type=template&id=6e85c40a&\"","var components = {\n  \"uni-segmented-control\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-segmented-control/uni-segmented-control\" */ \"@/components/uni-segmented-control/uni-segmented-control.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isRealationNew = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Ngood_det.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Ngood_det.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\";\nimport common from \"@/utils/common.js\"\n\nimport uniSegmentedControl from '@/components/uni-segmented-control/uni-segmented-control.vue';\nimport GoodDet from '@/components/GoodDet.vue';//产品详情\nimport productPurchase from '@/components/productPurchase.vue';//采购详情\nimport productSell from '@/components/productSell.vue';//采购详情\nimport goodDetBottom from '@/components/goodDetBottom.vue';//底部操作栏\n\nlet that;\nlet uid;\nexport default {\n\tcomponents: {\n\t\tuniSegmentedControl,\n\t\tGoodDet,\n\t\tgoodDetBottom,\n\t\tproductPurchase,\n\t\tproductSell\n\t},\n\tdata() {\n\t\treturn {\n\t\t\titems: ['产品详情', '进货情况','销售情况'],\n\t\t\tcurrent: 0,\n\t\t\t\n\t\t\tuser: uni.getStorageSync(\"user\"),\n\t\t\tbadnum: {\n\t\t\t\tnum: '',\n\t\t\t\tdesc: '',\n\t\t\t},\n\t\t\tbad_numshow: false,\n\t\t\t\n\t\t\tproduct: {},\n\t\t\tselected_item: '', //选择的产品\n\t\t\tisRealationNew:false,\n\t\t\tproductId:'',\n\t\t\ttype:'',\n\t\t\tthisStock:{},\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tconsole.log(options)\n\t\tthat = this;\n\t\tuid = uni.getStorageSync(\"uid\");\n\t\tuni.removeStorageSync(\"now_model\")\n\t\t\n\n\n\n\t\tthat.productId = options.id;\n\t\tthat.type = options.type;\n\t\tthat.getDetail_byId()\n\t},\n\n\tonShow() {\n\t\tif (uni.getStorageSync(\"warehouse\") && that.isRealationNew) {\n\t\t\tlet thisStock = uni.getStorageSync(\"warehouse\")\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '是否将该产品添加到' + thisStock[0].stock.stock_name + \"这个店仓\",\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconst query = Bmob.Query(\"Goods\");\n\t\t\t\t\t\tquery.equalTo(\"userId\", \"==\", uid);\n\t\t\t\t\t\tquery.equalTo(\"header\", \"==\", that.product.objectId);\n\t\t\t\t\t\tquery.equalTo(\"stocks\", \"==\", thisStock[0].stock.objectId);\n\t\t\t\t\t\tquery.find().then(res => {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\tif (res.length == 0) {\n\t\t\t\t\t\t\t\tcommon.upload_good_withNoCan(that.product, thisStock[0].stock,0).then(res => {\n\t\t\t\t\t\t\t\t\tif (res[0]) {\n\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"关联成功\",\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tthat.getDetail_byId()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"该店仓已有此产品\",\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t}else if(uni.getStorageSync(\"warehouse\")){\n\t\t\tthat.thisStock = uni.getStorageSync(\"warehouse\")[0].stock\n\t\t}\n\t},\n\n\t//分享\n\tonShareAppMessage: function(res) {\n\t\tif (res.from === 'button') {\n\t\t\t// 来自页面内转发按钮\n\t\t\tconsole.log(res.target)\n\t\t}\n\t\treturn {\n\t\t\ttitle: '库存表-' + that.product.goodsName + '的详情',\n\t\t\tpath: '/pages/manage/good_det/Ngood_det?id=' + that.product.objectId + '&type=false'\n\t\t}\n\t},\n\n\tmethods: {\n\t\t\n\t\tonClickItem(value){\n\t\t\tthat.current = value\n\t\t},\n\n\t\t//得到产品详情 有id\n\t\tgetDetail_byId() {\n\t\t\tlet stocks = [];\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"加载中...\"\n\t\t\t})\n\t\t\tconst query = Bmob.Query('Goods');\n\t\t\tif (that.type == \"false\") {\n\t\t\t\tquery.equalTo(\"objectId\", \"==\", that.productId );\n\t\t\t} else {\n\t\t\t\tquery.equalTo(\"productCode\", \"==\", that.productId )\n\t\t\t}\n\t\t\tquery.equalTo(\"userId\", \"==\", uid);\n\t\t\tquery.include(\"stocks\", \"goodsClass\", \"second_class\");\n\t\t\tquery.equalTo(\"order\", \"==\", 0);\n\t\t\tquery.find().then(res => {\n\t\t\t\t//console.log(res)\n\t\t\t\tlet product = res[0];\n\t\t\t\tlet all_reserve = 0;\n\n\t\t\t\tuni.setStorageSync(\"now_product\", product);\n\t\t\t\t\n\t\t\t\tquery.equalTo(\"userId\", \"==\", uid);\n\t\t\t\tquery.equalTo(\"status\", \"!=\", -1);\n\t\t\t\tquery.include(\"stocks\", \"goodsClass\", \"second_class\");\n\t\t\t\tquery.equalTo(\"header\", \"==\", product.objectId);\n\t\t\t\tquery.find().then(res => {\n\t\t\t\t\t\n\t\t\t\t\tfor (let item of res) {\n\t\t\t\t\t\tif (item.order != 0) {\n\t\t\t\t\t\t\tlet stocks_o = {}\n\t\t\t\t\t\t\tstocks_o.stock_name = item.stocks.stock_name\n\t\t\t\t\t\t\tstocks_o.objectId = item.stocks.objectId\n\t\t\t\t\t\t\tstocks_o.reserve = item.reserve.toFixed(uni.getStorageSync(\"setting\").show_float)\n\t\t\t\t\t\t\tstocks_o.good_id = item.objectId\n\t\t\t\t\t\t\tstocks_o.now_model = item.models\n\t\t\t\t\t\t\titem.stocks = stocks_o\n\t\t\t\t\t\t\tall_reserve += item.reserve\n\t\t\t\t\t\t\tstocks.push(item.stocks)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//当员工没有查看进价的权限时\n\t\t\t\t\tif(that.user.identity == 2&&that.user.rights &&that.user.rights.othercurrent.indexOf(\"0\") !=-1){\n\t\t\t\t\t\tproduct.costPrice  = 0\n\t\t\t\t\t}\n\n\t\t\t\t\tif (product.nousetime) product.nousetime = common.js_date_time(product.nousetime)\n\t\t\t\t\tproduct.all_reserve = all_reserve.toFixed(uni.getStorageSync(\"setting\").show_float);\n\t\t\t\t\tproduct.reserve = all_reserve.toFixed(uni.getStorageSync(\"setting\").show_float);\n\t\t\t\t\tproduct.stocks = stocks\n\t\t\t\t\tproduct.productCode =  (product.productCode) ? product.productCode + \"-\" + true + \"-new\" : product.objectId +\"-\" + false + \"-new\",\n\t\t\t\t\tthat.product = product\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t//console.log(this.product)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\t//确认货损\n\t\tconfrim_badnum() {\n\t\t\tconsole.log(that.selected_item)\n\t\t\tif (that.badnum.num) {\n\t\t\t\tconst pointer = Bmob.Pointer('_User');\n\t\t\t\tconst poiID = pointer.set(uni.getStorageSync(\"masterId\"));\n\n\t\t\t\tconst pointer1 = Bmob.Pointer('Goods');\n\t\t\t\tconst poiID1 = pointer1.set(that.selected_item.objectId);\n\n\t\t\t\tconst product_id = that.selected_item.objectId;\n\t\t\t\tconst last_bad_num = Number(that.selected_item.bad_num ? that.selected_item.bad_num : 0);\n\n\t\t\t\tconst now_bad_num = last_bad_num + Number(that.badnum.num);\n\n\t\t\t\tconst query = Bmob.Query('bad_goods');\n\t\t\t\tquery.set(\"bad_num\", that.badnum.num);\n\t\t\t\tquery.set(\"beizhu_text\", that.badnum.desc);\n\t\t\t\tquery.set(\"operater\", poiID);\n\t\t\t\tquery.set(\"goods\", poiID1);\n\t\t\t\tquery.equalTo(\"order\", \"!=\", 0);\n\t\t\t\tquery.save().then(res => {\n\n\t\t\t\t\tconst query = Bmob.Query('Goods');\n\t\t\t\t\tquery.set('id', product_id) //需要修改的objectId\n\t\t\t\t\tquery.set('bad_num', Number(now_bad_num))\n\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\tthat.bad_numshow = false\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '记录成功',\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\tthat.getDetail_noId()\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请输入货损数量\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t//记录货损点击\n\t\tadd_badnum(item) {\n\t\t\tthat.bad_numshow = true\n\t\t\tthat.selected_item = item\n\t\t},\n\t\t\n\t},\n}\n","import mod from \"-!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Ngood_det.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilder/HBuilderX.2.6.9.20200403.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Ngood_det.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}