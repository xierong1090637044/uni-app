{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/main.js","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue?89a8","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue?c29b","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue?369b","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue?ef24","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue?f6e6"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","g0","_self","_c","detail","createdTime","iso","split","g1","g2","g3","g4","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","that","id","loading","uniNavBar","user","uni","getStorageSync","identity","othercurrent","bills","products","onLoad","console","log","rights","getdetail","onShareAppMessage","res","from","target","title","path","methods","gotoexpressDet","is_vip","navigateTo","url","expressNum","showToast","icon","priview","previewImage","current","urls","Images","show_options","type","extra_type","showActionSheet","itemList","success","tapIndex","revoke","setStorageSync","print","print_operations","confrimOrder","fail","errMsg","query","Bmob","Query","include","get","then","item","packingUnit","catch","err","wx","showModal","content","confirm","showLoading","destroy","objectId","containedIn","find","todos","destroyAll","status","i","length","delete_bill","hideLoading","navigateBack","delta","setTimeout","set","save","count","addOrReduceGoodReserve","ReduceGoodReserve","product","query1","goodsId","thisGood","selected_model","num","model","models","reserve","Number","header","equalTo","statTo","now_reserve","_sumReserve","order","undefined","max_num","warning_num","saveAll","common","goodsName"],"mappings":"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","file":"pages/report/EnteringHistory/detail/detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/report/EnteringHistory/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=f1335b40&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/detail/detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=f1335b40&\"","var components = {\n  \"uni-nav-bar\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.detail.createdTime.iso.split(\" \")\n  var g1 = _vm.detail.createdTime.iso.split(\" \")\n  var g2 = _vm.detail.createdTime.iso.split(\" \")\n  var g3 = _vm.detail.createdTime.iso.split(\" \")\n  var g4 = _vm.detail.createdTime.iso.split(\" \")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\";\nimport print from \"@/utils/print.js\"\nimport common from \"@/utils/common.js\"\n\nimport loading from \"@/components/Loading/index.vue\"\nimport uniNavBar from '@/components/uni-nav-bar/uni-nav-bar.vue'\n\nlet that;\nlet id;\nexport default {\n\tcomponents: {\n\t\tloading,\n\t\tuniNavBar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: uni.getStorageSync(\"user\"),\n\t\t\tidentity: uni.getStorageSync(\"identity\"),\n\t\t\tothercurrent: '',\n\t\t\tbills: [],\n\t\t\tloading: true,\n\t\t\tproducts: null,\n\t\t\tdetail: null,\n\t\t}\n\t},\n\tonLoad(options) {\n\n\n\n\n\t\tconsole.log(options)\n\t\tthat = this;\n\t\tid = options.id;\n\t\tif (that.user.rights && that.user.rights.othercurrent) {\n\t\t\tthat.othercurrent = that.user.rights.othercurrent\n\t\t}\n\t\tthat.getdetail(id);\n\t},\n\n\t//分享\n\tonShareAppMessage: function(res) {\n\t\tif (res.from === 'button') {\n\t\t\t// 来自页面内转发按钮\n\t\t\tconsole.log(res.target)\n\t\t}\n\t\treturn {\n\t\t\ttitle: '库存表-操作单详情',\n\t\t\tpath: '/pages/report/EnteringHistory/detail/detail?id=' + id\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tgotoexpressDet() {\n\t\t\tif (that.user.is_vip) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: \"../expressDet/expressDet?number=\" + that.detail.expressNum\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"您还不是会员，无法使用\",\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t//预览图片\n\t\tpriview(url) {\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: url,\n\t\t\t\turls: that.detail.Images,\n\t\t\t});\n\t\t},\n\n\t\t//点击显示操作菜单\n\t\tshow_options() {\n\t\t\tlet options = []\n\n\t\t\tif (that.detail.type == 1 || that.detail.type == -1) {\n\t\t\t\tif (that.detail.type == 1 && that.detail.extra_type == 1) {\n\t\t\t\t\toptions = ['撤销', '打印', \"采购入库\"]\n\t\t\t\t} else if (that.detail.type == -1 && that.detail.extra_type == 1) {\n\t\t\t\t\toptions = ['撤销', '打印', '销售出库']\n\t\t\t\t} else {\n\t\t\t\t\toptions = ['撤销', '打印']\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\toptions = ['打印']\n\t\t\t}\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList: options,\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.tapIndex == 0) {\n\t\t\t\t\t\tthat.revoke()\n\t\t\t\t\t\tuni.setStorageSync(\"is_option\", true)\n\t\t\t\t\t} else if (res.tapIndex == 1) {\n\t\t\t\t\t\tprint.print_operations(that.detail, that.products)\n\t\t\t\t\t} else if (res.tapIndex == 2) {\n\t\t\t\t\t\tthat.confrimOrder()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: function(res) {\n\t\t\t\t\tconsole.log(res.errMsg);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetdetail: function(id) {\n\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\tquery.include(\"opreater\", \"custom\", \"producer\", \"stock\",\"shop\",\"account\");\n\t\t\tquery.get(id).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tthat.detail = res;\n\t\t\t\tfor(let item of res.detail){\n\t\t\t\t\tif(item.packingUnit && item.packingUnit !='undefined'){\n\t\t\t\t\t\titem.packingUnit = item.packingUnit\n\t\t\t\t\t}else{\n\t\t\t\t\t\titem.packingUnit = ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthat.products = res.detail;\n\t\t\t\tthat.bills = res.bills;\n\t\t\t\tthat.loading = false;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\n\t\t//数据撤销点击\n\t\trevoke: function() {\n\t\t\twx.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '数据撤销后不可恢复，请谨慎撤销！',\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '撤销中...'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\tquery.destroy(that.detail.objectId).then(res => {\n\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.bills);\n\t\t\t\t\t\t\tquery.find().then(todos => {\n\n\t\t\t\t\t\t\t\ttodos.destroyAll().then(res => {\n\t\t\t\t\t\t\t\t\t// 成功批量修改\n\t\t\t\t\t\t\t\t\tif (that.detail.status) {\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < that.products.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\tthat.delete_bill(i);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '撤销成功'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t//审核订单\n\t\tconfrimOrder() {\n\t\t\twx.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '是否审核该笔操作单！',\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '审核中，请勿退出该页面...'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(that.detail.status){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle:\"已经审核过了...\",\n\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\tquery.set('id', id) //需要修改的objectId\n\t\t\t\t\t\tquery.set('status', true)\n\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t//console.log(res)\n\t\t\t\t\t\t\tlet count = 0\n\t\t\t\t\t\t\tif (that.detail.type == 1) {\n\t\t\t\t\t\t\t\tfor (let item of that.products) {\n\t\t\t\t\t\t\t\t\tthat.addOrReduceGoodReserve(item, count);\n\t\t\t\t\t\t\t\t\tcount += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (that.detail.type == -1) {\n\t\t\t\t\t\t\t\tfor (let item of that.products) {\n\t\t\t\t\t\t\t\t\tthat.ReduceGoodReserve(item, count);\n\t\t\t\t\t\t\t\t\tcount += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t//采购单确定审核之后改变产品库存\n\t\taddOrReduceGoodReserve(product, count) {\n\t\t\tconst query1 = Bmob.Query('Goods');\n\t\t\tquery1.get(product.goodsId.objectId).then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tlet thisGood = res;\n\t\t\t\tif (product.goodsId.selected_model) {\n\t\t\t\t\tlet num = 0;\n\t\t\t\t\tfor (let model of product.goodsId.selected_model) {\n\t\t\t\t\t\tfor (let item of res.models) {\n\t\t\t\t\t\t\tif (item.id == model.id) {\n\t\t\t\t\t\t\t\titem.reserve = Number(item.reserve) + Number(model.num)\n\t\t\t\t\t\t\t\t//console.log(item.reserve)\n\t\t\t\t\t\t\t\tnum += Number(model.num)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(res.models)\n\t\t\t\t\tres.set('models', res.models)\n\t\t\t\t\tres.set('reserve', res.reserve + num);\n\t\t\t\t} else {\n\t\t\t\t\tres.set('reserve', res.reserve + product.num);\n\t\t\t\t}\n\n\t\t\t\tres.save().then(res => {\n\t\t\t\t\tif (thisGood.header) {\n\t\t\t\t\t\tconst query1 = Bmob.Query(\"Goods\");\n\t\t\t\t\t\tquery1.equalTo(\"header\", \"==\", thisGood.header.objectId);\n\t\t\t\t\t\tquery1.equalTo(\"order\", \"==\", 1);\n\t\t\t\t\t\tquery1.statTo(\"sum\", \"reserve\");\n\t\t\t\t\t\tquery1.find().then(res => {\n\t\t\t\t\t\t\tconsole.log(\"dasds\", res)\n\t\t\t\t\t\t\tlet now_reserve = res[0]._sumReserve\n\t\t\t\t\t\t\tconst query = Bmob.Query('Goods');\n\t\t\t\t\t\t\tquery.set('reserve', now_reserve)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(thisGood.order==\"\" || thisGood.order==null || thisGood.order==undefined){\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(thisGood.max_num >=0){\n\t\t\t\t\t\t\t\t\tif(num >= thisGood.max_num){\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 2)\n\t\t\t\t\t\t\t\t\t}else if(num <= thisGood.warning_num){\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 0)\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 1)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tquery.set('stocktype', 1)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tquery.set('id', thisGood.header.objectId)\n\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\tif (count == (that.products.length - 1)) {\n\t\t\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.bills);\n\t\t\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '审核成功'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t\t\t//console.log(res, 'ok')\n\t\t\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif (count == (that.products.length - 1)) {\n\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.bills);\n\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '审核成功'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t//console.log(res, 'ok')\n\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\t//销售单确认审核之后减少库存\n\t\tReduceGoodReserve(product, count) {\n\t\t\tconst query1 = Bmob.Query('Goods');\n\t\t\tlet now_reserve = 0;\n\t\t\tquery1.get(product.goodsId.objectId).then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tlet thisGood = res;\n\t\t\t\tif (product.goodsId.selected_model) {\n\t\t\t\t\tlet num = 0;\n\t\t\t\t\tfor (let model of product.goodsId.selected_model) {\n\t\t\t\t\t\tfor (let item of res.models) {\n\t\t\t\t\t\t\tif (item.id == model.id) {\n\t\t\t\t\t\t\t\titem.reserve = Number(item.reserve) - Number(model.num)\n\t\t\t\t\t\t\t\t//console.log(item.reserve)\n\t\t\t\t\t\t\t\tnum += Number(model.num)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(res.models)\n\t\t\t\t\tres.set('models', res.models)\n\t\t\t\t\tres.set('reserve', res.reserve - num);\n\t\t\t\t\tnow_reserve = res.reserve - num\n\t\t\t\t} else {\n\t\t\t\t\tres.set('reserve', res.reserve - product.num);\n\t\t\t\t\tnow_reserve = res.reserve - product.num\n\t\t\t\t}\n\n\t\t\t\tconsole.log(product)\n\t\t\t\tres.save().then(res => {\n\t\t\t\t\tif (thisGood.header) {\n\t\t\t\t\t\tconst query1 = Bmob.Query(\"Goods\");\n\t\t\t\t\t\tquery1.equalTo(\"header\", \"==\", thisGood.header.objectId);\n\t\t\t\t\t\tquery1.equalTo(\"order\", \"==\", 1);\n\t\t\t\t\t\tquery1.statTo(\"sum\", \"reserve\");\n\t\t\t\t\t\tquery1.find().then(res => {\n\t\t\t\t\t\t\tconsole.log(\"dasds\", res)\n\t\t\t\t\t\t\tlet now_reserve = res[0]._sumReserve\n\t\t\t\t\t\t\tconst query = Bmob.Query('Goods');\n\t\t\t\t\t\t\tquery.set('reserve', now_reserve)\n\t\t\t\t\t\t\tif(thisGood.order==\"\" || thisGood.order==null || thisGood.order==undefined){\n\t\t\t\t\t\t\t\tif(thisGood.warning_num >=0){\n\t\t\t\t\t\t\t\t\tif(num >= thisGood.max_num){\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 2)\n\t\t\t\t\t\t\t\t\t}else if(num <= thisGood.warning_num){\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 0)\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tquery.set('stocktype', 1)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tquery.set('stocktype', 1)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tquery.set('id', thisGood.header.objectId)\n\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\tif (product.warning_num >= now_reserve && product.warning_num>=0) {\n\t\t\t\t\t\t\t\t\tcommon.log(product.goodsName + \"销售了\" + product.num + \"件，已经低于预警数量\" + product.warning_num, -2, product.goodsId\n\t\t\t\t\t\t\t\t\t\t.objectId);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (count == (that.products.length - 1)) {\n\t\t\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.bills);\n\t\t\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '审核成功'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t\t\t//console.log(res, 'ok')\n\t\t\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (product.warning_num >= now_reserve) {\n\t\t\t\t\t\t\tcommon.log(product.goodsName + \"销售了\" + product.num + \"件，已经低于预警数量\" + product.warning_num, -2, product.goodsId\n\t\t\t\t\t\t\t\t.objectId);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (count == (that.products.length - 1)) {\n\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.bills);\n\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '审核成功'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t//console.log(res, 'ok')\n\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\tdelete_bill: function(i) {\n\t\t\tlet product = that.products[i];\n\t\t\tlet bill = that.bills[i]\n\n\t\t\tconst query1 = Bmob.Query('Goods');\n\t\t\tquery1.get(product.goodsId.objectId).then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tlet thisGood = res;\n\t\t\t\tquery1.set('id', product.goodsId.objectId);\n\t\t\t\tif (product.type == 1) {\n\t\t\t\t\tif (product.goodsId.selected_model) {\n\t\t\t\t\t\tlet num = 0;\n\t\t\t\t\t\tfor (let model of product.goodsId.selected_model) {\n\t\t\t\t\t\t\tfor (let item of res.models) {\n\t\t\t\t\t\t\t\tif (item.id == model.id) {\n\t\t\t\t\t\t\t\t\titem.reserve = Number(item.reserve) - Number(model.num)\n\t\t\t\t\t\t\t\t\t//console.log(item.reserve)\n\t\t\t\t\t\t\t\t\tnum += Number(model.num)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(res.models)\n\t\t\t\t\t\tquery1.set('models', res.models)\n\t\t\t\t\t\tquery1.set('reserve', res.reserve - num);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tquery1.set('reserve', res.reserve - product.num);\n\t\t\t\t\t}\n\t\t\t\t} else if (product.type == -1) {\n\t\t\t\t\tif (product.goodsId.selected_model) {\n\t\t\t\t\t\tlet num = 0;\n\t\t\t\t\t\tfor (let model of product.goodsId.selected_model) {\n\t\t\t\t\t\t\tfor (let item of res.models) {\n\t\t\t\t\t\t\t\tif (item.id == model.id) {\n\t\t\t\t\t\t\t\t\titem.reserve = Number(item.reserve) + Number(model.num)\n\t\t\t\t\t\t\t\t\t//console.log(item.reserve)\n\t\t\t\t\t\t\t\t\tnum += Number(model.num)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(res.models)\n\t\t\t\t\t\tquery1.set('models', res.models)\n\t\t\t\t\t\tquery1.set('reserve', res.reserve + num);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tquery1.set('reserve', res.reserve + product.num);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tquery1.save().then(res => {\n\t\t\t\t\tif (thisGood.header) {\n\t\t\t\t\t\tconst query1 = Bmob.Query(\"Goods\");\n\t\t\t\t\t\tquery1.equalTo(\"header\", \"==\", thisGood.header.objectId);\n\t\t\t\t\t\tquery1.equalTo(\"order\", \"==\", 1);\n\t\t\t\t\t\tquery1.statTo(\"sum\", \"reserve\");\n\t\t\t\t\t\tquery1.find().then(res => {\n\t\t\t\t\t\t\tconsole.log(\"当前的产品的主产品\", res)\n\t\t\t\t\t\t\tlet now_reserve = res[0]._sumReserve\n\t\t\t\t\t\t\tconst query = Bmob.Query('Goods');\n\t\t\t\t\t\t\tquery.set('reserve', now_reserve)\n\t\t\t\t\t\t\tquery.set('stocktype', (now_reserve > thisGood.warning_num) ? 1 : 0)\n\t\t\t\t\t\t\tquery.set('id', thisGood.header.objectId)\n\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\tif (i == (that.products.length - 1)) {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '撤销成功'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif (i == (that.products.length - 1)) {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '撤销成功'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t})\n\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\n\t\t}\n\n\t}\n}\n","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}