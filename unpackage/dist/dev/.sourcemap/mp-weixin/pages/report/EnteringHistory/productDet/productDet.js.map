{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/main.js","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?fbc1","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?7e5c","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?6956","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?0e35","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue","webpack:///C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?d739"],"names":["__webpack_require__","_interopRequireDefault","createPage","Page","r","__webpack_exports__","_productDet_vue_vue_type_template_id_11826880___WEBPACK_IMPORTED_MODULE_0__","_productDet_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","renderjs","options","__file","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_productDet_vue_vue_type_template_id_11826880___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","recyclableRender","_h","this","$createElement","_self","_c","_withStripped","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_productDet_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_productDet_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_hydrogenJsSdk","_common","that","id","components","tkiQrcode","loading","uniNavBar","data","user","uni","getStorageSync","identity","othercurrent","bills","products","detail","matters","all_money","really_total_money","real_money","enterNum","onLoad","console","log","rights","onShow","getdetail","methods","show_options","showActionSheet","itemList","success","res","tapIndex","confrimMatter","confrimComplete","confrimEnter","fail","errMsg","status","showToast","icon","title","matterStatus","real_num","GoodIds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","push","goodsId","objectId","err","return","query","Bmob","Query","containedIn","find","then","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","good","num","total_money","costPrice","modify_retailPrice","setStorageSync","navigateTo","url","showModal","content","confirm","showLoading","set","save","todos","saveAll","mattersId","length","billsObj","Array","detailObj","uid","total_num","i","Number","reserve","detailBills","tempBills","Pointer","tempGoods_id","masterId","poiID2","goodsName","toString","retailPrice","selectd_model","selected_model","models","type","poiID","poiID1","operationId","hideLoading","duration","complete","outRedGoodNum","result","common","nickName","removeStorageSync","catch","cancel","Promise","resolve","reject","_loop","get","warning_num","priview","previewImage","current","urls","Images","_this","include","startDay","js_date_time","endDay","toFixed","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","qrR","src","bcR","saveBccode","$refs","barcode","_saveCode","saveQrcode","qrcode","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_productDet_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_Downloads_HBuilderX_2_3_3_20190923_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_productDet_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":";;;;wEAAAA,kBAAA,GAAmBA,2BAAA,GAEnBC,EAAAD,YAAA,uDAEAE,EADAD,EAAAD,iEAAA,MACWG;;;;2DCJXH,EAAAI,EAAAC,GAAA,IAAAC,EAAAN,wDAAA,KAAAO,EAAAP,kDAAA,aAAAQ,KAAAD,EAAA,YAAAC,GAAA,SAAAC,GAAAT,EAAAU,EAAAL,EAAAI,EAAA,kBAAAF,EAAAE,KAAA,CAAAD,GAAAR,0DAAA,SAAAW,EAAAX,2GAAA,IASAY,EAAgBC,OAAAF,EAAA,QAAAE,CACdN,EAAA,QACAD,EAAA,OACAA,EAAA,iBACF,EACA,KACA,KACA,MACA,EACEA,EAAA,gBAjBFQ,GAwCAF,EAAAG,QAAAC,OAAA,uGACeX,EAAA,QAAAO;;;;2GC1CfZ,EAAAI,EAAAC,GAAA,IAAAY,EAAAjB,kjBAAA,KAAAA,EAAAU,EAAAL,EAAA,2BAAAY,EAAA,SAAAjB,EAAAU,EAAAL,EAAA,oCAAAY,EAAA,kBAAAjB,EAAAU,EAAAL,EAAA,qCAAAY,EAAA,mBAAAjB,EAAAU,EAAAL,EAAA,+BAAAY,EAAA;;;;2GCAAjB,EAAAI,EAAAC,GAAAL,EAAAU,EAAAL,EAAA,2BAAAa,IAAAlB,EAAAU,EAAAL,EAAA,oCAAAc,IAAAnB,EAAAU,EAAAL,EAAA,qCAAAe,IAAApB,EAAAU,EAAAL,EAAA,2BACA,IAAAa,EAAA,WACA,IACAG,EADAC,KACAC,eADAD,KAEAE,MAAAC,IAEAL,GAAA,EACAD,EAAA,GACAD,EAAAQ,eAAA;;;;2DCRA1B,EAAAI,EAAAC,GAAA,IAAAsB,EAAA3B,+XAAA,KAAA4B,EAAA5B,EAAA6B,EAAAF,GAAA,QAAAnB,KAAAmB,EAAA,YAAAnB,GAAA,SAAAC,GAAAT,EAAAU,EAAAL,EAAAI,EAAA,kBAAAkB,EAAAlB,KAAA,CAAAD,GAAs0BH,EAAA,QAAAuB,EAAG;;;;0IC+Hz0B,IAAAE,EAAA7B,EAAAD,wBAAA,KAEA+B,GADA9B,EAAAD,yBAAA,KACAC,EAAAD,0BAAA,6DAMIgC,EACAC,IACW,CACdC,WAAY,CACXC,gOACAC,kKACAC,mMAEDC,KANc,WAOb,MAAO,CACNC,KAAMC,EAAIC,eAAe,QACzBC,SAAUF,EAAIC,eAAe,YAC7BE,aAAc,GACdC,MAAO,GACPR,SAAS,EACTS,SAAU,KACVC,OAAQ,KACRC,QAAS,GACTC,UAAW,EACXC,mBAAoB,EACpBC,WAAY,EACZC,SAAS,IAGXC,OAtBc,SAsBPrC,GACNsC,QAAQC,IAAIvC,GACZiB,EAAOV,KACPW,EAAKlB,EAAQkB,GACTD,EAAKO,KAAKgB,QAAUvB,EAAKO,KAAKgB,OAAOZ,eACxCX,EAAKW,aAAeX,EAAKO,KAAKgB,OAAOZ,eAKvCa,OAhCc,WAiCbxB,EAAKyB,UAAUxB,IAGhByB,QAAS,CAGRC,aAHQ,WAIPnB,EAAIoB,gBAAgB,CACnBC,SAAU,CAAC,KAAM,OAAQ,MACzBC,QAAS,SAASC,GACjB,IAAIC,EAAWD,EAAIC,SACH,GAAZA,EACHhC,EAAKiC,gBACiB,GAAZD,EACVhC,EAAKkC,kBACiB,GAAZF,GACVhC,EAAKmC,gBAGPC,KAAM,SAASL,GACdV,QAAQC,IAAIS,EAAIM,YAOnBF,aAxBQ,WAyBP,GAA0B,GAAtBnC,EAAKc,OAAOwB,OACf9B,EAAI+B,UAAU,CACbC,KAAM,OACNC,MAAO,gBAEF,GAAgC,GAA5BzC,EAAKc,OAAO4B,aACtBlC,EAAI+B,UAAU,CACbC,KAAM,OACNC,MAAO,cAED,GAAIzC,EAAKmB,UAAYnB,EAAKc,OAAO6B,SACxCnC,EAAI+B,UAAU,CACbC,KAAM,OACNC,MAAO,iBAEF,CACN,IAAIG,EAAU,GADRC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAEN,QAAAC,EAAAC,EAAiBlD,EAAKc,OAAOA,OAA7BqC,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAqC,KAA5BU,EAA4BN,EAAAO,MACpCZ,EAAQa,KAAKF,EAAKG,QAAQC,WAHrB,MAAAC,GAAAd,GAAA,EAAAC,EAAAa,EAAA,YAAAf,GAAA,MAAAK,EAAAW,QAAAX,EAAAW,SAAA,WAAAf,EAAA,MAAAC,GAKN,IAAMe,EAAQC,UAAKC,MAAM,SACzBF,EAAMG,YAAY,WAAYrB,GAC9BkB,EAAMI,OAAOC,KAAK,SAAApC,GAAO,IAAAqC,GAAA,EAAAC,GAAA,EAAAC,OAAAtB,EAAA,IAExB,QAAAuB,EAAAC,EAAiBzC,EAAjBoB,OAAAC,cAAAgB,GAAAG,EAAAC,EAAAnB,QAAAC,MAAAc,GAAA,EAAsB,KAAbb,EAAagB,EAAAf,MAAAiB,GAAA,EAAAC,GAAA,EAAAC,OAAA3B,EAAA,IACrB,QAAA4B,EAAAC,EAAiB7E,EAAKc,OAAOA,OAA7BqC,OAAAC,cAAAqB,GAAAG,EAAAC,EAAAxB,QAAAC,MAAAmB,GAAA,EAAqC,KAA5BK,EAA4BF,EAAApB,MAChCsB,EAAKpB,QAAQC,UAAYJ,EAAKI,WAC9BmB,EAAK3D,SACPoC,EAAKwB,IAAMD,EAAKC,IAAMD,EAAK3D,SAE3BoC,EAAKwB,IAAMD,EAAKC,IAGjBxB,EAAKyB,YAAcF,EAAKC,IAAMxB,EAAK0B,UACnC1B,EAAKtC,mBAAqB6D,EAAKC,IAAMxB,EAAK0B,UAC1C1B,EAAK2B,mBAAqB3B,EAAK0B,YAXZ,MAAArB,GAAAc,GAAA,EAAAC,EAAAf,EAAA,YAAAa,GAAA,MAAAI,EAAAhB,QAAAgB,EAAAhB,SAAA,WAAAa,EAAA,MAAAC,KAFE,MAAAf,GAAAS,GAAA,EAAAC,EAAAV,EAAA,YAAAQ,GAAA,MAAAI,EAAAX,QAAAW,EAAAX,SAAA,WAAAQ,EAAA,MAAAC,GAkBxBjD,QAAQC,IAAIS,GACZvB,EAAI2E,eAAe,WAAWpD,GAC9BvB,EAAI2E,eAAe,cAAcnF,EAAKc,OAAOA,QAC7CN,EAAI4E,WAAW,CACdC,IAAI,yEAAyEpF,QAQjFiC,gBA7EQ,WA8EP1B,EAAI8E,UAAU,CACb7C,MAAO,KACP8C,QAAS,WACTzD,QAAS,SAASC,GACjB,GAAIA,EAAIyD,QACP,GAAIxF,EAAKc,OAAOwB,OACf9B,EAAI+B,UAAU,CACbE,MAAO,gBAEF,CACNjC,EAAIiF,YAAY,CACfhD,MAAO,WAER,IAAMqB,EAAQC,UAAKC,MAAM,oBACzBF,EAAM4B,IAAI,KAAMzF,GAChB6D,EAAM4B,IAAI,UAAU,GACpB5B,EAAM6B,OAAOxB,KAAK,SAAApC,GACjB,IAAM+B,EAAQC,UAAKC,MAAM,SACzBF,EAAMG,YAAY,WAAYjE,EAAKc,OAAOF,OAC1CkD,EAAMI,OAAOC,KAAK,SAAAyB,GACjBA,EAAMF,IAAI,UAAU,GACpBE,EAAMC,UAAU1B,KAAK,SAAApC,GAEpBvB,EAAI+B,UAAU,CACbE,MAAO,SAGRzC,EAAKyB,UAAUxB,cAYvBgC,cArHQ,WAsHHjC,EAAKc,OAAOgF,WAAa9F,EAAKc,OAAOgF,UAAUC,OAAS,EAC3DvF,EAAI8E,UAAU,CACb7C,MAAO,SACP8C,QAAS,UACTzD,QAAS,SAASC,GACjB,GAAIA,EAAIyD,QACP,GAAIxF,EAAKc,OAAO4B,aACflC,EAAI+B,UAAU,CACbE,MAAO,gBAEF,CAKN,IAJA,IAAIuD,EAAW,IAAIC,MACfC,EAAY,GACZC,EAAM3F,EAAIC,eAAe,OACzB2F,EAAY,EACPC,EAAI,EAAGA,EAAIrG,EAAKe,QAAQgF,OAAQM,IAAK,CAC7C,IAAItB,EAAMuB,OAAOtG,EAAKe,QAAQsF,GAAGE,SAAWvG,EAAKe,QAAQsF,GAAGtB,IAC5DqB,GAAapG,EAAKe,QAAQsF,GAAGtB,IAE7B,IAAIyB,EAAc,GACdC,EAAY1C,UAAKC,MAAM,SAGvBzD,EADUwD,UAAK2C,QAAQ,SACRhB,IAAIS,GAEnBQ,EADW5C,UAAK2C,QAAQ,WACAhB,IAAI1F,EAAKe,QAAQsF,GAAG1C,UAE5CiD,EAAWpG,EAAIC,eAAe,YAE9BoG,EADW9C,UAAK2C,QAAQ,SACNhB,IAAIkB,GAE1BH,EAAUf,IAAI,YAAa1F,EAAKe,QAAQsF,GAAGS,WAC3CL,EAAUf,IAAI,cAAgB1F,EAAKe,QAAQsF,GAAGnB,mBAAoB6B,YAClEN,EAAUf,IAAI,MAAOY,OAAOtG,EAAKe,QAAQsF,GAAGtB,MAC5C0B,EAAUf,IAAI,cAAe1F,EAAKe,QAAQsF,GAAGrB,aAC7CyB,EAAUf,IAAI,qBAAsB1F,EAAKe,QAAQsF,GAAGpF,oBACpDwF,EAAUf,IAAI,YAAaiB,GAC3BF,EAAUf,IAAI,SAAUnF,GACxBkG,EAAUf,IAAI,WAAYmB,GAC1BJ,EAAUf,IAAI,OAAQ,GAEtB,IAAIhC,EAAU,GACd8C,EAAYM,UAAY9G,EAAKe,QAAQsF,GAAGS,UACxCN,EAAYtB,mBAAsBlF,EAAKe,QAAQsF,GAAGnB,mBAAoB6B,WACtEP,EAAYQ,YAAchH,EAAKe,QAAQsF,GAAGW,YAC1CR,EAAYxB,YAAchF,EAAKe,QAAQsF,GAAGrB,YAC1CtB,EAAQuB,UAAYjF,EAAKe,QAAQsF,GAAGpB,UACpCvB,EAAQsD,YAAchH,EAAKe,QAAQsF,GAAGW,YACtCtD,EAAQC,SAAW3D,EAAKe,QAAQsF,GAAG1C,SACnCD,EAAQ6C,QAAUxB,EACd/E,EAAKe,QAAQsF,GAAGY,gBACnBvD,EAAQwD,eAAiBlH,EAAKe,QAAQsF,GAAGa,eACzCxD,EAAQyD,OAASnH,EAAKe,QAAQsF,GAAGc,QAElCX,EAAY9C,QAAUA,EACtB8C,EAAYzB,IAAM/E,EAAKe,QAAQsF,GAAGtB,IAClCyB,EAAYY,KAAO,EAEnBpB,EAASvC,KAAKgD,GACdP,EAAUzC,KAAK+C,GAKhBzC,UAAKC,MAAM,SAAS6B,QAAQG,GAAU7B,KAAK,SAASpC,GAGnD,IADA,IAAInB,EAAQ,GACHyF,EAAI,EAAGA,EAAItE,EAAIgE,OAAQM,IAC/BzF,EAAM6C,KAAK1B,EAAIsE,GAAGvE,QAAQ6B,UAG3B,IACI0D,EADUtD,UAAK2C,QAAQ,SACPhB,IAAIS,GAEpBS,EAAWpG,EAAIC,eAAe,YAE9B6G,EADWvD,UAAK2C,QAAQ,SACNhB,IAAIkB,GAEtB9C,EAAQC,UAAKC,MAAM,oBAEvBF,EAAM4B,IAAI,SAAUQ,GACpBpC,EAAM4B,IAAI,WAAYU,GACtBtC,EAAM4B,IAAI,OAAQ,GAClB5B,EAAM4B,IAAI,QAAS9E,GACnBkD,EAAM4B,IAAI,WAAY4B,GACtBxD,EAAM4B,IAAI,SAAU2B,GACpBvD,EAAM4B,IAAI,YAAa1F,EAAKe,QAAQ,GAAG+F,WAEvChD,EAAM4B,IAAI,YAAa1F,EAAKgB,WAC5B8C,EAAM6B,OAAOxB,KAAK,SAAApC,GACjB,IAAIwF,EAAcxF,EAAI4B,SAEtBnD,EAAIgH,cACJ,IAAM1D,EAAQC,UAAKC,MAAM,oBACzBF,EAAM4B,IAAI,KAAMzF,GAChB6D,EAAM4B,IAAI,gBAAgB,GAC1B5B,EAAM6B,OAAOxB,KAAK,SAAApC,GACjBvB,EAAI+B,UAAU,CACbE,MAAO,OACPD,KAAM,UACNiF,SAAU,IACVC,SAAU,WAET1H,EAAK2H,cAAc3H,EAAKe,SAASoD,KAAK,SAAAyD,GACrCC,UAAOvG,IAAId,EAAIC,eAAe,QAAQqH,SAAW,QAAU9H,EAAKe,QAAQ,GAAG+F,UAC1E,KACA9G,EAAKe,QACJgF,OAAS,KAAM,EAAGwB,GACpB/G,EAAI2E,eAAe,aAAa,GAChC3E,EAAIuH,kBAAkB,cACtBvH,EAAIuH,kBAAkB,iBACtBvH,EAAIuH,kBAAkB,YACtBvH,EAAIuH,kBAAkB,aAEtB/H,EAAKyB,UAAUxB,UAIhB+H,MAAM,SAAApE,GACRvC,QAAQC,IAAIsC,cAQN7B,EAAIkG,QACd5G,QAAQC,IAAI,aAKfd,EAAI+B,UAAU,CACbE,MAAO,SACPD,KAAM,UAQTmF,cArQQ,SAqQM9G,GACb,OAAO,IAAIqH,QAAQ,SAACC,EAASC,GAC5B,IADuC,IAAAC,EAAA,SAC9BhC,GACR,IAAItB,EAAM,EACIhB,UAAKC,MAAM,WACnBsE,IAAIzH,EAASwF,GAAG1C,UAAUQ,KAAK,SAAApC,GAGpCgD,EAAMuB,OAAOzF,EAASwF,GAAGE,SAAWD,OAAOzF,EAASwF,GAAGtB,KAEvDhD,EAAI2D,IAAI,UAAWX,GACnBhD,EAAI2D,IAAI,YAAcX,GAAOlE,EAASwF,GAAGkC,YAAe,EAAI,GAC5DxG,EAAI4D,OAEA9E,EAASwF,GAAGkC,aAAexD,GAC9B8C,UAAOvG,IAAIT,EAASwF,GAAGS,UAAY,SAAWjG,EAASwF,GAAGtB,IAAM,aAAelE,EAASwF,GAAGkC,aAAc,EACxG1H,EAASwF,GAAG1C,UAGV0C,GAAKxF,EAASkF,OAAS,GAC1BoC,GAAQ,KAEPH,MAAM,SAAApE,GACRvC,QAAQC,IAAIsC,MArBLyC,EAAI,EAAGA,EAAIxF,EAASkF,OAAQM,IAAKgC,EAAjChC,MA4BXmC,QAnSQ,SAmSAnD,GACP7E,EAAIiI,aAAa,CAChBC,QAASrD,EACTsD,KAAM3I,EAAKc,OAAO8H,UAIpBnH,UAAW,SAASxB,GAAI,IAAA4I,EAAAvJ,KACjBwE,EAAQC,UAAKC,MAAM,oBACzBF,EAAMgF,QAAQ,WAAY,SAAU,WAAY,SAChDhF,EAAMwE,IAAIrI,GAAIkE,KAAK,SAAApC,GAOlB,GANAV,QAAQC,IAAIS,GACRA,EAAIgH,WAAUhH,EAAIgH,SAAWlB,UAAOmB,aAAajH,EAAIgH,WACrDhH,EAAIkH,SAAQlH,EAAIkH,OAASpB,UAAOmB,aAAajH,EAAIkH,SACrDjJ,EAAKc,OAASiB,EACd/B,EAAKa,SAAWkB,EAAIjB,OACpBd,EAAKY,MAAQmB,EAAInB,MACbmB,EAAI+D,WAAa/D,EAAI+D,UAAUC,OAAS,EAAG,CAC9C/F,EAAKe,QAAUgB,EAAI+D,UAEnB,IAAK,IAAIO,EAAI,EAAGA,EAAIwC,EAAK9H,QAAQgF,OAAQM,IACxCwC,EAAK7H,UAAYsF,QAAQuC,EAAK9H,QAAQsF,GAAGrB,YAAc6D,EAAK7H,WAAWkI,QAAQ,IAC/EL,EAAK5H,mBAAqBqF,QAAQuC,EAAK9H,QAAQsF,GAAGpF,mBAAqB4H,EAAK5H,oBAAoBiI,QAAQ,IACxGL,EAAKzC,WAAaE,OAAOuC,EAAK9H,QAAQsF,GAAGtB,KAE1C8D,EAAK3H,WAAaoF,OAAOuC,EAAK7H,UAAUkI,QAAQ,IAfxB,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAArG,EAAA,IAkBzB,QAAAsG,EAAAC,EAAmBxH,EAAIjB,OAAvBqC,OAAAC,cAAA+F,GAAAG,EAAAC,EAAAlG,QAAAC,MAAA6F,GAAA,EAA+B,KAAtBrI,EAAsBwI,EAAA9F,MAC3B1C,EAAOK,WACTnB,EAAKmB,UAAWL,EAAOK,WApBA,MAAAyC,GAAAwF,GAAA,EAAAC,EAAAzF,EAAA,YAAAuF,GAAA,MAAAI,EAAA1F,QAAA0F,EAAA1F,SAAA,WAAAuF,EAAA,MAAAC,GAwBzBrJ,EAAKI,SAAU,IACb4H,MAAM,SAAApE,GACRvC,QAAQC,IAAIsC,MAId4F,IA3UQ,SA2UJzH,GACHzC,KAAKmK,IAAM1H,GAGZ2H,IA/UQ,SA+UJ3H,GACHzC,KAAKmK,IAAM1H,GAGZ4H,WAnVQ,WAoVPrK,KAAKsK,MAAMC,QAAQC,aAIpBC,WAxVQ,WAyVPzK,KAAKsK,MAAMI,OAAOF;;;;2DCtgBrB9L,EAAAI,EAAAC,GAAA,IAAA4L,EAAAjM,wjBAAA,KAAAkM,EAAAlM,EAAA6B,EAAAoK,GAAA,QAAAzL,KAAAyL,EAAA,YAAAzL,GAAA,SAAAC,GAAAT,EAAAU,EAAAL,EAAAI,EAAA,kBAAAwL,EAAAxL,KAAA,CAAAD,GAAwqCH,EAAA,QAAA6L,EAAG","file":"pages/report/EnteringHistory/productDet/productDet.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/report/EnteringHistory/productDet/productDet.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./productDet.vue?vue&type=template&id=11826880&\"\nvar renderjs\nimport script from \"./productDet.vue?vue&type=script&lang=js&\"\nexport * from \"./productDet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productDet.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('11826880')) {\n      api.createRecord('11826880', component.options)\n    } else {\n      api.reload('11826880', component.options)\n    }\n    module.hot.accept(\"./productDet.vue?vue&type=template&id=11826880&\", function () {\n      api.rerender('11826880', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/wechat/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue\"\nexport default component.exports","export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=template&id=11826880&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\";\nimport print from \"@/utils/print.js\"\nimport common from \"@/utils/common.js\"\nimport tkiQrcode from '@/components/tki-qrcode/tki-qrcode.vue'\n\nimport loading from \"@/components/Loading/index.vue\"\nimport uniNavBar from '@/components/uni-nav-bar/uni-nav-bar.vue'\n\nlet that;\nlet id;\nexport default {\n\tcomponents: {\n\t\ttkiQrcode,\n\t\tloading,\n\t\tuniNavBar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: uni.getStorageSync(\"user\"),\n\t\t\tidentity: uni.getStorageSync(\"identity\"),\n\t\t\tothercurrent: '',\n\t\t\tbills: [],\n\t\t\tloading: true,\n\t\t\tproducts: null,\n\t\t\tdetail: null,\n\t\t\tmatters: [], //确认的物料\n\t\t\tall_money: 0,\n\t\t\treally_total_money: 0,\n\t\t\treal_money: 0,\n\t\t\tenterNum:0,//已经入库数\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tconsole.log(options)\n\t\tthat = this;\n\t\tid = options.id;\n\t\tif (that.user.rights && that.user.rights.othercurrent) {\n\t\t\tthat.othercurrent = that.user.rights.othercurrent\n\t\t}\n\n\t},\n\n\tonShow() {\n\t\tthat.getdetail(id);\n\t},\n\n\tmethods: {\n\n\t\t//点击显示操作菜单\n\t\tshow_options() {\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList: ['领料', '生产完成', '入库'],\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tlet tapIndex = res.tapIndex\n\t\t\t\t\tif (tapIndex == 0) {\n\t\t\t\t\t\tthat.confrimMatter()\n\t\t\t\t\t} else if (tapIndex == 1) {\n\t\t\t\t\t\tthat.confrimComplete()\n\t\t\t\t\t} else if (tapIndex == 2) {\n\t\t\t\t\t\tthat.confrimEnter()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: function(res) {\n\t\t\t\t\tconsole.log(res.errMsg);\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\n\t\t//确认入库\n\t\tconfrimEnter() {\n\t\t\tif (that.detail.status == false) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"未生产完成！\"\n\t\t\t\t})\n\t\t\t} else if (that.detail.matterStatus == false) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"未领料！\"\n\t\t\t\t})\n\t\t\t}  else if (that.enterNum == that.detail.real_num) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"已经全部入库了！\"\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tlet GoodIds = []\n\t\t\t\tfor (let item of that.detail.detail) {\n\t\t\t\t\tGoodIds.push(item.goodsId.objectId)\n\t\t\t\t}\n\t\t\t\tconst query = Bmob.Query(\"Goods\");\n\t\t\t\tquery.containedIn(\"objectId\", GoodIds);\n\t\t\t\tquery.find().then(res => {\n\n\t\t\t\t\tfor (let item of res) {\n\t\t\t\t\t\tfor (let good of that.detail.detail) {\n\t\t\t\t\t\t\tif (good.goodsId.objectId == item.objectId) {\n\t\t\t\t\t\t\t\tif(good.enterNum){\n\t\t\t\t\t\t\t\t\titem.num = good.num - good.enterNum;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\titem.num = good.num\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\titem.total_money = good.num * item.costPrice;\n\t\t\t\t\t\t\t\titem.really_total_money = good.num * item.costPrice;\n\t\t\t\t\t\t\t\titem.modify_retailPrice = item.costPrice;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tuni.setStorageSync(\"products\",res);\n\t\t\t\t\tuni.setStorageSync(\"detailBills\",that.detail.detail);\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl:'/pages/report/EnteringHistory/productDet/productEnter/productEnter?id='+id\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\t//确认生产完成\n\t\tconfrimComplete() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '是否确认生产完成',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tif (that.detail.status) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"已经生产完成！\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"生产中...\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\tquery.set('id', id) //需要修改的objectId\n\t\t\t\t\t\t\tquery.set('status', true)\n\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\tconst query = Bmob.Query('Bills');\n\t\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.detail.bills);\n\t\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"生产完成\"\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\tthat.getdetail(id);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\t\t//确认领料\n\t\tconfrimMatter() {\n\t\t\tif (that.detail.mattersId && that.detail.mattersId.length > 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '是否确认领料',\n\t\t\t\t\tcontent: '领料后不可修改',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tif (that.detail.matterStatus) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"已经领过物料！\"\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet billsObj = new Array();\n\t\t\t\t\t\t\t\tlet detailObj = [];\n\t\t\t\t\t\t\t\tlet uid = uni.getStorageSync('uid');\n\t\t\t\t\t\t\t\tlet total_num = 0;\n\t\t\t\t\t\t\t\tfor (let i = 0; i < that.matters.length; i++) {\n\t\t\t\t\t\t\t\t\tlet num = Number(that.matters[i].reserve) - that.matters[i].num;\n\t\t\t\t\t\t\t\t\ttotal_num += that.matters[i].num;\n\t\t\t\t\t\t\t\t\t//单据\n\t\t\t\t\t\t\t\t\tlet detailBills = {}\n\t\t\t\t\t\t\t\t\tlet tempBills = Bmob.Query('Bills');\n\n\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet user = pointer.set(uid)\n\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('Matters')\n\t\t\t\t\t\t\t\t\tlet tempGoods_id = pointer1.set(that.matters[i].objectId);\n\n\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\tlet pointer2 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID2 = pointer2.set(masterId);\n\n\t\t\t\t\t\t\t\t\ttempBills.set('goodsName', that.matters[i].goodsName);\n\t\t\t\t\t\t\t\t\ttempBills.set('retailPrice', (that.matters[i].modify_retailPrice).toString());\n\t\t\t\t\t\t\t\t\ttempBills.set('num', Number(that.matters[i].num));\n\t\t\t\t\t\t\t\t\ttempBills.set('total_money', that.matters[i].total_money);\n\t\t\t\t\t\t\t\t\ttempBills.set('really_total_money', that.matters[i].really_total_money);\n\t\t\t\t\t\t\t\t\ttempBills.set('mattersId', tempGoods_id);\n\t\t\t\t\t\t\t\t\ttempBills.set('userId', user);\n\t\t\t\t\t\t\t\t\ttempBills.set(\"opreater\", poiID2);\n\t\t\t\t\t\t\t\t\ttempBills.set('type', 6);\n\n\t\t\t\t\t\t\t\t\tlet goodsId = {}\n\t\t\t\t\t\t\t\t\tdetailBills.goodsName = that.matters[i].goodsName\n\t\t\t\t\t\t\t\t\tdetailBills.modify_retailPrice = (that.matters[i].modify_retailPrice).toString()\n\t\t\t\t\t\t\t\t\tdetailBills.retailPrice = that.matters[i].retailPrice\n\t\t\t\t\t\t\t\t\tdetailBills.total_money = that.matters[i].total_money\n\t\t\t\t\t\t\t\t\tgoodsId.costPrice = that.matters[i].costPrice\n\t\t\t\t\t\t\t\t\tgoodsId.retailPrice = that.matters[i].retailPrice\n\t\t\t\t\t\t\t\t\tgoodsId.objectId = that.matters[i].objectId\n\t\t\t\t\t\t\t\t\tgoodsId.reserve = num\n\t\t\t\t\t\t\t\t\tif (that.matters[i].selectd_model) {\n\t\t\t\t\t\t\t\t\t\tgoodsId.selected_model = that.matters[i].selected_model\n\t\t\t\t\t\t\t\t\t\tgoodsId.models = that.matters[i].models\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdetailBills.goodsId = goodsId\n\t\t\t\t\t\t\t\t\tdetailBills.num = that.matters[i].num\n\t\t\t\t\t\t\t\t\tdetailBills.type = 6\n\n\t\t\t\t\t\t\t\t\tbillsObj.push(tempBills)\n\t\t\t\t\t\t\t\t\tdetailObj.push(detailBills)\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t//插入单据\n\t\t\t\t\t\t\t\tBmob.Query('Bills').saveAll(billsObj).then(function(res) {\n\t\t\t\t\t\t\t\t\t//console.log(\"批量新增单据成功\", res);\n\t\t\t\t\t\t\t\t\tlet bills = []\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\t\t\t\t\t\tbills.push(res[i].success.objectId)\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID = pointer.set(uid);\n\n\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID1 = pointer1.set(masterId);\n\n\t\t\t\t\t\t\t\t\tlet query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t//query.set(\"relations\", relID);\n\t\t\t\t\t\t\t\t\tquery.set(\"detail\", detailObj);\n\t\t\t\t\t\t\t\t\tquery.set(\"real_num\", total_num);\n\t\t\t\t\t\t\t\t\tquery.set(\"type\", 6);\n\t\t\t\t\t\t\t\t\tquery.set(\"bills\", bills);\n\t\t\t\t\t\t\t\t\tquery.set(\"opreater\", poiID1);\n\t\t\t\t\t\t\t\t\tquery.set(\"master\", poiID);\n\t\t\t\t\t\t\t\t\tquery.set('goodsName', that.matters[0].goodsName);\n\n\t\t\t\t\t\t\t\t\tquery.set(\"all_money\", that.all_money);\n\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\tlet operationId = res.objectId\n\t\t\t\t\t\t\t\t\t\t//console.log(\"添加操作历史记录成功\", res);\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t\tquery.set('id', id) //需要修改的objectId\n\t\t\t\t\t\t\t\t\t\tquery.set('matterStatus', true)\n\t\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '领料成功',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//common.enterAddGoodNum(that.matters) //添加物料数量\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.outRedGoodNum(that.matters).then(result => { //添加物料数量\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommon.log(uni.getStorageSync(\"user\").nickName + \"确认领了'\" + that.matters[0].goodsName +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"'等\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.matters\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length + \"物料\", 6, operationId);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"is_option\", true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"out_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"category\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.getdetail(id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\tconsole.log('用户点击取消');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请先添加物料\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t},\n\n\t\t//出库时减少产品数量\n\t\toutRedGoodNum(products) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfor (let i = 0; i < products.length; i++) {\n\t\t\t\t\tlet num = 0;\n\t\t\t\t\tconst query = Bmob.Query('Matters');\n\t\t\t\t\tquery.get(products[i].objectId).then(res => {\n\t\t\t\t\t\t//console.log(res)\n\n\t\t\t\t\t\tnum = Number(products[i].reserve) - Number(products[i].num);\n\n\t\t\t\t\t\tres.set('reserve', num)\n\t\t\t\t\t\tres.set('stocktype', (num >= products[i].warning_num) ? 1 : 0)\n\t\t\t\t\t\tres.save()\n\n\t\t\t\t\t\tif (products[i].warning_num >= num) {\n\t\t\t\t\t\t\tcommon.log(products[i].goodsName + \"在生产时领了\" + products[i].num + \"件，已经低于预警数量\" + products[i].warning_num, -2,\n\t\t\t\t\t\t\t\tproducts[i].objectId);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (i == products.length - 1) {\n\t\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t//预览图片\n\t\tpriview(url) {\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: url,\n\t\t\t\turls: that.detail.Images,\n\t\t\t});\n\t\t},\n\n\t\tgetdetail: function(id) {\n\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\tquery.include(\"opreater\", \"custom\", \"producer\", \"stock\");\n\t\t\tquery.get(id).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.startDay) res.startDay = common.js_date_time(res.startDay)\n\t\t\t\tif (res.endDay) res.endDay = common.js_date_time(res.endDay)\n\t\t\t\tthat.detail = res;\n\t\t\t\tthat.products = res.detail;\n\t\t\t\tthat.bills = res.bills;\n\t\t\t\tif (res.mattersId && res.mattersId.length > 0) {\n\t\t\t\t\tthat.matters = res.mattersId\n\n\t\t\t\t\tfor (let i = 0; i < this.matters.length; i++) {\n\t\t\t\t\t\tthis.all_money = Number((this.matters[i].total_money + this.all_money).toFixed(2))\n\t\t\t\t\t\tthis.really_total_money = Number((this.matters[i].really_total_money + this.really_total_money).toFixed(2))\n\t\t\t\t\t\tthis.total_num += Number(this.matters[i].num)\n\t\t\t\t\t}\n\t\t\t\t\tthis.real_money = Number(this.all_money.toFixed(2))\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (let detail of res.detail) {\n\t\t\t\t\tif(detail.enterNum){\n\t\t\t\t\t\tthat.enterNum +=detail.enterNum\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthat.loading = false;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\t//二维码路径\n\t\tqrR(res) {\n\t\t\tthis.src = res\n\t\t},\n\n\t\tbcR(res) {\n\t\t\tthis.src = res\n\t\t},\n\n\t\tsaveBccode() {\n\t\t\tthis.$refs.barcode._saveCode()\n\t\t},\n\n\t\t//点击条形码保存\n\t\tsaveQrcode() {\n\t\t\tthis.$refs.qrcode._saveCode()\n\t\t},\n\n\t}\n}\n","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}