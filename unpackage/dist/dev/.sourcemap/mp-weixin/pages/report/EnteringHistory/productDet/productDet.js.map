{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/main.js","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?0f20","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?0bef","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?74da","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?3eb2","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?b374","webpack:///C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue?268f"],"names":["createPage","Page","that","id","components","tkiQrcode","loading","uniNavBar","data","user","uni","getStorageSync","identity","othercurrent","bills","products","detail","matters","all_money","really_total_money","real_money","enterNum","onLoad","options","console","log","rights","onShow","getdetail","methods","show_options","showActionSheet","itemList","success","res","tapIndex","confrimMatter","confrimComplete","confrimEnter","fail","errMsg","status","showToast","icon","title","matterStatus","real_num","GoodIds","item","push","goodsId","objectId","query","Bmob","Query","containedIn","find","then","good","num","total_money","costPrice","modify_retailPrice","setStorageSync","navigateTo","url","showModal","content","confirm","showLoading","set","save","todos","saveAll","mattersId","length","billsObj","Array","detailObj","uid","total_num","i","Number","reserve","detailBills","tempBills","pointer","Pointer","pointer1","tempGoods_id","masterId","pointer2","poiID2","goodsName","toString","retailPrice","selectd_model","selected_model","models","type","poiID","poiID1","operationId","hideLoading","duration","complete","outRedGoodNum","result","common","nickName","removeStorageSync","catch","err","cancel","Promise","resolve","reject","get","warning_num","priview","previewImage","current","urls","Images","include","startDay","js_date_time","endDay","toFixed","qrR","src","bcR","saveBccode","$refs","barcode","_saveCode","saveQrcode","qrcode"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,mI;AACAA,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AAC+M;AAC/M,gBAAgB,uNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC1Cf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAszB,CAAgB,s0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+H10B;AACA;AACA,uF,8FAjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"pages/report/EnteringHistory/productDet/productDet.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/report/EnteringHistory/productDet/productDet.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./productDet.vue?vue&type=template&id=11e3fcd8&\"\nvar renderjs\nimport script from \"./productDet.vue?vue&type=script&lang=js&\"\nexport * from \"./productDet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productDet.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('11e3fcd8')) {\n      api.createRecord('11e3fcd8', component.options)\n    } else {\n      api.reload('11e3fcd8', component.options)\n    }\n    module.hot.accept(\"./productDet.vue?vue&type=template&id=11e3fcd8&\", function () {\n      api.rerender('11e3fcd8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/testdd/kcb_all/pages/report/EnteringHistory/productDet/productDet.vue\"\nexport default component.exports","export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=template&id=11e3fcd8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\";\nimport print from \"@/utils/print.js\"\nimport common from \"@/utils/common.js\"\nimport tkiQrcode from '@/components/tki-qrcode/tki-qrcode.vue'\n\nimport loading from \"@/components/Loading/index.vue\"\nimport uniNavBar from '@/components/uni-nav-bar/uni-nav-bar.vue'\n\nlet that;\nlet id;\nexport default {\n\tcomponents: {\n\t\ttkiQrcode,\n\t\tloading,\n\t\tuniNavBar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: uni.getStorageSync(\"user\"),\n\t\t\tidentity: uni.getStorageSync(\"identity\"),\n\t\t\tothercurrent: '',\n\t\t\tbills: [],\n\t\t\tloading: true,\n\t\t\tproducts: null,\n\t\t\tdetail: null,\n\t\t\tmatters: [], //确认的物料\n\t\t\tall_money: 0,\n\t\t\treally_total_money: 0,\n\t\t\treal_money: 0,\n\t\t\tenterNum:0,//已经入库数\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tconsole.log(options)\n\t\tthat = this;\n\t\tid = options.id;\n\t\tif (that.user.rights && that.user.rights.othercurrent) {\n\t\t\tthat.othercurrent = that.user.rights.othercurrent\n\t\t}\n\n\t},\n\n\tonShow() {\n\t\tthat.getdetail(id);\n\t},\n\n\tmethods: {\n\n\t\t//点击显示操作菜单\n\t\tshow_options() {\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList: ['领料', '生产完成', '入库'],\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tlet tapIndex = res.tapIndex\n\t\t\t\t\tif (tapIndex == 0) {\n\t\t\t\t\t\tthat.confrimMatter()\n\t\t\t\t\t} else if (tapIndex == 1) {\n\t\t\t\t\t\tthat.confrimComplete()\n\t\t\t\t\t} else if (tapIndex == 2) {\n\t\t\t\t\t\tthat.confrimEnter()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: function(res) {\n\t\t\t\t\tconsole.log(res.errMsg);\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\n\t\t//确认入库\n\t\tconfrimEnter() {\n\t\t\tif (that.detail.status == false) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"未生产完成！\"\n\t\t\t\t})\n\t\t\t} else if (that.detail.matterStatus == false) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"未领料！\"\n\t\t\t\t})\n\t\t\t}  else if (that.enterNum == that.detail.real_num) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\ttitle: \"已经全部入库了！\"\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tlet GoodIds = []\n\t\t\t\tfor (let item of that.detail.detail) {\n\t\t\t\t\tGoodIds.push(item.goodsId.objectId)\n\t\t\t\t}\n\t\t\t\tconst query = Bmob.Query(\"NGoods\");\n\t\t\t\tquery.containedIn(\"objectId\", GoodIds);\n\t\t\t\tquery.find().then(res => {\n\n\t\t\t\t\tfor (let item of res) {\n\t\t\t\t\t\tfor (let good of that.detail.detail) {\n\t\t\t\t\t\t\tif (good.goodsId.objectId == item.objectId) {\n\t\t\t\t\t\t\t\tif(good.enterNum){\n\t\t\t\t\t\t\t\t\titem.num = good.num - good.enterNum;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\titem.num = good.num\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\titem.total_money = good.num * item.costPrice;\n\t\t\t\t\t\t\t\titem.really_total_money = good.num * item.costPrice;\n\t\t\t\t\t\t\t\titem.modify_retailPrice = item.costPrice;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tuni.setStorageSync(\"products\",res);\n\t\t\t\t\tuni.setStorageSync(\"detailBills\",that.detail.detail);\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl:'/pages/report/EnteringHistory/productDet/productEnter/productEnter?id='+id\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\t//确认生产完成\n\t\tconfrimComplete() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '是否确认生产完成',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tif (that.detail.status) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"已经生产完成！\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"生产中...\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\tquery.set('id', id) //需要修改的objectId\n\t\t\t\t\t\t\tquery.set('status', true)\n\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\tconst query = Bmob.Query('NBills');\n\t\t\t\t\t\t\t\tquery.containedIn(\"objectId\", that.detail.bills);\n\t\t\t\t\t\t\t\tquery.find().then(todos => {\n\t\t\t\t\t\t\t\t\ttodos.set('status', true);\n\t\t\t\t\t\t\t\t\ttodos.saveAll().then(res => {\n\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"生产完成\"\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\tthat.getdetail(id);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\t\t//确认领料\n\t\tconfrimMatter() {\n\t\t\tif (that.detail.mattersId && that.detail.mattersId.length > 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '是否确认领料',\n\t\t\t\t\tcontent: '领料后不可修改',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tif (that.detail.matterStatus) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"已经领过物料！\"\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet billsObj = new Array();\n\t\t\t\t\t\t\t\tlet detailObj = [];\n\t\t\t\t\t\t\t\tlet uid = uni.getStorageSync('uid');\n\t\t\t\t\t\t\t\tlet total_num = 0;\n\t\t\t\t\t\t\t\tfor (let i = 0; i < that.matters.length; i++) {\n\t\t\t\t\t\t\t\t\tlet num = Number(that.matters[i].reserve) - that.matters[i].num;\n\t\t\t\t\t\t\t\t\ttotal_num += that.matters[i].num;\n\t\t\t\t\t\t\t\t\t//单据\n\t\t\t\t\t\t\t\t\tlet detailBills = {}\n\t\t\t\t\t\t\t\t\tlet tempBills = Bmob.Query('NBills');\n\n\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet user = pointer.set(uid)\n\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('Matters')\n\t\t\t\t\t\t\t\t\tlet tempGoods_id = pointer1.set(that.matters[i].objectId);\n\n\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\tlet pointer2 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID2 = pointer2.set(masterId);\n\n\t\t\t\t\t\t\t\t\ttempBills.set('goodsName', that.matters[i].goodsName);\n\t\t\t\t\t\t\t\t\ttempBills.set('retailPrice', (that.matters[i].modify_retailPrice).toString());\n\t\t\t\t\t\t\t\t\ttempBills.set('num', Number(that.matters[i].num));\n\t\t\t\t\t\t\t\t\ttempBills.set('total_money', that.matters[i].total_money);\n\t\t\t\t\t\t\t\t\ttempBills.set('really_total_money', that.matters[i].really_total_money);\n\t\t\t\t\t\t\t\t\ttempBills.set('mattersId', tempGoods_id);\n\t\t\t\t\t\t\t\t\ttempBills.set('userId', user);\n\t\t\t\t\t\t\t\t\ttempBills.set(\"opreater\", poiID2);\n\t\t\t\t\t\t\t\t\ttempBills.set('type', 6);\n\n\t\t\t\t\t\t\t\t\tlet goodsId = {}\n\t\t\t\t\t\t\t\t\tdetailBills.goodsName = that.matters[i].goodsName\n\t\t\t\t\t\t\t\t\tdetailBills.modify_retailPrice = (that.matters[i].modify_retailPrice).toString()\n\t\t\t\t\t\t\t\t\tdetailBills.retailPrice = that.matters[i].retailPrice\n\t\t\t\t\t\t\t\t\tdetailBills.total_money = that.matters[i].total_money\n\t\t\t\t\t\t\t\t\tgoodsId.costPrice = that.matters[i].costPrice\n\t\t\t\t\t\t\t\t\tgoodsId.retailPrice = that.matters[i].retailPrice\n\t\t\t\t\t\t\t\t\tgoodsId.objectId = that.matters[i].objectId\n\t\t\t\t\t\t\t\t\tgoodsId.reserve = num\n\t\t\t\t\t\t\t\t\tif (that.matters[i].selectd_model) {\n\t\t\t\t\t\t\t\t\t\tgoodsId.selected_model = that.matters[i].selected_model\n\t\t\t\t\t\t\t\t\t\tgoodsId.models = that.matters[i].models\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdetailBills.goodsId = goodsId\n\t\t\t\t\t\t\t\t\tdetailBills.num = that.matters[i].num\n\t\t\t\t\t\t\t\t\tdetailBills.type = 6\n\n\t\t\t\t\t\t\t\t\tbillsObj.push(tempBills)\n\t\t\t\t\t\t\t\t\tdetailObj.push(detailBills)\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t//插入单据\n\t\t\t\t\t\t\t\tBmob.Query('NBills').saveAll(billsObj).then(function(res) {\n\t\t\t\t\t\t\t\t\t//console.log(\"批量新增单据成功\", res);\n\t\t\t\t\t\t\t\t\tlet bills = []\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\t\t\t\t\t\tbills.push(res[i].success.objectId)\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet pointer = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID = pointer.set(uid);\n\n\t\t\t\t\t\t\t\t\tlet masterId = uni.getStorageSync(\"masterId\");\n\t\t\t\t\t\t\t\t\tlet pointer1 = Bmob.Pointer('_User')\n\t\t\t\t\t\t\t\t\tlet poiID1 = pointer1.set(masterId);\n\n\t\t\t\t\t\t\t\t\tlet query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t//query.set(\"relations\", relID);\n\t\t\t\t\t\t\t\t\tquery.set(\"detail\", detailObj);\n\t\t\t\t\t\t\t\t\tquery.set(\"real_num\", total_num);\n\t\t\t\t\t\t\t\t\tquery.set(\"type\", 6);\n\t\t\t\t\t\t\t\t\tquery.set(\"bills\", bills);\n\t\t\t\t\t\t\t\t\tquery.set(\"opreater\", poiID1);\n\t\t\t\t\t\t\t\t\tquery.set(\"master\", poiID);\n\t\t\t\t\t\t\t\t\tquery.set('goodsName', that.matters[0].goodsName);\n\n\t\t\t\t\t\t\t\t\tquery.set(\"all_money\", that.all_money);\n\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\tlet operationId = res.objectId\n\t\t\t\t\t\t\t\t\t\t//console.log(\"添加操作历史记录成功\", res);\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\t\t\t\t\t\t\t\tquery.set('id', id) //需要修改的objectId\n\t\t\t\t\t\t\t\t\t\tquery.set('matterStatus', true)\n\t\t\t\t\t\t\t\t\t\tquery.save().then(res => {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '领料成功',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//common.enterAddGoodNum(that.matters) //添加物料数量\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.outRedGoodNum(that.matters).then(result => { //添加物料数量\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommon.log(uni.getStorageSync(\"user\").nickName + \"确认领了'\" + that.matters[0].goodsName +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"'等\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.matters\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length + \"物料\", 6, operationId);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"is_option\", true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"out_warehouse\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"category\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"warehouse\")\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.getdetail(id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\tconsole.log('用户点击取消');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请先添加物料\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t},\n\n\t\t//出库时减少产品数量\n\t\toutRedGoodNum(products) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfor (let i = 0; i < products.length; i++) {\n\t\t\t\t\tlet num = 0;\n\t\t\t\t\tconst query = Bmob.Query('Matters');\n\t\t\t\t\tquery.get(products[i].objectId).then(res => {\n\t\t\t\t\t\t//console.log(res)\n\n\t\t\t\t\t\tnum = Number(products[i].reserve) - Number(products[i].num);\n\n\t\t\t\t\t\tres.set('reserve', num)\n\t\t\t\t\t\tres.set('stocktype', (num >= products[i].warning_num) ? 1 : 0)\n\t\t\t\t\t\tres.save()\n\n\t\t\t\t\t\tif (products[i].warning_num >= num) {\n\t\t\t\t\t\t\tcommon.log(products[i].goodsName + \"在生产时领了\" + products[i].num + \"件，已经低于预警数量\" + products[i].warning_num, -2,\n\t\t\t\t\t\t\t\tproducts[i].objectId);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (i == products.length - 1) {\n\t\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t//预览图片\n\t\tpriview(url) {\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: url,\n\t\t\t\turls: that.detail.Images,\n\t\t\t});\n\t\t},\n\n\t\tgetdetail: function(id) {\n\t\t\tconst query = Bmob.Query('order_opreations');\n\t\t\tquery.include(\"opreater\", \"custom\", \"producer\", \"stock\");\n\t\t\tquery.get(id).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.startDay) res.startDay = common.js_date_time(res.startDay)\n\t\t\t\tif (res.endDay) res.endDay = common.js_date_time(res.endDay)\n\t\t\t\tthat.detail = res;\n\t\t\t\tthat.products = res.detail;\n\t\t\t\tthat.bills = res.bills;\n\t\t\t\tif (res.mattersId && res.mattersId.length > 0) {\n\t\t\t\t\tthat.matters = res.mattersId\n\n\t\t\t\t\tfor (let i = 0; i < this.matters.length; i++) {\n\t\t\t\t\t\tthis.all_money = Number((this.matters[i].total_money + this.all_money).toFixed(2))\n\t\t\t\t\t\tthis.really_total_money = Number((this.matters[i].really_total_money + this.really_total_money).toFixed(2))\n\t\t\t\t\t\tthis.total_num += Number(this.matters[i].num)\n\t\t\t\t\t}\n\t\t\t\t\tthis.real_money = Number(this.all_money.toFixed(2))\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (let detail of res.detail) {\n\t\t\t\t\tif(detail.enterNum){\n\t\t\t\t\t\tthat.enterNum +=detail.enterNum\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthat.loading = false;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\t//二维码路径\n\t\tqrR(res) {\n\t\t\tthis.src = res\n\t\t},\n\n\t\tbcR(res) {\n\t\t\tthis.src = res\n\t\t},\n\n\t\tsaveBccode() {\n\t\t\tthis.$refs.barcode._saveCode()\n\t\t},\n\n\t\t//点击条形码保存\n\t\tsaveQrcode() {\n\t\t\tthis.$refs.qrcode._saveCode()\n\t\t},\n\n\t}\n}\n","import mod from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./productDet.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}