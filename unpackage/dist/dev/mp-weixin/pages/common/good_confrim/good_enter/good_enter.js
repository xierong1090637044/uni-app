(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/common/good_confrim/good_enter/good_enter"],{92:
/*!***********************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/main.js?{"page":"pages%2Fcommon%2Fgood_confrim%2Fgood_enter%2Fgood_enter"} ***!
  \***********************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){o(/*! uni-pages */4),o(/*! @dcloudio/uni-stat */5);t(o(/*! vue */2));function t(e){return e&&e.__esModule?e:{default:e}}e(t(o(/*! ./pages/common/good_confrim/good_enter/good_enter.vue */93)).default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},93:
/*!************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue ***!
  \************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! ./good_enter.vue?vue&type=template&id=6e98c7d2& */94),s=o(/*! ./good_enter.vue?vue&type=script&lang=js& */96);for(var n in s)"default"!==n&&function(e){o.d(t,e,function(){return s[e]})}(n);o(/*! ./good_enter.vue?vue&type=style&index=0&lang=css& */98);var a=o(/*! ../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */70),u=Object(a.default)(s.default,r.render,r.staticRenderFns,!1,null,null,null);u.options.__file="Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue",t.default=u.exports},94:
/*!*******************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=template&id=6e98c7d2& ***!
  \*******************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./good_enter.vue?vue&type=template&id=6e98c7d2& */95);o.d(t,"render",function(){return r.render}),o.d(t,"staticRenderFns",function(){return r.staticRenderFns})},95:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=template&id=6e98c7d2& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,o){"use strict";o.r(t),o.d(t,"render",function(){return r}),o.d(t,"staticRenderFns",function(){return s});var r=function(){var e=this.$createElement,t=(this._self._c,this.othercurrent.indexOf("1"));this.$mp.data=Object.assign({},{$root:{g0:t}})},s=[];r._withStripped=!0},96:
/*!*************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./good_enter.vue?vue&type=script&lang=js& */97),s=o.n(r);for(var n in r)"default"!==n&&function(e){o.d(t,e,function(){return r[e]})}(n);t.default=s.a},97:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s,n,a=d(o(/*! hydrogen-js-sdk */13)),u=d(o(/*! @/utils/common.js */77)),i=(d(o(/*! @/utils/goods.js */89)),d(o(/*! @/utils/send_temp.js */87))),c=d(o(/*! @/utils/print.js */88));function d(e){return e&&e.__esModule?e:{default:e}}var l={data:function(){return{user:e.getStorageSync("user"),identity:e.getStorageSync("identity"),othercurrent:"",Images:[],stock:"",shop_name:"",products:null,button_disabled:!1,beizhu_text:"",real_money:0,all_money:0,really_total_money:0,total_num:0,nowDay:u.default.getDay(0,!0,!0)}},onLoad:function(){s=this,r=e.getStorageSync("uid"),this.products=e.getStorageSync("products");for(var t=0;t<this.products.length;t++)this.all_money=Number((this.products[t].total_money+this.all_money).toFixed(2)),this.really_total_money=Number((this.products[t].really_total_money+this.really_total_money).toFixed(2)),this.total_num+=Number(this.products[t].num);this.real_money=Number(this.all_money.toFixed(2)),s.user.rights&&s.user.rights.othercurrent&&(s.othercurrent=s.user.rights.othercurrent)},onShow:function(){if(s.producer=e.getStorageSync("producer"),n=e.getStorageSync("shop")){s.shop_name=n.name;var t=a.default.Pointer("shops");t.set(n.objectId)}s.stock=e.getStorageSync("warehouse")?e.getStorageSync("warehouse")[0].stock:""},methods:{bindDateChange:function(e){s.nowDay=e.detail.value+" 00:00:00"},removeImg:function(e){s.Images.splice(e,1),s.Images=s.Images},upload_image:function(){s.user.is_vip?e.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){var t,o=Date.parse(new Date),r=e.tempFilePaths,n=!0,u=!1,i=void 0;try{for(var c,d=r[Symbol.iterator]();!(n=(c=d.next()).done);n=!0){var l=c.value;t=a.default.File(o+".jpg",l)}}catch(e){u=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(u)throw i}}t.save().then(function(e){var t=!0,o=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var u=n.value;s.Images.push(u.url)}}catch(e){o=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw r}}})}}):e.showToast({title:"您还不是会员，无法使用",icon:"none"})},formSubmit:function(t){e.getStorageSync("identity");this.button_disabled=!0;var o=t.detail.formId;if(e.showLoading({title:"上传中..."}),""==e.getStorageSync("warehouse")||null==e.getStorageSync("warehouse"))return e.showToast({icon:"none",title:"请选择仓库"}),void(this.button_disabled=!1);for(var n=new Array,d=[],l=0;l<this.products.length;l++){var m=Number(this.products[l].reserve)+this.products[l].num,f={},h=a.default.Query("NBills"),g=a.default.Pointer("_User").set(r),y=a.default.Pointer("NGoods").set(this.products[l].objectId),_=e.getStorageSync("masterId"),p=a.default.Pointer("_User").set(_);h.set("goodsName",this.products[l].goodsName),h.set("retailPrice",Number(this.products[l].modify_retailPrice)),h.set("num",Number(this.products[l].num)),h.set("total_money",Number(this.products[l].total_money)),h.set("really_total_money",Number(this.products[l].really_total_money)),h.set("goodsId",y),h.set("userId",g),h.set("opreater",p),h.set("type",1),h.set("extra_type",2),h.set("status",!0),h.set("createdTime",{__type:"Date",iso:s.nowDay});var v={};if(s.stock&&s.stock.objectId){var S=a.default.Pointer("stocks").set(s.stock.objectId);h.set("stock",S),f.stock=s.stock.stock_name}f.goodsName=this.products[l].goodsName,f.modify_retailPrice=this.products[l].modify_retailPrice.toString(),f.retailPrice=this.products[l].retailPrice,f.total_money=this.products[l].total_money,v.costPrice=this.products[l].costPrice,v.retailPrice=this.products[l].retailPrice,v.objectId=this.products[l].objectId,v.reserve=m,this.products[l].selectd_model&&(v.selected_model=this.products[l].selected_model,v.models=this.products[l].models),f.goodsId=v,f.num=this.products[l].num,f.type=1,n.push(h),d.push(f)}a.default.Query("NBills").saveAll(n).then(function(n){for(var l=[],m=0;m<n.length;m++)l.push(n[m].success.objectId);var f=a.default.Pointer("_User").set(r),h=e.getStorageSync("masterId"),g=a.default.Pointer("_User").set(h),y=a.default.Query("order_opreations");if(y.set("beizhu",t.detail.value.input_beizhu),y.set("detail",d),y.set("real_num",s.total_num),y.set("type",1),y.set("extra_type",2),y.set("bills",l),y.set("opreater",g),y.set("master",f),s.stock&&s.stock.objectId){var _=a.default.Pointer("stocks").set(s.stock.objectId);y.set("stock",_)}y.set("goodsName",s.products[0].goodsName),y.set("real_money",Number(s.real_money)),y.set("all_money",s.all_money),y.set("Images",s.Images),y.set("status",!0),y.set("createdTime",{__type:"Date",iso:s.nowDay}),y.save().then(function(r){var n=r.objectId;e.hideLoading(),e.showToast({title:"产品入库成功",icon:"success",duration:1e3,complete:function(){u.default.enterAddGoodNum(s.products).then(function(a){setTimeout(function(){u.default.log(e.getStorageSync("user").nickName+"入库了'"+s.products[0].goodsName+"'等"+s.products.length+"商品",1,n);var a={frist:e.getStorageSync("user").nickName+"入库了'"+s.products[0].goodsName+"'等"+s.products.length+"商品",data1:r.createdAt,data2:s.stock?s.stock.stock_name:"未填写",remark:t.detail.value.input_beizhu?t.detail.value.input_beizhu:"未填写",url:"https://www.jimuzhou.com/h5/pages/report/EnteringHistory/detail/detail?id="+n};i.default.send_in(a);var d={keyword1:{value:s.products[0].goodsName+"'等",color:"#173177"},keyword2:{value:t.detail.value.input_beizhu?t.detail.value.input_beizhu:"未填写"},keyword3:{value:r.createdAt},keyword4:{value:e.getStorageSync("user").nickName}};d.form_Id=o,d.id=n,i.default.send_in_mini(d),e.getStorageSync("setting").auto_print&&c.default.autoPrint(n),s.button_disabled=!1,e.setStorageSync("is_option",!0),e.removeStorageSync("_warehouse"),e.removeStorageSync("out_warehouse"),e.removeStorageSync("category"),e.removeStorageSync("warehouse"),e.navigateBack({delta:2})},500)})}})})},function(e){console.log("异常处理")})}}};t.default=l}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},98:
/*!*********************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=style&index=0&lang=css& ***!
  \*********************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./good_enter.vue?vue&type=style&index=0&lang=css& */99),s=o.n(r);for(var n in r)"default"!==n&&function(e){o.d(t,e,function(){return r[e]})}(n);t.default=s.a},99:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/kcbThou/pages/common/good_confrim/good_enter/good_enter.vue?vue&type=style&index=0&lang=css& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){}},[[92,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/common/good_confrim/good_enter/good_enter.js.map