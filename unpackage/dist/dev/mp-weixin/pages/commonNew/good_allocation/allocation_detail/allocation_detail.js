(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commonNew/good_allocation/allocation_detail/allocation_detail"],{519:
/*!******************************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/main.js?{"page":"pages%2FcommonNew%2Fgood_allocation%2Fallocation_detail%2Fallocation_detail"} ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){o(/*! uni-pages */4),o(/*! @dcloudio/uni-stat */5);r(o(/*! vue */2));var t=r(o(/*! ./pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue */520));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},520:
/*!*******************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue ***!
  \*******************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! ./allocation_detail.vue?vue&type=template&id=7dfa52ed& */521),n=o(/*! ./allocation_detail.vue?vue&type=script&lang=js& */523);for(var s in n)"default"!==s&&function(e){o.d(t,e,(function(){return n[e]}))}(s);o(/*! ./allocation_detail.vue?vue&type=style&index=0&lang=css& */525);var u,c=o(/*! ../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */70),a=Object(c["default"])(n["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],u);a.options.__file="Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue",t["default"]=a.exports},521:
/*!**************************************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=template&id=7dfa52ed& ***!
  \**************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allocation_detail.vue?vue&type=template&id=7dfa52ed& */522);o.d(t,"render",(function(){return r["render"]})),o.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),o.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),o.d(t,"components",(function(){return r["components"]}))},522:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=template&id=7dfa52ed& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";var r;o.r(t),o.d(t,"render",(function(){return n})),o.d(t,"staticRenderFns",(function(){return u})),o.d(t,"recyclableRender",(function(){return s})),o.d(t,"components",(function(){return r}));var n=function(){var e=this,t=e.$createElement,o=(e._self._c,e.nowDay.split(" "));e.$mp.data=Object.assign({},{$root:{g0:o}})},s=!1,u=[];n._withStripped=!0},523:
/*!********************************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allocation_detail.vue?vue&type=script&lang=js& */524),n=o.n(r);for(var s in r)"default"!==s&&function(e){o.d(t,e,(function(){return r[e]}))}(s);t["default"]=n.a},524:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,s=c(o(/*! hydrogen-js-sdk */13)),u=c(o(/*! @/utils/common.js */77));c(o(/*! @/utils/send_temp.js */225)),c(o(/*! @/utils/print.js */151)),c(o(/*! @/utils/goods.js */224));function c(e){return e&&e.__esModule?e:{default:e}}var a={data:function(){return{products:[],in_stock:"",out_stock:"",button_disabled:!1,beizhu_text:"",out_products:[],all_money:0,real_money:0,total_num:0,nowDay:u.default.getDay(0,!0,!0)}},onLoad:function(){n=this,r=e.getStorageSync("uid"),this.products=e.getStorageSync("products");for(var t=0;t<this.products.length;t++)this.all_money=Number((this.products[t].total_money+this.all_money).toFixed(2)),this.total_num+=Number(this.products[t].num);this.real_money=Number(this.all_money.toFixed(2))},onShow:function(){n.in_stock=e.getStorageSync("in_warehouse")?e.getStorageSync("in_warehouse")[0].stock:"",n.out_stock=e.getStorageSync("out_warehouse")?e.getStorageSync("out_warehouse")[0].stock:""},methods:{showHideFunction:function(){n.button_disabled=!1,e.hideLoading(),e.setStorageSync("is_option",!0),e.removeStorageSync("warehouse"),e.removeStorageSync("_warehouse"),e.removeStorageSync("out_warehouse"),e.removeStorageSync("category"),e.removeStorageSync("warehouse"),e.showToast({title:"调拨成功"}),setTimeout((function(){e.navigateBack({delta:2})}),500)},formSubmit:function(t){if(this.button_disabled=!0,""==n.out_stock||null==n.out_stock)return e.showToast({title:"请选择调入仓库",icon:"none"}),void(this.button_disabled=!1);n.addTbRecord(t)},addTbRecord:function(t){e.showLoading({title:"请勿退出..."});for(var o=s.default.Pointer("stocks"),c=s.default.Pointer("stocks"),a=c.set(n.out_stock.objectId),d=o.set(n.in_stock.objectId),l=new Array,i=[],f=0;f<n.products.length;f++){var m=s.default.Query("Bills"),h={},_=s.default.Pointer("_User"),v=_.set(r),p=s.default.Pointer("_User"),y=p.set(e.getStorageSync("masterId")),b=s.default.Pointer("Goods"),g=b.set(this.products[f].objectId);m.set("goodsName",this.products[f].goodsName),m.set("retailPrice",this.products[f].modify_retailPrice),m.set("num",Number(this.products[f].num)),m.set("total_money",Number(this.products[f].total_money)),m.set("goodsId",g),m.set("userId",v),m.set("type",-2),m.set("opreater",y),m.set("stock",d),m.set("out_stock",a);var S={};h.goodsName=this.products[f].goodsName,h.stock=n.in_stock.stock_name,h.out_stock=n.out_stock.stock_name,h.reserve=this.products[f].reserve,S.objectId=this.products[f].objectId,this.products[f].selectd_model&&(S.selected_model=this.products[f].selected_model,S.models=this.products[f].models),h.goodsId=S,h.num=Number(this.products[f].num),h.type=-2,l.push(m),i.push(h)}s.default.Query("Bills").saveAll(l).then((function(o){for(var c=[],l=0;l<o.length;l++)c.push(o[l].success.objectId);var f=s.default.Pointer("_User"),m=f.set(r),h=e.getStorageSync("masterId"),_=s.default.Pointer("_User"),v=_.set(h),p=s.default.Query("order_opreations");p.set("detail",i),p.set("bills",c),p.set("beizhu",t.detail.value.input_beizhu),p.set("type",-2),p.set("opreater",v),p.set("stock",d),p.set("out_stock",a),p.set("master",m),p.set("goodsName",n.products[0].goodsName),p.save().then((function(e){e.objectId;for(var t=function(e){var t=s.default.Query("Goods");t.equalTo("header","==",n.products[e].objectId),t.equalTo("userId","==",r),t.equalTo("stocks","==",n.out_stock.objectId),t.find().then((function(o){var s,c=o;if(0==c.length)u.default.upload_good_withNoCan(n.products[e],n.out_stock,Number(n.products[e].num),"allocation").then((function(o){t.equalTo("header","==",n.products[e].objectId),t.equalTo("userId","==",r),t.equalTo("stocks","==",n.in_stock.objectId),t.find().then((function(o){if(s=o,0==s.length)u.default.upload_good_withNoCan(n.products[e],n.in_stock,0-Number(n.products[e].num),"allocation").then((function(t){e==n.products.length-1&&n.showHideFunction()}));else{if(n.products[e].selected_model){var r=!0,c=!1,a=void 0;try{for(var d,l=n.products[e].selectd_model[Symbol.iterator]();!(r=(d=l.next()).done);r=!0){var i=d.value,f=!0,m=!1,h=void 0;try{for(var _,v=s[0].models[Symbol.iterator]();!(f=(_=v.next()).done);f=!0){var p=_.value;p.id==i.id&&(p.reserve=Number(p.reserve)-Number(i.num)),delete p.num}}catch(y){m=!0,h=y}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}}}catch(y){c=!0,a=y}finally{try{r||null==l.return||l.return()}finally{if(c)throw a}}t.set("models",s[0].models)}t.set("reserve",Number(s[0].reserve)-Number(n.products[e].num)),t.set("id",s[0].objectId),t.save().then((function(t){e==n.products.length-1&&n.showHideFunction()})).catch((function(e){console.log(e)}))}}))}));else{if(n.products[e].selected_model){var a=!0,d=!1,l=void 0;try{for(var i,f=n.products[e].selectd_model[Symbol.iterator]();!(a=(i=f.next()).done);a=!0){var m=i.value,h=!0,_=!1,v=void 0;try{for(var p,y=c[0].models[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var b=p.value;b.id==m.id&&(b.reserve=Number(b.reserve)+Number(m.num)),delete b.num}}catch(g){_=!0,v=g}finally{try{h||null==y.return||y.return()}finally{if(_)throw v}}}}catch(g){d=!0,l=g}finally{try{a||null==f.return||f.return()}finally{if(d)throw l}}t.set("models",c[0].models)}t.set("reserve",Number(c[0].reserve)+Number(n.products[e].num)),t.set("id",c[0].objectId),t.save().then((function(o){t.equalTo("header","==",n.products[e].objectId),t.equalTo("userId","==",r),t.equalTo("stocks","==",n.in_stock.objectId),t.find().then((function(o){if(s=o,0==s.length)u.default.upload_good_withNoCan(n.products[e],n.in_stock,Number(n.products[e].num),"allocation").then((function(t){e==n.products.length-1&&n.showHideFunction()}));else{if(n.products[e].selected_model){var r=!0,c=!1,a=void 0;try{for(var d,l=n.products[e].selectd_model[Symbol.iterator]();!(r=(d=l.next()).done);r=!0){var i=d.value,f=!0,m=!1,h=void 0;try{for(var _,v=s[0].models[Symbol.iterator]();!(f=(_=v.next()).done);f=!0){var p=_.value;p.id==i.id&&(p.reserve=Number(p.reserve)-Number(i.num)),delete p.num}}catch(g){m=!0,h=g}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}}}catch(g){c=!0,a=g}finally{try{r||null==l.return||l.return()}finally{if(c)throw a}}t.set("models",s[0].models)}t.set("reserve",Number(s[0].reserve)-Number(n.products[e].num)),t.set("id",s[0].objectId),t.save().then((function(t){e==n.products.length-1&&n.showHideFunction()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)}))}}))},o=0;o<n.products.length;o++)t(o)}))}),(function(e){console.log("异常处理")}))}}};t.default=a}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},525:
/*!****************************************************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=style&index=0&lang=css& ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var r=o(/*! -!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allocation_detail.vue?vue&type=style&index=0&lang=css& */526),n=o.n(r);for(var s in r)"default"!==s&&function(e){o.d(t,e,(function(){return r[e]}))}(s);t["default"]=n.a},526:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/新建文件夹 (8)/wechat/pages/commonNew/good_allocation/allocation_detail/allocation_detail.vue?vue&type=style&index=0&lang=css& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){}},[[519,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/commonNew/good_allocation/allocation_detail/allocation_detail.js.map