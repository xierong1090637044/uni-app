<view style="height:100vh;background:#fff;"><uni-nav-bar vue-id="10b3b94c-1" fixed="{{false}}" color="#333333" background-color="#FFFFFF" right-text="确定" data-event-opts="{{[['^clickRight',[['confrim_this']]]]}}" bind:clickRight="__e" bind:__l="__l"></uni-nav-bar><view data-event-opts="{{[['tap',[['openPopup',['$event']]]]]}}" class="display_flex_bet" style="width:calc(90% - 60rpx);padding:20rpx 30rpx;background:#F7F7F7;margin:30rpx 5%;" bindtap="__e"><view>当前扫码选中产品</view><view class="display_flex"><view style="color:#f30;font-weight:bold;margin-right:10rpx;">{{products.length}}</view><fa-icon vue-id="10b3b94c-2" type="angle-right" size="18" color="#999" bind:__l="__l"></fa-icon></view></view><camera style="width:380rpx;height:380rpx;margin:0 auto;" device-position="back" flash="off" binderror="error" mode="scanCode" data-event-opts="{{[['scancode',[['scanCode',['$event']]]]]}}" bindscancode="__e"></camera><uni-popup-new class="vue-ref" vue-id="10b3b94c-3" type="bottom" data-ref="popup" bind:__l="__l" vue-slots="{{['default']}}"><view style="background:#fff;border-top-left-radius:40rpx;border-top-right-radius:40rpx;"><view style="padding:20rpx 30rpx;border-bottom:1rpx solid#ddd;">扫码选中的产品</view><scroll-view style="height:75vh;" scroll-y="true"><block wx:for="{{products}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="margin-b-10"><unicard vue-id="{{('10b3b94c-4-'+index)+','+('10b3b94c-3')}}" title="{{'品名：'+item.goodsName}}" bind:__l="__l" vue-slots="{{['default']}}"><view><view class="display_flex_bet" style="margin-bottom:10rpx;"><view>{{"库存："+item.reserve}}</view><block wx:if="{{type=='销售'||type=='销售退货'}}"><view style="color:#f30;">{{"零售价："+item.retailPrice+"(元)"}}</view></block><block wx:else><block wx:if="{{type=='采购'||type=='采购退货'}}"><view style="color:#f30;">{{"进货价："+item.costPrice+"(元)"}}</view></block></block></view><block wx:if="{{type=='销售'||type=='销售退货'}}"><view class="display_flex_bet" style="margin-bottom:10rpx;"><view class="input_withlabel"><view>实际零售价<text style="font-size:24rpx;color:#999;">(可修改)</text>：</view><view><input class="input_label" placeholder="{{item.retailPrice}}" type="digit" data-event-opts="{{[['input',[['getrealprice',['$event',index]]]]]}}" bindinput="__e"/></view></view></view></block><block wx:if="{{type=='采购'||type=='采购退货'}}"><view class="display_flex_bet" style="margin-bottom:10rpx;"><view class="input_withlabel"><view>实际进货价<text style="font-size:24rpx;color:#999;">(可修改)</text>：</view><view><input class="input_label" placeholder="{{item.costPrice}}" type="digit" data-event-opts="{{[['input',[['getrealprice',['$event',index]]]]]}}" bindinput="__e"/></view></view></view></block><block wx:if="{{item.selectd_model}}"><view><block wx:for="{{item.selectd_model}}" wx:for-item="model" wx:for-index="key" wx:key="key"><view class="margin-t-5" style="margin-bottom:10rpx;"><text style="color:#f30;">{{model.custom1.value+model.custom2.value+model.custom3.value+model.custom4.value}}</text><text>数量：</text><uninumberbox vue-id="{{('10b3b94c-5-'+index+'-'+key)+','+('10b3b94c-4-'+index)}}" min="{{0}}" value="{{key==0?1:0}}" data-event-opts="{{[['^change',[['handleModelNumChange',['$event',index,key,'$0'],[[['products','',index],['selectd_model','',key]]]]]]]}}" bind:change="__e" bind:__l="__l"></uninumberbox></view></block></view></block><block wx:else><view class="margin-t-5"><text>数量：</text><uninumberbox vue-id="{{('10b3b94c-6-'+index)+','+('10b3b94c-4-'+index)}}" min="{{1}}" value="{{item.num}}" data-event-opts="{{[['^change',[['handleNumChange',['$event',index]]]]]}}" bind:change="__e" bind:__l="__l"></uninumberbox></view></block><view class="bottom_del display_flex_bet"><view><block wx:if="{{user.identity!=2}}"><view><navigator class="del" style="background:#2ca879;" hover-class="none" url="{{'/pages/manage/good_det/Ngood_det?id='+item.objectId+'&type=false'}}"><fa-icon vue-id="{{('10b3b94c-7-'+index)+','+('10b3b94c-4-'+index)}}" type="magic" size="12" color="#fff" bind:__l="__l"></fa-icon><text style="margin-left:10rpx;">详情</text></navigator></view></block></view><view data-event-opts="{{[['tap',[['handleDel',[index]]]]]}}" class="del" bindtap="__e"><fa-icon vue-id="{{('10b3b94c-8-'+index)+','+('10b3b94c-4-'+index)}}" type="close" size="12" color="#fff" bind:__l="__l"></fa-icon><text style="margin-left:10rpx;">删除</text></view></view></view></unicard></view></block></scroll-view></view></uni-popup-new></view>