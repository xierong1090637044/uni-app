(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-EnteringHistory-SellDetail-SellDetail"],{3927:function(t,e,i){"use strict";(function(t){var o=i("ee27");i("7db0"),i("c975"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("54f8"));i("96cf");var a,r,s,l=o(i("c964")),c=o(i("9546")),u=o(i("856d")),d=o(i("7fd5")),v=o(i("120a")),f=o(i("96bd")),p={components:{loading:v.default,uniNavBar:f.default},data:function(){return{user:uni.getStorageSync("user"),identity:uni.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:null,detail:null,stock:""}},onLoad:function(e){this.$wechat.share_pyq(),t.log(e),a=this,r=e.id,s=uni.getStorageSync("uid"),a.user.rights&&a.user.rights.othercurrent&&(a.othercurrent=a.user.rights.othercurrent),a.getdetail(r)},onShow:function(){a.stock=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:""},onShareAppMessage:function(e){return"button"===e.from&&t.log(e.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/detail/detail?id="+r}},methods:{gotoexpressDet:function(){a.user.is_vip?uni.navigateTo({url:"../expressDet/expressDet?number="+a.detail.expressNum}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(t){uni.previewImage({current:t,urls:a.detail.Images})},show_options:function(){var e=["打印"];-1!=a.detail.type&&1!=a.detail.type||(-1!=a.othercurrent.indexOf("1")||1==a.identity&&1==a.detail.extra_type?(e=-1==a.detail.type?["销售出库","撤销","打印"]:["采购入库","撤销","打印"],uni.showActionSheet({itemList:e,success:function(t){if(0==t.tapIndex){if(1==a.detail.type)if(a.detail.status)uni.showToast({title:"该笔采购单已入库",icon:"none"});else{if(""==uni.getStorageSync("warehouse")||void 0==uni.getStorageSync("warehouse"))return void uni.showToast({icon:"none",title:"请选择店仓"});a.confrimOrder()}else if(-1==a.detail.type)if(a.detail.status)uni.showToast({title:"该笔销售单已出库",icon:"none"});else{if(""==uni.getStorageSync("warehouse")||void 0==uni.getStorageSync("warehouse"))return void uni.showToast({icon:"none",title:"请选择店仓"});a.confrimOrder()}uni.setStorageSync("is_option",!0)}else 1==t.tapIndex?(a.revoke(),uni.setStorageSync("is_option",!0)):2==t.tapIndex&&u.default.print_operations(a.detail,a.products)},fail:function(e){t.log(e.errMsg)}})):uni.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var i=c.default.Query("order_opreations");i.include("opreater","custom","producer","stock","account"),i.get(e).then((function(e){t.log(e),a.detail=e,a.products=e.detail,a.bills=e.bills,a.loading=!1})).catch((function(e){t.log(e)}))},revoke:function(){wx.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){if(e.confirm){uni.showLoading({title:"撤销中..."});var i=c.default.Query("order_opreations");i.destroy(a.detail.objectId).then((function(e){var i=c.default.Query("Bills");i.containedIn("objectId",a.bills),i.find().then((function(e){e.destroyAll().then((function(t){a.detail.status?a.reduceAll():(uni.hideLoading(),uni.navigateBack({delta:1}),setTimeout((function(){uni.showToast({title:"撤销成功"})}),1e3))})).catch((function(e){t.log(e)}))}))})).catch((function(e){t.log(e)}))}}})},reduceAll:function(){return(0,l.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.reduceAccount();case 2:return t.next=4,a.reduceGoods();case 4:case"end":return t.stop()}}),t)})))()},reduceAccount:function(){if(a.detail.account&&a.detail.account.objectId){var t=c.default.Query("accounts");t.get(a.detail.account.objectId).then((function(t){1==a.detail.type?t.set("money",t.money+Number(a.detail.haveGetMoney)):-1==a.detail.type&&t.set("money",t.money-Number(a.detail.haveGetMoney)),t.save()}))}},reduceGoods:function(){for(var t=0;t<a.products.length;t++)a.delete_bill(t)},confrimOrder:function(){wx.showModal({title:"提示",content:"确定进行此操作！",success:function(e){if(e.confirm){uni.showLoading({title:"操作中，请勿退出该页面..."});var i=c.default.Pointer("stocks"),o=i.set(a.stock.objectId),s=c.default.Query("order_opreations");s.set("id",r),s.set("stock",o),s.set("status",!0),s.save().then((function(t){var e=0;if(1==a.detail.type){var i,o=(0,n.default)(a.products);try{for(o.s();!(i=o.n()).done;){var r=i.value;a.addOrReduceGoodReserve(r,e),e+=1}}catch(u){o.e(u)}finally{o.f()}}else if(-1==a.detail.type){var s,l=(0,n.default)(a.products);try{for(l.s();!(s=l.n()).done;){var c=s.value;a.ReduceGoodReserve(c,e),e+=1}}catch(u){l.e(u)}finally{l.f()}}})).catch((function(e){t.log(e)}))}}})},addOrReduceGoodReserve:function(e,i){var o=c.default.Query("Goods");o.equalTo("userId","==",s),o.equalTo("header","==",e.goodsId.objectId),o.equalTo("stocks","==",a.stock.objectId),o.find().then((function(s){if(0==s.length)o.get(e.goodsId.objectId).then((function(o){e.objectId=e.goodsId.objectId,e.costPrice=o.costPrice,e.retailPrice=o.retailPrice,d.default.upload_good_withNoCan(o,a.stock,Number(e.num)).then((function(o){var n=c.default.Query("Goods");n.equalTo("header","==",e.goodsId.objectId),n.equalTo("order","==",1),n.statTo("sum","reserve"),n.find().then((function(o){var n=o[0]._sumReserve,s=c.default.Query("Goods");s.set("reserve",n),s.set("id",e.goodsId.objectId),e.modify_retailPrice&&s.set("costPrice",e.modify_retailPrice),s.save().then((function(o){if(d.default.modifyStockType(e.goodsId.objectId),i==a.products.length-1){var n=c.default.Pointer("stocks"),s=n.set(a.stock.objectId),l=c.default.Query("Bills");l.containedIn("objectId",a.bills),l.find().then((function(e){e.set("status",!0),e.set("stock",s),e.saveAll().then((function(t){uni.hideLoading(),a.getdetail(r),setTimeout((function(){uni.showToast({title:"采购入库成功"})}),1e3)})).catch((function(e){t.log(e)}))}))}}))}))}))}));else{var l=c.default.Query("Goods");l.get(s[0].objectId).then((function(o){if(e.goodsId.selected_model){var s,l=0,u=(0,n.default)(e.goodsId.selected_model);try{for(u.s();!(s=u.n()).done;){var v,f=s.value,p=(0,n.default)(o.models);try{for(p.s();!(v=p.n()).done;){var h=v.value;h.id==f.id&&(h.reserve=Number(h.reserve)+Number(f.num),l+=Number(f.num))}}catch(y){p.e(y)}finally{p.f()}}}catch(y){u.e(y)}finally{u.f()}o.set("models",o.models),o.set("reserve",o.reserve+l)}else o.set("reserve",o.reserve+e.num);o.save().then((function(o){var n=c.default.Pointer("stocks"),s=n.set(a.stock.objectId),l=c.default.Query("Goods");l.equalTo("header","==",e.goodsId.objectId),l.equalTo("order","==",1),l.statTo("sum","reserve"),l.find().then((function(o){var n=o[0]._sumReserve,l=c.default.Query("Goods");l.set("reserve",n),e.modify_retailPrice&&l.set("costPrice",e.modify_retailPrice),l.set("id",e.goodsId.objectId),l.save().then((function(o){if(i==a.products.length-1){var n=c.default.Query("Bills");n.containedIn("objectId",a.bills),n.find().then((function(i){i.set("status",!0),i.set("stock",s),i.saveAll().then((function(t){uni.hideLoading(),a.getdetail(r),setTimeout((function(){var t=c.default.Query("Goods");t.equalTo("header","==",e.goodsId.objectId),t.equalTo("order","==",1),t.statTo("sum","reserve"),t.find().then((function(t){d.default.modifyStockType(e.goodsId.objectId);var i=t[0]._sumReserve,o=c.default.Query("Goods");o.set("reserve",i),o.set("id",e.goodsId.objectId),o.save().then((function(t){uni.removeStorageSync("warehouse"),uni.showToast({title:"采购入库成功"})}))}))}),1e3)})).catch((function(e){t.log(e)}))}))}}))}))}))}))}}))},ReduceGoodReserve:function(e,i){var o=c.default.Query("Goods");o.equalTo("userId","==",s),o.equalTo("header","==",e.goodsId.objectId),o.equalTo("stocks","==",a.stock.objectId),o.find().then((function(s){if(0==s.length)o.get(e.goodsId.objectId).then((function(o){e.objectId=e.goodsId.objectId,e.costPrice=o.costPrice,e.retailPrice=o.retailPrice,d.default.upload_good_withNoCan(o,a.stock,0-Number(e.num)).then((function(o){t.log(o);var n=c.default.Query("Goods");n.equalTo("header","==",e.goodsId.objectId),n.equalTo("order","==",1),n.statTo("sum","reserve"),n.find().then((function(o){var n=o[0]._sumReserve,s=c.default.Query("Goods");s.set("reserve",n),s.set("id",e.goodsId.objectId),s.save().then((function(o){if(d.default.modifyStockType(e.goodsId.objectId),i==a.products.length-1){var n=c.default.Pointer("stocks"),s=n.set(a.stock.objectId),l=c.default.Query("Bills");l.containedIn("objectId",a.bills),l.find().then((function(e){e.set("status",!0),e.set("stock",s),e.saveAll().then((function(t){uni.hideLoading(),a.getdetail(r),setTimeout((function(){uni.removeStorageSync("warehouse"),uni.showToast({title:"销售出库成功"})}),1e3)})).catch((function(e){t.log(e)}))}))}}))}))}))}));else{var l=c.default.Query("Goods");l.get(s[0].objectId).then((function(o){if(e.goodsId.selected_model){var s,l=0,u=(0,n.default)(e.goodsId.selected_model);try{for(u.s();!(s=u.n()).done;){var v,f=s.value,p=(0,n.default)(o.models);try{for(p.s();!(v=p.n()).done;){var h=v.value;h.id==f.id&&(h.reserve=Number(h.reserve)-Number(f.num),l+=Number(f.num))}}catch(y){p.e(y)}finally{p.f()}}}catch(y){u.e(y)}finally{u.f()}o.set("models",o.models),o.set("reserve",o.reserve-l)}else o.set("reserve",o.reserve-e.num);o.save().then((function(o){var n=c.default.Query("Goods");n.equalTo("header","==",e.goodsId.objectId),n.equalTo("order","==",1),n.statTo("sum","reserve"),n.find().then((function(o){var n=o[0]._sumReserve,s=c.default.Query("Goods");s.set("reserve",n),s.set("id",e.goodsId.objectId),s.save().then((function(o){if(d.default.modifyStockType(e.goodsId.objectId),i==a.products.length-1){var n=c.default.Pointer("stocks"),s=n.set(a.stock.objectId),l=c.default.Query("Bills");l.containedIn("objectId",a.bills),l.find().then((function(e){e.set("status",!0),e.set("stock",s),e.saveAll().then((function(t){uni.hideLoading(),a.getdetail(r),setTimeout((function(){uni.showToast({title:"销售出库成功"})}),1e3)})).catch((function(e){t.log(e)}))}))}}))}))}))}))}}))},delete_bill:function(e){var i=a.products[e],o=(a.bills[e],c.default.Query("Goods"));o.equalTo("order","==",1),o.equalTo("header","==",i.goodsId.objectId),o.equalTo("stocks","==",a.detail.stock.objectId),o.find().then((function(r){t.log(r);var s=r[0];if(o.set("id",r[0].objectId),1==i.type)if(i.goodsId.selected_model){var l,u=0,v=(0,n.default)(i.goodsId.selected_model);try{for(v.s();!(l=v.n()).done;){var f,p=l.value,h=(0,n.default)(s.models);try{for(h.s();!(f=h.n()).done;){var y=f.value;y.id==p.id&&(y.reserve=Number(y.reserve)-Number(p.num),u+=Number(p.num))}}catch(I){h.e(I)}finally{h.f()}}}catch(I){v.e(I)}finally{v.f()}o.set("models",r[0].models),o.set("reserve",r[0].reserve-u)}else o.set("reserve",r[0].reserve-i.num);else if(-1==i.type)if(i.goodsId.selected_model){var _,g=0,m=(0,n.default)(i.goodsId.selected_model);try{for(m.s();!(_=m.n()).done;){var w,b=_.value,x=(0,n.default)(s.models);try{for(x.s();!(w=x.n()).done;){var S=w.value;S.id==b.id&&(S.reserve=Number(S.reserve)+Number(b.num),g+=Number(b.num))}}catch(I){x.e(I)}finally{x.f()}}}catch(I){m.e(I)}finally{m.f()}o.set("models",r[0].models),o.set("reserve",r[0].reserve+g)}else o.set("reserve",r[0].reserve+i.num);o.save().then((function(i){if(s.header){var o=c.default.Query("Goods");o.equalTo("header","==",s.header.objectId),o.equalTo("order","==",1),o.statTo("sum","reserve"),o.find().then((function(i){t.log("dasds",i);var o=i[0]._sumReserve,n=c.default.Query("Goods");n.set("reserve",o),n.set("id",s.header.objectId),n.save().then((function(t){d.default.modifyStockType(s.header.objectId),e==a.products.length-1&&(uni.hideLoading(),uni.navigateBack({delta:1}),setTimeout((function(){uni.showToast({title:"撤销成功"})}),1e3))}))}))}else d.default.modifyStockType(s.objectId),e==a.products.length-1&&(uni.hideLoading(),uni.navigateBack({delta:1}),setTimeout((function(){uni.showToast({title:"撤销成功"})}),1e3))}))})).catch((function(e){t.log(e)}))}}};e.default=p}).call(this,i("5a52")["default"])},"40f5":function(t,e,i){"use strict";i.r(e);var o=i("3927"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"6cb2":function(t,e,i){"use strict";var o=i("93bc"),n=i.n(o);n.a},"8f2b":function(t,e,i){"use strict";var o={"uni-nav-bar":i("96bd").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.loading?i("loading"):i("v-uni-view",{staticClass:"page"},[i("uni-nav-bar",{attrs:{fixed:!0,color:"#333333","background-color":"#FFFFFF","right-text":"操作"},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.show_options.apply(void 0,arguments)}}}),i("v-uni-scroll-view",{staticStyle:{height:"calc(100vh - 80rpx)"},attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticStyle:{"line-height":"70rpx",padding:"0 20rpx"}},[t._v("操作产品")]),i("v-uni-view",[i("v-uni-view",t._l(t.products,(function(e,o){return i("v-uni-view",{key:o,staticClass:"pro_listitem"},[i("v-uni-view",{staticClass:"pro_list",staticStyle:{color:"#000"}},[i("v-uni-view",[t._v("产品："+t._s(e.goodsName)),t.user.rights&&"0"!=t.user.rights.othercurrent[0]||-1==t.detail.type?i("v-uni-text"):i("v-uni-text",[t._v("（成本价：￥"+t._s(e.goodsId.costPrice)+"）")])],1),i("v-uni-view",[t._v("数量：X"+t._s(e.num)+t._s(e.packingUnit||""))])],1),e.goodsId.selected_model?i("v-uni-view",t._l(e.goodsId.selected_model,(function(e,o){return e.num>0?i("v-uni-view",{key:o,staticClass:"display_flex",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999"}},[t._v(t._s(e.custom1.value+e.custom2.value+e.custom3.value+e.custom4.value))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#f30"}},[t._v(t._s(e.num))])],1):t._e()})),1):t._e(),i("v-uni-view",{staticClass:"pro_list"},[i("v-uni-view",[t._v("建议零售价：￥"+t._s(e.goodsId.retailPrice))]),-1==e.type?i("v-uni-view",[t._v("实际卖出价：￥"+t._s(e.modify_retailPrice))]):i("v-uni-view",[t.user.rights&&"0"!=t.user.rights.othercurrent[0]?i("v-uni-text",[t._v("实际进货价：￥0")]):i("v-uni-text",[t._v("实际进货价：￥"+t._s(e.modify_retailPrice))])],1)],1)],1)})),1),i("v-uni-view",{staticClass:"pro_allmoney"},[t._v("总计：￥"+t._s(t.detail.all_money))])],1),-1==t.detail.type?i("v-uni-view",[1==t.detail.extra_type?i("v-uni-view",{staticClass:"kaidanmx"},[i("v-uni-view",{staticStyle:{padding:"10rpx 30rpx","font-size":"30rpx","font-weight":"bold"}},[t._v("销售明细")]),t.detail.custom?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("客户姓名")]),i("v-uni-view",[t._v(t._s(t.detail.custom.custom_name))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("商品总价")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.all_money))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("其他费用")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.otherMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("优惠金额")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.discountMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7","margin-top":"20rpx"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("结算账户")]),i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.account?t.detail.account.name:"未填写"))])],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",[t._v("现结（预付）款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.haveGetMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",[t._v("现结（预付）后欠款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.debt||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),t.detail.createdTime?i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"left_content"},[t._v("销售时间")]),i("v-uni-view",[t._v(t._s(t.detail.createdTime.iso.split(" ")[0]))])],1):t._e(),t.detail.typeDesc?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{background:"#fff","border-bottom":"1rpx solid#F7F7F7","margin-top":"20rpx"}},[i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"left_content"},[t._v("发送方式")]),i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.typeDesc))])],1),"物流"==t.detail.typeDesc||"快递"==t.detail.typeDesc?i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.expressNum))])],1):t._e()],1):t._e(),t.detail.expressNum?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{background:"#fff","justify-content":"flex-end",padding:"0rpx 30rpx","border-bottom":"1rpx solid#F7F7F7"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoexpressDet.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"margin-right":"10rpx",color:"#0a53c3"}},[t._v("查快递")]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#0a53c3"}})],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7","margin-top":"20rpx"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("出库情况")]),t.detail.status?i("v-uni-view",{staticStyle:{color:"#2ca879"}},[t._v("已出库")]):i("v-uni-view",{staticStyle:{color:"#f30"}},[t._v("未出库"),i("v-uni-text",{staticStyle:{"font-size":"20rpx"}},[t._v("（请点击右上角操作进行入库）")])],1)],1),0==t.detail.status?i("v-uni-navigator",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"},attrs:{"hover-class":"none",url:"/pages/manage/warehouse/warehouse?type=choose"}},[i("v-uni-view",{staticClass:"left_content",staticStyle:{width:"150rpx"}},[t._v("出库店仓"),i("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("*")])],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[i("v-uni-input",{attrs:{placeholder:"请选择要出库的店仓",disabled:"true",value:t.stock.stock_name}}),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1):t._e(),t.detail.status?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("出库店仓")]),i("v-uni-view",{staticStyle:{color:"#2ca879"}},[t._v(t._s(t.detail.stock.stock_name))])],1):t._e(),t.detail.status?i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"left_content"},[t._v("出库时间")]),i("v-uni-view",[t._v(t._s(t.detail.updatedAt))])],1):t._e()],1):t._e()],1):1==t.detail.type?i("v-uni-view",[1==t.detail.extra_type?i("v-uni-view",{staticClass:"kaidanmx"},[i("v-uni-view",{staticStyle:{padding:"10rpx 30rpx"}},[t._v("采购明细")]),t.detail.producer?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("供货商姓名")]),i("v-uni-view",[t._v(t._s(t.detail.producer.producer_name))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("商品总价")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.all_money))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("其他费用")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.otherMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("优惠金额")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.discountMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7","margin-top":"20rpx"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("结算账户")]),i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.account?t.detail.account.name:"未填写"))])],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",[t._v("预付款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.haveGetMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",[t._v("预付后欠款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.debt||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),t.detail.createdTime?i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"left_content"},[t._v("采购时间")]),i("v-uni-view",[t._v(t._s(t.detail.createdTime.iso.split(" ")[0]))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"margin-top":"20rpx"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("入库情况")]),t.detail.status?i("v-uni-view",{staticStyle:{color:"#2ca879"}},[t._v("已入库")]):i("v-uni-view",{staticStyle:{color:"#f30"}},[t._v("未入库"),i("v-uni-text",{staticStyle:{"font-size":"20rpx"}},[t._v("（请点击右上角操作进行入库）")])],1)],1),0==t.detail.status?i("v-uni-navigator",{staticClass:"display_flex_bet",attrs:{"hover-class":"none",url:"/pages/manage/warehouse/warehouse?type=choose"}},[i("v-uni-view",{staticClass:"left_content",staticStyle:{width:"150rpx"}},[t._v("入库店仓"),i("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("*")])],1),i("v-uni-view",{staticStyle:{width:"calc(100% - 160rpx)",display:"flex","align-items":"center","justify-content":"flex-end"}},[i("v-uni-input",{attrs:{placeholder:"请选择要入库的店仓",disabled:"true",value:t.stock.stock_name}}),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1):i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("入库店仓")]),i("v-uni-view",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.detail.stock.stock_name))])],1),t.detail.status?i("v-uni-view",{staticClass:"display_flex_bet"},[i("v-uni-view",{staticClass:"left_content"},[t._v("入库时间")]),i("v-uni-view",[t._v(t._s(t.detail.updatedAt))])],1):t._e()],1):t._e()],1):t._e(),i("v-uni-view",{staticClass:"detail_bottom",staticStyle:{"margin-top":"20px"}},[i("v-uni-view",{staticStyle:{display:"flex","border-bottom":"1px solid#ddd","padding-bottom":"20upx"}},[i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{src:t.detail.opreater.avatarUrl}})],1),i("v-uni-view",{staticClass:"common_style"},[t._v(t._s(t.detail.opreater.nickName))]),i("v-uni-view",{staticClass:"common_style"},[t._v("（操作者）")])],1),i("v-uni-view",{staticStyle:{padding:"20rpx 0 0"}},[t.detail.beizhu?i("v-uni-view",{staticStyle:{"word-break":"break-all"}},[t._v("备注："+t._s(t.detail.beizhu))]):i("v-uni-view",[t._v("备注：暂无")]),i("v-uni-view",[t._v("操作时间："+t._s(t.detail.createdAt))]),t.detail.Images&&t.detail.Images.length>0?i("v-uni-view",[i("v-uni-view",{staticClass:"notice_text"},[t._v("凭证图")]),i("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[i("v-uni-view",{staticClass:"upload_image display_flex"},t._l(t.detail.Images,(function(e,o){return i("v-uni-view",{key:o,staticStyle:{position:"relative"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.priview(e)}}},[i("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx","margin-right":"10rpx"},attrs:{src:e}})],1)})),1)],1)],1):t._e()],1)],1)],1)],1)],1)},a=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}))},"93bc":function(t,e,i){var o=i("af06");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("4dfa8f92",o,!0,{sourceMap:!1,shadowMode:!1})},"96cf":function(t,e){!function(e){"use strict";var i,o=Object.prototype,n=o.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"===typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{u=e.regeneratorRuntime=c?t.exports:{},u.wrap=w;var d="suspendedStart",v="suspendedYield",f="executing",p="completed",h={},y={};y[r]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(P([])));g&&g!==o&&n.call(g,r)&&(y=g);var m=I.prototype=x.prototype=Object.create(y);S.prototype=m.constructor=I,I.constructor=S,I[l]=S.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(m),t},u.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[s]=function(){return this},u.AsyncIterator=C,u.async=function(t,e,i,o){var n=new C(w(t,e,i,o));return u.isGeneratorFunction(e)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},k(m),m[l]="Generator",m[r]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},u.values=P,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,n){return s.type="throw",s.arg=t,e.next=o,n&&(e.method="next",e.arg=i),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),L(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var n=o.arg;L(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:P(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=i),h}}}function w(t,e,i,o){var n=e&&e.prototype instanceof x?e:x,a=Object.create(n.prototype),r=new G(o||[]);return a._invoke=F(t,i,r),a}function b(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(o){return{type:"throw",arg:o}}}function x(){}function S(){}function I(){}function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function C(t){function e(i,o,a,r){var s=b(t[i],t,o);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"===typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,a,r)}),(function(t){e("throw",t,a,r)})):Promise.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,r)}))}r(s.arg)}var i;function o(t,o){function n(){return new Promise((function(i,n){e(t,o,i,n)}))}return i=i?i.then(n,n):n()}this._invoke=o}function F(t,e,i){var o=d;return function(n,a){if(o===f)throw new Error("Generator is already running");if(o===p){if("throw"===n)throw a;return N()}i.method=n,i.arg=a;while(1){var r=i.delegate;if(r){var s=j(r,i);if(s){if(s===h)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===d)throw o=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=f;var l=b(t,e,i);if("normal"===l.type){if(o=i.done?p:v,l.arg===h)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=p,i.method="throw",i.arg=l.arg)}}}function j(t,e){var o=t.iterator[e.method];if(o===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,j(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=b(o,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(t){if(t){var e=t[r];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){while(++o<t.length)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=i,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:i,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},a9c6:function(t,e,i){"use strict";i.r(e);var o=i("8f2b"),n=i("40f5");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("6cb2");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"3d6d20e3",null,!1,o["a"],r);e["default"]=l.exports},af06:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".page[data-v-3d6d20e3]{color:#4d4d4d;background:#fafafa;font-size:%?28?%}.operater_status[data-v-3d6d20e3]{position:fixed;bottom:0;left:0;width:100%;padding:%?20?% 0;background:#b82626;color:#fff;z-index:100;text-align:center}.pro_list[data-v-3d6d20e3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.pro_listitem[data-v-3d6d20e3]{background-color:#fff;padding:%?10?% %?20?%;border-bottom:%?1?% solid#ddd}.pro_allmoney[data-v-3d6d20e3]{background-color:#fff;padding:%?10?% %?20?%;text-align:right;font-size:%?32?%;color:#f30}.beizhu_style[data-v-3d6d20e3]{width:100%;background-color:#fff;padding:%?20?%;font-size:%?32?%}.confrim_button[data-v-3d6d20e3]{width:60%;background:#426ab3;color:#fff;font-size:%?32?%;margin:10% 20%}.detail_bottom[data-v-3d6d20e3]{width:calc(100% - %?40?%);background-color:#fff;padding:%?20?%}.avatar[data-v-3d6d20e3]{width:%?80?%;height:%?80?%;border-radius:50%}.common_style[data-v-3d6d20e3]{line-height:%?80?%;margin-left:%?20?%;color:#000}.real_color[data-v-3d6d20e3]{color:#f30!important}.kaidanmx[data-v-3d6d20e3]{margin-top:%?30?%}.display_flex_bet[data-v-3d6d20e3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;padding:%?15?% %?30?%}.left_content[data-v-3d6d20e3]{width:%?150?%}",""]),t.exports=e},c964:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return n}));i("d3b7"),i("e6cf");function o(t,e,i,o,n,a,r){try{var s=t[a](r),l=s.value}catch(c){return void i(c)}s.done?e(l):Promise.resolve(l).then(o,n)}function n(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){o(r,n,a,s,l,"next",t)}function l(t){o(r,n,a,s,l,"throw",t)}s(void 0)}))}}}}]);