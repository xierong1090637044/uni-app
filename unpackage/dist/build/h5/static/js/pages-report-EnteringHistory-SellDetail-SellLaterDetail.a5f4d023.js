(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-EnteringHistory-SellDetail-SellLaterDetail"],{6161:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-2bfbb5f4]{color:#4d4d4d;background:#fafafa;font-size:%?28?%}.operater_status[data-v-2bfbb5f4]{position:fixed;bottom:0;left:0;width:100%;padding:%?20?% 0;background:#b82626;color:#fff;z-index:100;text-align:center}.pro_list[data-v-2bfbb5f4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.pro_listitem[data-v-2bfbb5f4]{background-color:#fff;padding:%?10?% %?20?%;border-bottom:%?1?% solid#ddd}.pro_allmoney[data-v-2bfbb5f4]{background-color:#fff;padding:%?10?% %?20?%;text-align:right;font-size:%?32?%;color:#f30}.beizhu_style[data-v-2bfbb5f4]{width:100%;background-color:#fff;padding:%?20?%;font-size:%?32?%}.confrim_button[data-v-2bfbb5f4]{width:60%;background:#426ab3;color:#fff;font-size:%?32?%;margin:10% 20%}.detail_bottom[data-v-2bfbb5f4]{width:calc(100% - %?40?%);background-color:#fff;padding:%?20?%}.avatar[data-v-2bfbb5f4]{width:%?80?%;height:%?80?%;border-radius:50%}.common_style[data-v-2bfbb5f4]{line-height:%?80?%;margin-left:%?20?%;color:#000}.real_color[data-v-2bfbb5f4]{color:#f30!important}.kaidanmx[data-v-2bfbb5f4]{margin-top:%?30?%}.display_flex_bet[data-v-2bfbb5f4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;padding:%?15?% %?30?%}.left_content[data-v-2bfbb5f4]{width:%?150?%}",""]),t.exports=e},"8ddd":function(t,e,i){"use strict";var a=i("92dc"),n=i.n(a);n.a},"92dc":function(t,e,i){var a=i("6161");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("68085378",a,!0,{sourceMap:!1,shadowMode:!1})},"9d9a":function(t,e,i){"use strict";i.r(e);var a=i("e80c"),n=i("f99b");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("8ddd");var o,l=i("f0c5"),r=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"2bfbb5f4",null,!1,a["a"],o);e["default"]=r.exports},d3f1:function(t,e,i){"use strict";(function(t){var a=i("ee27");i("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s,o=a(i("9546")),l=a(i("856d")),r=(a(i("7fd5")),a(i("120a"))),c=a(i("96bd")),v={components:{loading:r.default,uniNavBar:c.default},data:function(){return{user:uni.getStorageSync("user"),identity:uni.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:[],detail:"",stock:""}},onLoad:function(t){this.$wechat.share_pyq(),n=this,s=t.id,uni.getStorageSync("uid"),n.user.rights&&n.user.rights.othercurrent&&(n.othercurrent=n.user.rights.othercurrent)},onShow:function(){n.stock=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",n.getdetail(s)},onShareAppMessage:function(e){return"button"===e.from&&t.log(e.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/SellDetail/SellLaterDetail?id="+s}},methods:{gotoexpressDet:function(){n.user.is_vip?uni.navigateTo({url:"../expressDet/expressDet?number="+n.detail.expressNum}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(t){uni.previewImage({current:t,urls:n.detail.Images})},show_options:function(){var e=["打印"];-3!=n.detail.type&&-4!=n.detail.type||(-1!=n.othercurrent.indexOf("1")||1==n.identity?(e=-3==n.detail.type?["生成销售单","删除"]:["生成采购单","删除"],uni.showActionSheet({itemList:e,success:function(t){0==t.tapIndex?(-4==n.detail.type?n.detail.status?uni.showToast({title:"该笔订单已生成采购单",icon:"none"}):n.confrimOrder():-3==n.detail.type&&(n.detail.status?uni.showToast({title:"该笔订单已生成销售单",icon:"none"}):n.confrimOrder()),uni.setStorageSync("is_option",!0)):1==t.tapIndex?(n.detail.status?uni.showToast({title:-4==n.detail.type?"该笔订单已生成采购单":"该笔订单已生成销售单",icon:"none"}):n.revoke(),uni.setStorageSync("is_option",!0)):2==t.tapIndex&&l.default.print_operations(n.detail,n.products)},fail:function(e){t.log(e.errMsg)}})):uni.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var i=o.default.Query("order_opreations");i.include("opreater","custom","producer","stock","account"),i.get(e).then((function(e){t.log(e),n.detail=e,n.products=e.opreatGood,n.bills=e.bills,n.loading=!1,-4==e.type?uni.setNavigationBarTitle({title:"采购订单详情"}):-3==e.type&&uni.setNavigationBarTitle({title:"销售订单详情"})})).catch((function(e){t.log(e)}))},revoke:function(){wx.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){if(e.confirm){uni.showLoading({title:"撤销中..."});var i=o.default.Query("order_opreations");i.destroy(n.detail.objectId).then((function(t){uni.hideLoading(),uni.navigateBack({delta:1}),setTimeout((function(){uni.showToast({title:"删除成功"})}),1e3)})).catch((function(e){t.log(e)}))}}})},confrimOrder:function(){-3==n.detail.type?wx.showModal({title:"提示",content:"是否生成销售单！",success:function(t){t.confirm&&(uni.setStorageSync("custom",n.detail.custom),uni.setStorageSync("products",n.detail.opreatGood),uni.setStorageSync("otherMoney",n.detail.otherMoney),uni.setStorageSync("haveGetMoney",n.detail.haveGetMoney),uni.navigateTo({url:"/pages/commonNew/goods_out/gooSellNew/gooSellNew?id="+n.detail.objectId}))}}):-4==n.detail.type&&wx.showModal({title:"提示",content:"是否生成采购单！",success:function(t){t.confirm&&(uni.setStorageSync("producer",n.detail.producer),uni.setStorageSync("products",n.detail.opreatGood),uni.setStorageSync("otherMoney",n.detail.otherMoney),uni.setStorageSync("haveGetMoney",n.detail.haveGetMoney),uni.navigateTo({url:"/pages/commonNew/good_confrim/goodPurchaseNew/goodPurchaseNew?id="+n.detail.objectId}))}})}}};e.default=v}).call(this,i("5a52")["default"])},e80c:function(t,e,i){"use strict";var a={"uni-nav-bar":i("96bd").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.loading?i("loading"):i("v-uni-view",{staticClass:"page"},[i("uni-nav-bar",{attrs:{fixed:!0,color:"#333333","background-color":"#FFFFFF","right-text":"操作"},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.show_options.apply(void 0,arguments)}}}),i("v-uni-scroll-view",{staticStyle:{height:"calc(100vh - 80rpx)"},attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticStyle:{"line-height":"70rpx",padding:"0 20rpx"}},[t._v("操作产品")]),i("v-uni-view",[i("v-uni-view",t._l(t.products,(function(e,a){return i("v-uni-view",{key:a,staticClass:"pro_listitem"},[i("v-uni-view",{staticClass:"pro_list",staticStyle:{color:"#000"}},[i("v-uni-view",{staticStyle:{width:"60%"}},[t._v("产品："+t._s(e.goodsName))]),i("v-uni-view",[t._v("数量：X"+t._s(e.num)+t._s(e.packingUnit||""))])],1),e.selected_model?i("v-uni-view",t._l(e.selected_model,(function(e,a){return e.num>0?i("v-uni-view",{key:a,staticClass:"display_flex",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999"}},[t._v(t._s(e.custom1.value+e.custom2.value+e.custom3.value+e.custom4.value))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#f30"}},[t._v(t._s(e.num))])],1):t._e()})),1):t._e(),i("v-uni-view",{staticClass:"pro_list"},[i("v-uni-view",[t._v("建议零售价：￥"+t._s(e.retailPrice))]),-3==t.detail.type?i("v-uni-view",[t._v("实际卖出价：￥"+t._s(e.modify_retailPrice))]):i("v-uni-view",[t.user.rights&&"0"!=t.user.rights.othercurrent[0]?i("v-uni-text",[t._v("实际进货价：￥0")]):i("v-uni-text",[t._v("实际进货价：￥"+t._s(e.modify_retailPrice))])],1)],1)],1)})),1),i("v-uni-view",{staticClass:"pro_allmoney"},[t._v("总计：￥"+t._s(t.detail.all_money))])],1),-3==t.detail.type?i("v-uni-view",[i("v-uni-view",{staticClass:"kaidanmx"},[i("v-uni-view",{staticStyle:{padding:"10rpx 30rpx"}},[t._v("销售订单明细")]),t.detail.custom?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("客户姓名")]),i("v-uni-view",[t._v(t._s(t.detail.custom.custom_name))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("预收款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.haveGetMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("其他费用")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.otherMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("合计应收")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.real_money||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),t.detail.setDay?i("v-uni-view",{staticClass:"display_flex_bet borderBot"},[i("v-uni-view",{staticClass:"left_content"},[t._v("订货时间")]),i("v-uni-view",[t._v(t._s(t.detail.setDay.iso.split(" ")[0]))])],1):t._e(),t.detail.giveDay?i("v-uni-view",{staticClass:"display_flex_bet borderBot"},[i("v-uni-view",{staticClass:"left_content"},[t._v("交货时间")]),i("v-uni-view",[t._v(t._s(t.detail.giveDay.iso.split(" ")[0]))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",[t._v("是否已生成销售单"),i("v-uni-text",{staticStyle:{"font-size":"20rpx",color:"#999"}},[t._v("点击右上角操作可生成")])],1),t.detail.status?i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-navigator",{staticStyle:{color:"#2ca879","margin-right":"10rpx"},attrs:{"hover-class":"none",url:"/pages/report/EnteringHistory/SellDetail/SellDetail?id="+t.detail.orderSellId}},[t._v("已生成")]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#2ca879"}})],1):i("v-uni-view",{staticStyle:{color:"#f30"}},[t._v("未生成")])],1)],1)],1):t._e(),-4==t.detail.type?i("v-uni-view",[i("v-uni-view",{staticClass:"kaidanmx"},[i("v-uni-view",{staticStyle:{padding:"10rpx 30rpx"}},[t._v("采购订单明细")]),t.detail.producer?i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("供应商姓名")]),i("v-uni-view",[t._v(t._s(t.detail.producer.producer_name))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("预付款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.haveGetMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("其他费用")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.otherMoney||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"border-bottom":"1rpx solid#F7F7F7"}},[i("v-uni-view",{staticClass:"left_content"},[t._v("合计应付")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticClass:"real_color"},[t._v(t._s(t.detail.real_money||0))]),i("v-uni-text",{staticStyle:{color:"#333","font-weight":"bold","margin-left":"6rpx"}},[t._v("元")])],1)],1),t.detail.setDay?i("v-uni-view",{staticClass:"display_flex_bet borderBot"},[i("v-uni-view",{staticClass:"left_content"},[t._v("订货时间")]),i("v-uni-view",[t._v(t._s(t.detail.setDay.iso.split(" ")[0]))])],1):t._e(),t.detail.giveDay?i("v-uni-view",{staticClass:"display_flex_bet borderBot"},[i("v-uni-view",{staticClass:"left_content"},[t._v("收货时间")]),i("v-uni-view",[t._v(t._s(t.detail.giveDay.iso.split(" ")[0]))])],1):t._e(),i("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",[t._v("是否已生成采购单"),i("v-uni-text",{staticStyle:{"font-size":"20rpx",color:"#999"}},[t._v("点击右上角操作可生成")])],1),t.detail.status?i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-navigator",{staticStyle:{color:"#2ca879","margin-right":"10rpx"},attrs:{"hover-class":"none",url:"/pages/report/EnteringHistory/SellDetail/SellDetail?id="+t.detail.orderSellId}},[t._v("已生成")]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#2ca879"}})],1):i("v-uni-view",{staticStyle:{color:"#f30"}},[t._v("未生成")])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"detail_bottom",staticStyle:{"margin-top":"20px"}},[i("v-uni-view",{staticStyle:{display:"flex","border-bottom":"1px solid#ddd","padding-bottom":"20upx"}},[i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{src:t.detail.opreater.avatarUrl}})],1),i("v-uni-view",{staticClass:"common_style"},[t._v(t._s(t.detail.opreater.nickName))]),i("v-uni-view",{staticClass:"common_style"},[t._v("（操作者）")])],1),i("v-uni-view",{staticStyle:{padding:"20rpx 0 0"}},[t.detail.beizhu?i("v-uni-view",{staticStyle:{"word-break":"break-all"}},[t._v("备注："+t._s(t.detail.beizhu))]):i("v-uni-view",[t._v("备注：暂无")]),i("v-uni-view",[t._v("操作时间："+t._s(t.detail.createdAt))]),t.detail.Images&&t.detail.Images.length>0?i("v-uni-view",[i("v-uni-view",{staticClass:"notice_text"},[t._v("凭证图")]),i("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[i("v-uni-view",{staticClass:"upload_image display_flex"},t._l(t.detail.Images,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{position:"relative"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.priview(e)}}},[i("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx","margin-right":"10rpx"},attrs:{src:e}})],1)})),1)],1)],1):t._e()],1)],1)],1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},f99b:function(t,e,i){"use strict";i.r(e);var a=i("d3f1"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);