(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-custom-custom"],{"211a":function(t,e,o){var n=o("7c5c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("4f06").default;a("6cfeb694",n,!0,{sourceMap:!1,shadowMode:!1})},"51e2":function(t,e,o){"use strict";(function(t){var n=o("ee27");o("7db0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i,c,r=n(o("54f8")),s=n(o("9546")),d=n(o("96bd")),u={components:{uniNavBar:d.default},data:function(){return{people:[],is_producer:!1,is_custom:!1,showOrder:!1,showOptions:!1,type:"",customHeader:{num:0,debtMoney:0},headerSelection:{order:{order:"-createdAt"},customCategory:{},options:""},orders:[{desc:"应收欠款",notice:"从高到低",order:"-debt",checked:!1},{desc:"应收欠款",notice:"从低到高",order:"debt",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}]}},onLoad:function(t){a=this,c=uni.getStorageSync("uid"),"custom"!=t.type&&"customFinance"!=t.type||(a.is_custom=!0,a.load_data("customs")),a.type=t.type},onShow:function(){uni.removeStorageSync("customs"),uni.removeStorageSync("custom_type"),uni.getStorageSync("isClickShaiXuan")?(a.headerSelection.customCategory=uni.getStorageSync("customCategory")||"",a.load_data("customs")):a.load_data("customs")},onUnload:function(){i="",uni.removeStorageSync("isClickShaiXuan")},methods:{selectd:function(t){"order"==t?a.showOrder=!0:"customCategory"==t?uni.navigateTo({url:"/pages/manage/customClass/customClass?type=choose"}):"options"==t&&(a.showOptions=!0),uni.setStorageSync("isClickShaiXuan",!0)},selectOrder:function(t){var e,o=(0,r.default)(a.orders);try{for(o.s();!(e=o.n()).done;){var n=e.value;n.checked=!1}}catch(i){o.e(i)}finally{o.f()}t.checked=!0,a.headerSelection.order=t,a.load_data("customs")},makePhoneCall:function(t){t?uni.makePhoneCall({phoneNumber:t}):uni.showToast({icon:"none",title:"未填写联系电话"})},gotoDetail:function(t){a.is_custom||uni.navigateTo({url:"custom_detail/custom_detail?id="+t.objectId})},select_this:function(t){var e=JSON.parse(t.detail.value);uni.setStorageSync("custom",e),uni.navigateBack({delta:1})},goto_add:function(){uni.navigateTo({url:"add/add?type=customs"})},input_confirm:function(t){i=t.detail.value,a.load_data("customs")},option_reset:function(){a.headerSelection={order:{order:"-createdAt"},customCategory:{},options:""},a.orders=[{desc:"应收欠款",notice:"从高到低",order:"-debt",checked:!1},{desc:"应收欠款",notice:"从低到高",order:"debt",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}],a.load_data("customs")},load_data:function(e){uni.showLoading({title:"加载中..."}),a.customHeader.num=0,a.customHeader.debtMoney=0;var o=s.default.Query(e);o.equalTo("parent","==",c),o.order(a.headerSelection.order.order),o.limit(500),i&&o.equalTo("custom_name","==",{$regex:i+".*"}),1==a.headerSelection.customCategory.type?o.equalTo("customFristClass","==",a.headerSelection.customCategory.objectId):o.equalTo("customSecondClass","==",a.headerSelection.customCategory.objectId),o.include("customFristClass","customSecondClass"),o.find().then((function(e){t.log(e);var o=e;uni.hideLoading();var n=s.default.Query("order_opreations");n.equalTo("type","==",-1),n.equalTo("extra_type","==",1),n.equalTo("master","==",c),n.include("opreater","account","custom","producer","secondClass","fristClass"),n.statTo("sum","debt"),n.statTo("groupby","custom"),n.find().then((function(t){var e,n=t,i=(0,r.default)(o);try{for(i.s();!(e=i.n()).done;){var c,s=e.value,d=(0,r.default)(n);try{for(d.s();!(c=d.n()).done;){var u=c.value;u.custom&&u.custom.objectId==s.objectId&&(s.debt=u._sumDebt)}}catch(p){d.e(p)}finally{d.f()}}}catch(p){i.e(p)}finally{i.f()}var l,f=(0,r.default)(o);try{for(f.s();!(l=f.n()).done;){var v=l.value;v.debt=v.debt?v.debt:0,v.orginDebt?v.debt=v.debt+v.orginDebt:v.debt=v.debt+0,a.customHeader.num+=1,a.customHeader.debtMoney+=v.debt||0}}catch(p){f.e(p)}finally{f.f()}a.people=o}))}))}}};e.default=u}).call(this,o("5a52")["default"])},"54f8":function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return a}));o("a4d3"),o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");var n=o("dde1");function a(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(n["a"])(t))){var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){r=!0,i=t},f:function(){try{c||null==a["return"]||a["return"]()}finally{if(r)throw i}}}}},6812:function(t,e,o){"use strict";o.r(e);var n=o("dbd7"),a=o("fbed");for(var i in a)"default"!==i&&function(t){o.d(e,t,(function(){return a[t]}))}(i);o("69de");var c,r=o("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"3512b060",null,!1,n["a"],c);e["default"]=s.exports},"69de":function(t,e,o){"use strict";var n=o("211a"),a=o.n(n);a.a},"7c5c":function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-3512b060]{background:#fafafa}.uni-common-mt[data-v-3512b060]{padding:%?30?%}.content[data-v-3512b060]{height:calc(100vh - %?214?%)}.info_item[data-v-3512b060]{padding:%?0?% %?30?%;background:#fff}.stock_avatar[data-v-3512b060]{width:%?70?%;height:%?70?%;margin-right:%?20?%}.item[data-v-3512b060]{border-bottom:%?1?% solid#ccc;padding-bottom:%?10?%;margin-bottom:%?10?%;width:100%}body.?%PAGE?%[data-v-3512b060]{background:#fafafa}",""]),t.exports=e},dbd7:function(t,e,o){"use strict";var n={"uni-nav-bar":o("96bd").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.goto_add.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"input-view display_flex"},[o("fa-icon",{attrs:{type:"search",size:"16",color:"#999"}}),o("v-uni-input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.input_confirm.apply(void 0,arguments)}}})],1)],1),o("v-uni-view",{staticClass:"display_flex good_option_view",staticStyle:{background:"#fff"}},[o("v-uni-view",{staticClass:"good_option",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectd("customCategory")}}},[o("v-uni-view",{staticClass:"good_optionText"},[t._v(t._s(t.headerSelection.customCategory.class_text||"分类"))]),o("fa-icon",{attrs:{type:"angle-down",size:"18",color:"#999"}})],1),o("v-uni-view",{staticClass:"good_option",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectd("order")}}},[o("v-uni-view",{staticClass:"good_optionText"},[t._v(t._s(t.headerSelection.order.desc||"排序"))]),o("fa-icon",{attrs:{type:"angle-down",size:"18",color:"#999"}})],1),o("v-uni-view",{staticClass:"good_option",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.option_reset.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"good_optionText"},[t._v("重置")]),o("fa-icon",{attrs:{type:"repeat",size:"16",color:"#999"}})],1)],1),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 30rpx",background:"#FAFAFA",color:"#999"}},[o("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[t._v("客户总数："+t._s(t.customHeader.num))]),o("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[t._v("应收欠款："+t._s(t.customHeader.debtMoney))])],1),t.people&&t.people.length>0?o("v-uni-scroll-view",{staticClass:"content",attrs:{"scroll-y":"true"}},[o("v-uni-view",{staticClass:"info_item"},[o("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.select_this.apply(void 0,arguments)}}},t._l(t.people,(function(e,n){return o("v-uni-label",{key:n,staticClass:"normalBorder display_flex_bet",staticStyle:{width:"100%",padding:"20rpx 0 20rpx"}},[o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{width:"100%"},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.gotoDetail(e)}}},[e.Images&&e.Images.length>0?o("v-uni-image",{staticClass:"stock_avatar",attrs:{src:e.Images[0],mode:"aspectFit"},on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.priviewImg(e.Images[0])}}}):o("v-uni-image",{staticClass:"stock_avatar",attrs:{src:"/static/custom.png"}}),o("v-uni-view",{staticStyle:{width:"80%","margin-right":"20rpx"}},[o("v-uni-view",{staticStyle:{"font-size":"30rpx",color:"#3d3d3d","font-weight":"bold"}},[t._v(t._s(e.custom_name))]),o("v-uni-view",{staticClass:"display_flex_bet"},[o("v-uni-view",{staticStyle:{color:"#999"}},[t._v("应收欠款："),o("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("￥"+t._s(e.debt||0))])],1),o("v-uni-view",{staticClass:"display_flex",on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.makePhoneCall(e.custom_phone)}}},[o("fa-icon",{attrs:{type:"phone",size:"14",color:"#999"}}),o("v-uni-text",{staticStyle:{"margin-left":"10rpx","font-size":"24rpx"}},[t._v("打电话")])],1)],1)],1),t.is_custom?o("v-uni-view",[o("v-uni-radio",{staticStyle:{transform:"scale(0.9)"},attrs:{value:JSON.stringify(e)}})],1):o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)})),1),t.showOrder?o("v-uni-view",{staticClass:"modal_backgroundTransparent",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showOrder=!1}}},[o("v-uni-view",{staticClass:"showOptionsTransparent"},t._l(t.orders,(function(e,n){return o("v-uni-view",{key:n,staticClass:"display_flex_bet",staticStyle:{padding:"16rpx 30rpx","border-bottom":"1rpx solid#F7F7F7"},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.selectOrder(e)}}},[o("v-uni-view",{staticStyle:{color:"#333"}},[t._v(t._s(e.desc)+"("+t._s(e.notice)+")")]),e.checked?o("fa-icon",{attrs:{type:"check",size:"18",color:"#2ca879"}}):t._e()],1)})),1)],1):t._e()],1)],1):o("nocontent",{attrs:{type:1}})],1)},i=[];o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}))},fbed:function(t,e,o){"use strict";o.r(e);var n=o("51e2"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a}}]);