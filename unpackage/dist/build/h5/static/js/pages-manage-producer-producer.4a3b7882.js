(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-producer-producer"],{"0936":function(e,t,o){"use strict";var n=o("4f6b"),a=o.n(n);a.a},"0e83":function(e,t,o){"use strict";var n={"uni-nav-bar":o("96bd").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(t){arguments[0]=t=e.$handleEvent(t),e.goto_add.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"input-view display_flex"},[o("fa-icon",{attrs:{type:"search",size:"16",color:"#999"}}),o("v-uni-input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.input_confirm.apply(void 0,arguments)}}})],1)],1),o("v-uni-view",{staticClass:"display_flex good_option_view",staticStyle:{background:"#fff"}},[o("v-uni-view",{staticClass:"good_option",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectd("order")}}},[o("v-uni-view",{staticClass:"good_optionText"},[e._v(e._s(e.headerSelection.order.desc||"排序"))]),o("fa-icon",{attrs:{type:"angle-down",size:"18",color:"#999"}})],1),o("v-uni-view",{staticClass:"good_option",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.option_reset.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"good_optionText"},[e._v("重置")]),o("fa-icon",{attrs:{type:"repeat",size:"16",color:"#999"}})],1)],1),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 30rpx",background:"#FAFAFA",color:"#999"}},[o("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[e._v("供应商总数："+e._s(e.producerHeader.num))]),o("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[e._v("应付欠款："+e._s(e.producerHeader.debtMoney))])],1),e.people&&e.people.length>0?o("v-uni-scroll-view",{staticClass:"content",attrs:{"scroll-y":"true"}},[o("v-uni-view",{staticClass:"info_item"},[o("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.select_this.apply(void 0,arguments)}}},e._l(e.people,(function(t,n){return o("v-uni-label",{key:n,staticClass:"normalBorder display_flex_bet",staticStyle:{width:"100%",padding:"20rpx 0 20rpx"}},[o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{width:"100%"},on:{click:function(o){arguments[0]=o=e.$handleEvent(o),e.gotoDetail(t)}}},[t.Images&&t.Images.length>0?o("v-uni-image",{staticClass:"stock_avatar",attrs:{src:t.Images[0],mode:"aspectFit"},on:{click:function(o){o.stopPropagation(),arguments[0]=o=e.$handleEvent(o),e.priviewImg(t.Images[0])}}}):o("v-uni-image",{staticClass:"stock_avatar",attrs:{src:"/static/custom.png"}}),o("v-uni-view",{staticStyle:{width:"80%","margin-right":"20rpx"}},[o("v-uni-view",{staticStyle:{"font-size":"30rpx",color:"#3d3d3d","font-weight":"bold"}},[e._v(e._s(t.producer_name))]),o("v-uni-view",{staticClass:"display_flex_bet"},[o("v-uni-view",{staticStyle:{color:"#999"}},[e._v("应付欠款："),o("v-uni-text",{staticStyle:{color:"#f30"}},[e._v("￥"+e._s(t.debt||0))])],1),o("v-uni-view",{staticClass:"display_flex",on:{click:function(o){o.stopPropagation(),arguments[0]=o=e.$handleEvent(o),e.makePhoneCall(t.producer_phone)}}},[o("fa-icon",{attrs:{type:"phone",size:"14",color:"#999"}}),o("v-uni-text",{staticStyle:{"margin-left":"10rpx","font-size":"24rpx"}},[e._v("打电话")])],1)],1)],1),e.is_producer?o("v-uni-view",[o("v-uni-radio",{staticStyle:{transform:"scale(0.9)"},attrs:{value:JSON.stringify(t)}})],1):o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)})),1),e.showOrder?o("v-uni-view",{staticClass:"modal_backgroundTransparent",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showOrder=!1}}},[o("v-uni-view",{staticClass:"showOptionsTransparent"},e._l(e.orders,(function(t,n){return o("v-uni-view",{key:n,staticClass:"display_flex_bet",staticStyle:{padding:"16rpx 30rpx","border-bottom":"1rpx solid#F7F7F7"},on:{click:function(o){arguments[0]=o=e.$handleEvent(o),e.selectOrder(t)}}},[o("v-uni-view",{staticStyle:{color:"#333"}},[e._v(e._s(t.desc)+"("+e._s(t.notice)+")")]),t.checked?o("fa-icon",{attrs:{type:"check",size:"18",color:"#2ca879"}}):e._e()],1)})),1)],1):e._e()],1)],1):o("nocontent",{attrs:{type:1}})],1)},r=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}))},3699:function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-3c2fd8f2]{background:#fafafa}.uni-common-mt[data-v-3c2fd8f2]{padding:%?30?%}.content[data-v-3c2fd8f2]{height:calc(100vh - %?214?%)}.info_item[data-v-3c2fd8f2]{padding:%?0?% %?30?%;background:#fff}.stock_avatar[data-v-3c2fd8f2]{width:%?70?%;height:%?70?%;margin-right:%?20?%}.item[data-v-3c2fd8f2]{border-bottom:%?1?% solid#ccc;padding-bottom:%?10?%;margin-bottom:%?10?%;width:100%}body.?%PAGE?%[data-v-3c2fd8f2]{background:#fafafa}",""]),e.exports=t},"4f6b":function(e,t,o){var n=o("3699");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("373bda3e",n,!0,{sourceMap:!1,shadowMode:!1})},"54f8":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return a}));o("a4d3"),o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");var n=o("dde1");function a(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(n["a"])(e))){var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,i=!0,d=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){d=!0,r=e},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(d)throw r}}}}},6077:function(e,t,o){"use strict";o.r(t);var n=o("8837"),a=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},8837:function(e,t,o){"use strict";(function(e){var n=o("ee27");o("7db0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,d=n(o("54f8")),c=n(o("fc11")),s=n(o("9546")),u=n(o("96bd")),l={components:{uniNavBar:u.default},data:function(){var e;return e={people:[],is_producer:!1},(0,c.default)(e,"is_producer",!1),(0,c.default)(e,"showOrder",!1),(0,c.default)(e,"showOptions",!1),(0,c.default)(e,"type",""),(0,c.default)(e,"producerHeader",{num:0,debtMoney:0}),(0,c.default)(e,"headerSelection",{order:{order:"-createdAt"},options:""}),(0,c.default)(e,"orders",[{desc:"应付欠款",notice:"从高到低",order:"-debt",checked:!1},{desc:"应付欠款",notice:"从低到高",order:"debt",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}]),e},onLoad:function(e){a=this,i=uni.getStorageSync("uid"),"producer"!=e.type&&"producerFinance"!=e.type||(a.is_producer=!0,a.load_data("producers")),a.type=e.type},onShow:function(){uni.removeStorageSync("producers"),uni.removeStorageSync("producer_type"),a.load_data("producers")},onUnload:function(){r=""},methods:{selectd:function(e){"order"==e?a.showOrder=!0:"options"==e&&(a.showOptions=!0)},selectOrder:function(e){var t,o=(0,d.default)(a.orders);try{for(o.s();!(t=o.n()).done;){var n=t.value;n.checked=!1}}catch(r){o.e(r)}finally{o.f()}e.checked=!0,a.headerSelection.order=e,a.load_data("producers")},makePhoneCall:function(e){e?uni.makePhoneCall({phoneNumber:e}):uni.showToast({icon:"none",title:"未填写联系电话"})},gotoDetail:function(e){a.is_producer||uni.navigateTo({url:"producer_detail/producer_detail?id="+e.objectId})},select_this:function(e){var t=JSON.parse(e.detail.value);"producerFinance"!=a.type||0!=t.debt&&""!=t.debt?(uni.setStorageSync("producer",t),uni.navigateBack({delta:1})):uni.showToast({icon:"none",title:"没有欠款"})},goto_add:function(){uni.navigateTo({url:"add/add?type=producers"})},input_confirm:function(e){r=e.detail.value,a.load_data("producers")},option_reset:function(){a.headerSelection={order:{order:"-createdAt"},options:""},a.orders=[{desc:"应付欠款",notice:"从高到低",order:"-debt",checked:!1},{desc:"应付欠款",notice:"从低到高",order:"debt",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}],a.load_data("producers")},load_data:function(t){uni.showLoading({title:"加载中..."}),a.producerHeader.num=0,a.producerHeader.debtMoney=0;var o=s.default.Query(t);o.equalTo("parent","==",i),o.order(a.headerSelection.order.order),o.limit(500),r&&o.equalTo("producer_name","==",{$regex:r+".*"}),o.find().then((function(t){e.log(t),uni.hideLoading();var o=t,n=s.default.Query("order_opreations");n.equalTo("type","==",1),n.equalTo("extra_type","==",1),n.equalTo("master","==",i),n.statTo("sum","debt"),n.statTo("groupby","producer"),n.find().then((function(e){var t,n=e,r=(0,d.default)(o);try{for(r.s();!(t=r.n()).done;){var i,c=t.value,s=(0,d.default)(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;u.producer&&u.producer.objectId==c.objectId&&(c.debt=u._sumDebt)}}catch(v){s.e(v)}finally{s.f()}}}catch(v){r.e(v)}finally{r.f()}a.people=o;var l,f=(0,d.default)(o);try{for(f.s();!(l=f.n()).done;){var p=l.value;p.debt=p.debt?p.debt:0,p.orginDebt?p.debt=p.debt+p.orginDebt:p.debt=p.debt+0,a.producerHeader.num+=1,a.producerHeader.debtMoney+=p.debt||0}}catch(v){f.e(v)}finally{f.f()}}))}))}}};t.default=l}).call(this,o("5a52")["default"])},ad19:function(e,t,o){"use strict";o.r(t);var n=o("0e83"),a=o("6077");for(var r in a)"default"!==r&&function(e){o.d(t,e,(function(){return a[e]}))}(r);o("0936");var i,d=o("f0c5"),c=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"3c2fd8f2",null,!1,n["a"],i);t["default"]=c.exports}}]);