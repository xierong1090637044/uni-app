(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-producer-add-add"],{"016c":function(t,e,a){"use strict";var n={"uni-nav-bar":a("96bd").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":t.textDesc},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.add_data.apply(void 0,arguments)}}},[a("v-uni-view")],1),a("v-uni-view",[a("v-uni-view",{staticClass:"normalBorder",staticStyle:{background:"#fff",padding:"0 30rpx"}},[a("v-uni-view",{staticClass:"notice_text"},[t._v("上传供货商头像(会员可用)")]),a("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[a("v-uni-view",{staticClass:"upload_image display_flex"},[t._l(t.Images,(function(e,n){return t.Images.length>0?a("v-uni-view",{key:n,staticStyle:{position:"relative"}},[a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:e}}),a("fa-icon",{staticStyle:{position:"absolute",top:"-10rpx",right:"-10rpx"},attrs:{type:"times-circle-o",size:"20",color:"#426ab3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeImg(n)}}})],1):t._e()})),0==t.Images.length?a("v-uni-view",{staticStyle:{width:"180rpx",height:"180rpx","line-height":"220rpx","text-align":"center",border:"1rpx solid#ccc","border-radius":"16rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload_image.apply(void 0,arguments)}}},[a("fa-icon",{attrs:{type:"plus-square-o",size:"40",color:"#426ab3"}})],1):t._e()],2)],1)],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("姓名"),a("v-uni-text",{staticStyle:{color:"#d93a49"}},[t._v("*")])],1),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系地址")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系电话")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入电话",type:"number",maxlength:"11"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("期初欠款")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入期初欠款金额",type:"digit"},model:{value:t.debt,callback:function(e){t.debt=e},expression:"debt"}})],1)],1)],1)},r=[];a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}))},2015:function(t,e,a){"use strict";(function(t){var n=a("ee27");a("a434"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r,o,c=n(a("9546")),u=n(a("9ef1")),s=n(a("96bd")),d={components:{uniNavBar:s.default},data:function(){return{Images:[],name:"",address:"",phone:"",debt:0,discount:100,textDesc:"添加"}},onLoad:function(t){t.type,i=this,o=uni.getStorageSync("uid")},onShow:function(){r=uni.getStorageSync("producers"),r?(uni.getStorageSync("producer_type"),uni.setNavigationBarTitle({title:"修改客户"}),i.textDesc="修改",i.Images=r.Images||[],i.name=r.producer_name||"",i.address=r.producer_address||"",i.phone=r.producer_phone||"",i.debt=r.debt||0,i.discount=r.discount||100):uni.setNavigationBarTitle({title:"新增客户"})},onUnload:function(){uni.removeStorageSync("producer_type"),uni.removeStorageSync("producers")},methods:{handleData:function(){i.Images=[],i.name="",i.address="",i.phone="",i.debt=0,i.discount=100},removeImg:function(t){i.Images.splice(t,1),i.Images=i.Images},upload_image:function(){u.default.upload_image(1).then((function(t){i.Images=t}))},getDiscount:function(t){var e=Number(t.detail.value);e>=100&&(i.discount=100)},add_data:function(){if(null==i.name||""==i.name)uni.showToast({title:"请输入姓名",icon:"none"});else{var e=c.default.Query("producers"),a=c.default.Pointer("_User"),n=a.set(o);r&&e.set("id",r.objectId),e.set("producer_name",i.name),e.set("producer_phone",i.phone?i.phone:""),e.set("producer_address",i.address?i.address:""),e.set("orginDebt",Number(i.debt)),e.set("parent",n),e.set("Images",i.Images),e.save().then((function(e){t.log(e),r?uni.showToast({title:"修改成功"}):(uni.showToast({title:"添加成功"}),i.handleData())})).catch((function(e){t.log(e)}))}}}};e.default=d}).call(this,a("5a52")["default"])},"233f":function(t,e,a){var n=a("713c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("7de06d8a",n,!0,{sourceMap:!1,shadowMode:!1})},"340b":function(t,e,a){"use strict";a.r(e);var n=a("2015"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"54f8":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");var n=a("dde1");function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(n["a"])(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,o=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){c=!0,r=t},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(c)throw r}}}}},"713c":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-adcfcb1e]{background:#fafafa}.notice_text[data-v-adcfcb1e]{padding:%?20?% 0 0}.item[data-v-adcfcb1e]{padding:%?20?% %?30?%;background:#fff}.rightInput[data-v-adcfcb1e]{text-align:right}body.?%PAGE?%[data-v-adcfcb1e]{background:#fafafa}",""]),t.exports=e},8690:function(t,e,a){"use strict";a.r(e);var n=a("016c"),i=a("340b");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("bc2d");var o,c=a("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"adcfcb1e",null,!1,n["a"],o);e["default"]=u.exports},"9ef1":function(t,e,a){"use strict";(function(e){var n=a("ee27");a("d3b7");var i=n(a("54f8")),r=n(a("9546"));t.exports={upload_image:function(t){return new Promise((function(a,n){var o=uni.getStorageSync("user"),c=[];o.is_vip?uni.chooseImage({count:t,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.log(t);var n,o,u=Date.parse(new Date),s=t.tempFilePaths,d=(0,i.default)(s);try{for(d.s();!(o=d.n()).done;){var l=o.value;n=r.default.File(u+".jpg",l)}}catch(f){d.e(f)}finally{d.f()}n.save().then((function(t){var e,n=(0,i.default)(t);try{for(n.s();!(e=n.n()).done;){e.value;c.push(t[0].url)}}catch(f){n.e(f)}finally{n.f()}a(c)}))}}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})}))}}}).call(this,a("5a52")["default"])},bc2d:function(t,e,a){"use strict";var n=a("233f"),i=a.n(n);i.a}}]);