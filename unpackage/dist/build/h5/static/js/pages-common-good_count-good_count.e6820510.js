(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-good_count-good_count"],{"01af":function(e,t,i){var n=i("cd93");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("74b7599c",n,!0,{sourceMap:!1,shadowMode:!1})},"020f":function(e,t,i){"use strict";var n=i("45a5"),a=i.n(n);a.a},"3a94":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-numbox"},[i("v-uni-view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":e.inputValue<=e.min||e.disabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._calcValue("minus")}}},[e._v("-")]),i("v-uni-input",{staticClass:"uni-numbox__value",attrs:{disabled:e.disabled,type:"digit"},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e._onBlur.apply(void 0,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),i("v-uni-view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":e.inputValue>=e.max||e.disabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._calcValue("plus")}}},[e._v("+")])],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},"45a5":function(e,t,i){var n=i("5afd");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("936dcf82",n,!0,{sourceMap:!1,shadowMode:!1})},"4aab":function(e,t,i){"use strict";i.r(t);var n=i("baa2"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},"4d00":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'.uni-card[data-v-ea954bea]{margin-left:%?24?%;margin-right:%?24?%;background:#fff;box-shadow:none;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.uni-card[data-v-ea954bea]:after{content:"";position:absolute;-webkit-transform-origin:center;transform-origin:center;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border:1px solid #c8c7cc;border-radius:%?12?%;-webkit-transform:scale(.5);transform:scale(.5)}.uni-card__footer[data-v-ea954bea],.uni-card__header[data-v-ea954bea]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:%?16?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-card__header[data-v-ea954bea]:after{position:absolute;bottom:0;right:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.uni-card__header-title[data-v-ea954bea]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-right:%?16?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-card__header-title-text[data-v-ea954bea]{font-size:%?32?%}.uni-card__header-extra-img-view[data-v-ea954bea]{display:-webkit-box;display:-webkit-flex;display:flex}.uni-card__header-extra-img[data-v-ea954bea]{height:%?40?%;width:%?40?%;margin-right:%?16?%}.uni-card__header-extra-text[data-v-ea954bea]{-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto;width:30%;margin-left:%?16?%;font-size:%?28?%;text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.uni-card__content--pd[data-v-ea954bea]{padding:%?16?%}.uni-card__footer[data-v-ea954bea]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;color:#999;font-size:%?24?%;padding-top:0}.uni-card--full[data-v-ea954bea]{margin:0}',""])},"55f9":function(e,t,i){"use strict";i.r(t);var n=i("3a94"),a=i("7800");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("020f");var r=i("f0c5"),l=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"7e0e10b6",null);t["default"]=l.exports},"5afd":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'.uni-numbox[data-v-7e0e10b6]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;height:%?50?%;position:relative}.uni-numbox[data-v-7e0e10b6]:after{content:"";position:absolute;-webkit-transform-origin:center;transform-origin:center;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border:1px solid #c8c7cc;border-radius:%?12?%;-webkit-transform:scale(.5);transform:scale(.5)}.uni-numbox__minus[data-v-7e0e10b6],.uni-numbox__plus[data-v-7e0e10b6]{margin:0;background-color:#f8f8f8;width:%?70?%;font-size:%?40?%;height:100%;line-height:%?50?%;text-align:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#333;position:relative}.uni-numbox__value[data-v-7e0e10b6]{position:relative;background-color:#fff;width:%?200?%;height:100%;text-align:center;padding:0}.uni-numbox__value[data-v-7e0e10b6]:after{content:"";position:absolute;-webkit-transform-origin:center;transform-origin:center;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border-style:solid;border-color:#c8c7cc;border-left-width:1px;border-right-width:1px;border-top-width:0;border-bottom-width:0;-webkit-transform:scale(.5);transform:scale(.5)}.uni-numbox--disabled[data-v-7e0e10b6]{color:silver}',""])},"5d15":function(e,t,i){"use strict";(function(e){var n=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("c5f6"),i("28a5");var a=n(i("5d73"));i("7514");var o,r,l=n(i("9546")),u=n(i("8975")),s=n(i("55f9")),d=n(i("4d52")),c=n(i("96bd")),f=n(i("3628")),v={components:{unicard:u.default,faIcon:d.default,uninumberbox:s.default,uniNavBar:c.default,uniIcon:f.default},data:function(){return{products:null}},onLoad:function(e){var t=this;if(o=uni.getStorageSync("uid"),r=this,uni.removeStorageSync("is_option"),e.id){uni.showLoading({title:"加载中..."});var i=l.default.Query("Goods");"false"==e.type?i.equalTo("objectId","==",e.id):i.equalTo("productCode","==",e.id),i.equalTo("userId","==",o),i.equalTo("status","!=",-1),i.include("stocks"),i.find().then(function(e){if(0==e.length)return uni.showToast({icon:"none",title:"没有此产品"}),void uni.hideLoading();if(0==e[0].order)i.equalTo("userId","==",o),i.equalTo("header","==",e[0].objectId),i.include("stocks"),i.find().then(function(e){var i=!0,n=!1,o=void 0;try{for(var r,l=(0,a.default)(e);!(i=(r=l.next()).done);i=!0){var u=r.value;if(u.num=1,u.total_money=1*u.retailPrice,u.really_total_money=1*u.retailPrice,u.modify_retailPrice=u.retailPrice,u.models){var s=0,d=!0,c=!1,f=void 0;try{for(var v,b=(0,a.default)(u.models);!(d=(v=b.next()).done);d=!0){var m=v.value;m.num=0,s+=1}}catch(p){c=!0,f=p}finally{try{d||null==b.return||b.return()}finally{if(c)throw f}}u.num=s,u.selectd_model=u.models,u.selected_model=u.models}}}catch(p){n=!0,o=p}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}t.products=e,wx.hideLoading()});else{var n=!0,r=!1,l=void 0;try{for(var u,s=(0,a.default)(e);!(n=(u=s.next()).done);n=!0){var d=u.value;if(d.num=1,d.total_money=1*d.retailPrice,d.really_total_money=1*d.retailPrice,d.modify_retailPrice=d.retailPrice,d.models){var c=0,f=!0,v=!1,b=void 0;try{for(var m,p=(0,a.default)(d.models);!(f=(m=p.next()).done);f=!0){var h=m.value;h.num=0,c+=1}}catch(_){v=!0,b=_}finally{try{f||null==p.return||p.return()}finally{if(v)throw b}}d.num=c,d.selectd_model=d.models,d.selected_model=d.models}}}catch(_){r=!0,l=_}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}t.products=e,wx.hideLoading()}})}else{this.products=uni.getStorageSync("products");var n=!0,u=!1,s=void 0;try{for(var d,c=(0,a.default)(this.products);!(n=(d=c.next()).done);n=!0){var f=d.value;if(f.models){var v=!0,b=!1,m=void 0;try{for(var p,h=(0,a.default)(f.models);!(v=(p=h.next()).done);v=!0){var _=p.value;_.num=_.reserve}}catch(x){b=!0,m=x}finally{try{v||null==h.return||h.return()}finally{if(b)throw m}}f.selectd_model=f.models,f.selected_model=f.models}}}catch(x){u=!0,s=x}finally{try{n||null==c.return||c.return()}finally{if(u)throw s}}this.products=this.products}},methods:{scanGoods:function(){uni.scanCode({success:function(e){uni.showLoading({title:"加载中..."});var t=e.result,i=t.split("-"),n=l.default.Query("Goods");"false"==i[1]?n.equalTo("objectId","==",i[0]):n.equalTo("productCode","==",i[0]),n.equalTo("userId","==",o),n.include("stocks"),n.find().then(function(e){if(0==e.length)return uni.showToast({icon:"none",title:"没有此产品"}),void uni.hideLoading();if(0==e[0].order)n.equalTo("userId","==",o),n.equalTo("header","==",e[0].objectId),n.include("stocks"),n.find().then(function(e){var t=!0,i=!1,n=void 0;try{for(var o,l=(0,a.default)(e);!(t=(o=l.next()).done);t=!0){var u=o.value;if(u.num=1,u.total_money=1*u.retailPrice,u.really_total_money=1*u.retailPrice,u.modify_retailPrice=u.retailPrice,u.models){var s=0,d=!0,c=!1,f=void 0;try{for(var v,b=(0,a.default)(u.models);!(d=(v=b.next()).done);d=!0){var m=v.value;m.num=0,s+=1}}catch(p){c=!0,f=p}finally{try{d||null==b.return||b.return()}finally{if(c)throw f}}u.num=s,u.selectd_model=u.models,u.selected_model=u.models}}}catch(p){i=!0,n=p}finally{try{t||null==l.return||l.return()}finally{if(i)throw n}}r.products=e,wx.hideLoading()});else{var t=!0,i=!1,l=void 0;try{for(var u,s=(0,a.default)(e);!(t=(u=s.next()).done);t=!0){var d=u.value;if(d.num=1,d.total_money=1*d.retailPrice,d.really_total_money=1*d.retailPrice,d.modify_retailPrice=d.retailPrice,d.models){var c=0,f=!0,v=!1,b=void 0;try{for(var m,p=(0,a.default)(d.models);!(f=(m=p.next()).done);f=!0){var h=m.value;h.num=0,c+=1}}catch(_){v=!0,b=_}finally{try{f||null==p.return||p.return()}finally{if(v)throw b}}d.num=c,d.selectd_model=d.models,d.selected_model=d.models}}}catch(_){i=!0,l=_}finally{try{t||null==s.return||s.return()}finally{if(i)throw l}}r.products=e,wx.hideLoading()}})},fail:function(e){uni.showToast({title:"未识别到条形码",icon:"none"})}})},confrim_this:function(){uni.navigateTo({url:"/pages/common/good_count/count_detail/count_detail"})},handleNumChange:function(e,t){this.products[t].num=e||0,this.products[t].total_money=e*Number(this.products[t].modify_retailPrice),uni.setStorageSync("products",this.products)},handleModelNumChange:function(e,t,i,n){n.reserve=Number(e),this.products[t].selected_model[i]=n;var o=0,r=!0,l=!1,u=void 0;try{for(var s,d=(0,a.default)(this.products[t].selected_model);!(r=(s=d.next()).done);r=!0){var c=s.value;o+=c.reserve}}catch(f){l=!0,u=f}finally{try{r||null==d.return||d.return()}finally{if(l)throw u}}this.products[t].num=o,this.products[t].total_money=o*Number(this.products[t].modify_retailPrice),this.products[t].really_total_money=o*Number(this.products[t].really_total_money),uni.setStorageSync("products",this.products)},handleDel:function(t){e.log(t),1==this.products.length?uni.showToast({title:"最少选择一个产品",icon:"none"}):(this.products.splice(t,1),uni.setStorageSync("products",this.products))},getrealprice:function(e,t){this.products[t].modify_retailPrice=e.target.value,this.products[t].total_money=this.products[t].num*Number(e.target.value),uni.setStorageSync("products",this.products)}}};t.default=v}).call(this,i("5a52")["default"])},"6fd3":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"确定",leftIcon:"scan","left-text":"扫码"},on:{"click-right":function(t){arguments[0]=t=e.$handleEvent(t),e.confrim_this.apply(void 0,arguments)},"click-left":function(t){arguments[0]=t=e.$handleEvent(t),e.scanGoods.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"page"},e._l(e.products,function(t,n){return i("v-uni-view",{key:n,staticClass:"margin-b-10"},[i("unicard",{attrs:{title:"品名："+t.goodsName}},[i("v-uni-view",[i("v-uni-view",{staticClass:"display_flex_bet"},[t.stocks&&t.stocks.stock_name?i("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[i("v-uni-text",[e._v("盘点仓库:"+e._s(t.stocks.stock_name))])],1):i("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[i("v-uni-text",[e._v("盘点仓库:未填写")])],1),i("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[e._v("库存："+e._s(t.reserve))])],1),t.selectd_model?i("v-uni-view",[t.selectd_model?i("v-uni-view",e._l(t.selectd_model,function(t,a){return i("v-uni-view",{key:a,staticClass:"margin-t-5",staticStyle:{"margin-bottom":"10rpx"}},[i("v-uni-text",{staticStyle:{color:"#f30"}},[e._v(e._s(t.custom1.value+t.custom2.value+t.custom3.value+t.custom4.value))]),e._v("盘点后库存："),i("uninumberbox",{attrs:{min:0,value:t.reserve},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.handleModelNumChange(i,n,a,t)}}})],1)}),1):e._e()],1):i("v-uni-view",{staticClass:"margin-t-5"},[e._v("盘点后库存："),i("uninumberbox",{attrs:{min:0,value:Number(t.reserve)},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handleNumChange(t,n)}}})],1),i("v-uni-view",{staticClass:"bottom_del display_flex_bet"},[1==t.order?i("v-uni-navigator",{staticClass:"del",staticStyle:{background:"#2ca879"},attrs:{"hover-class":"none",url:"/pages/manage/good_det/Ngood_det?id="+t.header.objectId+"&type=false"}},[i("fa-icon",{attrs:{type:"magic",size:"12",color:"#fff"}}),i("v-uni-text",{staticStyle:{"margin-left":"10rpx"}},[e._v("详情")])],1):i("v-uni-navigator",{staticClass:"del",staticStyle:{background:"#2ca879"},attrs:{"hover-class":"none",url:"/pages/manage/good_det/good_det?id="+t.objectId+"&type=false"}},[i("fa-icon",{attrs:{type:"magic",size:"12",color:"#fff"}}),i("v-uni-text",{staticStyle:{"margin-left":"10rpx"}},[e._v("详情")])],1),i("v-uni-view",{staticClass:"del",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleDel(n)}}},[i("fa-icon",{attrs:{type:"close",size:"12",color:"#fff"}}),i("v-uni-text",{staticStyle:{"margin-left":"10rpx"}},[e._v("删除")])],1)],1)],1)],1)],1)}),1)],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},7800:function(e,t,i){"use strict";i.r(t);var n=i("87ff"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},7871:function(e,t,i){var n=i("4d00");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("10a23c48",n,!0,{sourceMap:!1,shadowMode:!1})},"86ed":function(e,t,i){"use strict";var n=i("01af"),a=i.n(n);a.a},"87ff":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("28a5"),i("c5f6");var n={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:99999999999},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(e){this.inputValue=+e},inputValue:function(e,t){+e!==+t&&this.$emit("change",e)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(e){if(!this.disabled){var t=this._getDecimalScale(),i=this.inputValue*t,n=this.step*t;"minus"===e?i-=n:"plus"===e&&(i+=n),i<this.min||i>this.max||(this.inputValue=i/t)}},_getDecimalScale:function(){var e=1;return~~this.step!==this.step&&(e=Math.pow(10,(this.step+"").split(".")[1].length)),e},_onBlur:function(e){var t=e.detail.value;t?(t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min),this.inputValue=t):this.inputValue=0}}};t.default=n},8975:function(e,t,i){"use strict";i.r(t);var n=i("efc8"),a=i("4aab");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("ef84");var r=i("f0c5"),l=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"ea954bea",null);t["default"]=l.exports},9591:function(e,t,i){"use strict";i.r(t);var n=i("6fd3"),a=i("f0f3");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("86ed");var r=i("f0c5"),l=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"5f32cb96",null);t["default"]=l.exports},baa2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"UniCard",props:{title:{type:String,default:""},extra:{type:String,default:""},note:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1}},methods:{onClick:function(){this.$emit("click")}}};t.default=n},cd93:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".page[data-v-5f32cb96]{font-size:%?28?%;height:calc(100vh - %?88?%);overflow:scroll}.margin-b-10[data-v-5f32cb96]{margin-top:%?20?%}.margin-t-5[data-v-5f32cb96]{margin:%?10?% 0}.input_withlabel[data-v-5f32cb96]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?10?% 0}.bottom_del[data-v-5f32cb96]{text-align:right}.del[data-v-5f32cb96]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#aa2116;color:#fff;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding:%?4?% %?20?%;border-radius:%?8?%;font-size:%?20?%}.input_label[data-v-5f32cb96]{border:%?1?% solid#ddd;border-radius:%?8?%;padding:0 %?6?%;width:%?140?%;color:#aa2116}",""])},ef84:function(e,t,i){"use strict";var n=i("7871"),a=i.n(n);a.a},efc8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-card",class:e.isFull?"uni-card--full":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.title?i("v-uni-view",{staticClass:"uni-card__header"},[e.thumbnail?i("v-uni-view",{staticClass:"uni-card__header-extra-img-view"},[i("v-uni-image",{staticClass:"uni-card__header-extra-img",attrs:{src:e.thumbnail}})],1):e._e(),i("v-uni-view",{staticClass:"uni-card__header-title-text"},[e._v(e._s(e.title))]),e.extra?i("v-uni-view",{staticClass:"uni-card__header-extra-text"},[e._v(e._s(e.extra))]):e._e()],1):e._e(),i("v-uni-view",{staticClass:"uni-card__content uni-card__content--pd"},[e._t("default")],2),e.note?i("v-uni-view",{staticClass:"uni-card__footer"},[e._v(e._s(e.note))]):e._e()],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},f0f3:function(e,t,i){"use strict";i.r(t);var n=i("5d15"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a}}]);