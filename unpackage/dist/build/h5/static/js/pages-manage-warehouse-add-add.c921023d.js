(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-warehouse-add-add"],{1221:function(e,t,a){var n=a("7a5e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("085502a0",n,!0,{sourceMap:!1,shadowMode:!1})},"1e4f":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"uni-page-body[data-v-27648374]{background:#fafafa}.item[data-v-27648374]{padding:%?20?% %?30?%;background:#fff}.rights_item[data-v-27648374]{margin-bottom:%?20?%}body.?%PAGE?%[data-v-27648374]{background:#fafafa}",""])},"1f15":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=uni.getSystemInfoSync().statusBarHeight+"px",i={name:"UniStatusBar",data:function(){return{statusBarHeight:n}}};t.default=i},"279c":function(e,t,a){var n=a("1e4f");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("1c3eb431",n,!0,{sourceMap:!1,shadowMode:!1})},"2b76":function(e,t,a){"use strict";var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("8f52")),r=n(a("5753")),o={name:"UniNavBar",components:{uniStatusBar:i.default,uniIcon:r.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:Boolean,default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:Boolean,default:!1},shadow:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},methods:{onClickLeft:function(){this.$emit("click-left")},onClickRight:function(){this.$emit("click-right")}}};t.default=o},"465c":function(e,t,a){"use strict";(function(e){var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("7514"),a("c5f6"),a("7f7f");var i,r,o,s,u,l,c=n(a("c74b")),d=n(a("e601")),f=n(a("0914")),h=n(a("b92d")),v={components:{faIcon:f.default,uniNavBar:h.default},data:function(){return{user:uni.getStorageSync("user"),Images:[],warehouse_name:"",warehouse_shop:"",warehouse_num:0,warehouse_charge:"",warehouse_beizhu:"",disabled:!0}},onLoad:function(e){i=this,l=uni.getStorageSync("uid")},onShow:function(){if(r=uni.getStorageSync("warehouse"),o=uni.getStorageSync("charge"),s=uni.getStorageSync("shop"),r?(i.Images=r.Image,i.warehouse_name=r.stock_name,i.warehouse_shop=r.shop,i.warehouse_num=r.num,i.warehouse_charge=r.charge,i.warehouse_beizhu=r.beizhu,i.disabled=!r.disabled,uni.setNavigationBarTitle({title:"修改仓库信息"})):uni.setNavigationBarTitle({title:"新增仓库"}),s){i.warehouse_shop=s.name;var e=c.default.Pointer("shops");u=e.set(s.objectId)}i.warehouse_charge=o.username},onUnload:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("shop"),uni.removeStorageSync("charge")},methods:{removeImg:function(e){i.Images.splice(e,1),i.Images=i.Images},upload_image:function(){d.default.upload_image(1).then(function(t){e.log(t),i.Images=t})},switchChange:function(e){i.disabled=e.detail.value},start_add:function(){""==this.warehouse_name?uni.showToast({title:"请输入仓库名字",icon:"none"}):""==this.warehouse_charge||null==this.warehouse_charge?uni.showToast({title:"请选择仓库负责人",icon:"none"}):i.add_data()},add_data:function(){uni.showLoading({title:"上传中..."});var t=c.default.Pointer("_User"),a=t.set(l),n=c.default.Pointer("staffs"),d=n.set(o.objectId);if(r){var f=c.default.Query("stocks");f.set("Image",i.Images),f.set("stock_name",i.warehouse_name),f.set("num",Number(i.warehouse_num)),s&&f.set("shop",u),f.set("charge",d),f.set("beizhu",i.warehouse_beizhu),f.set("disabled",!i.disabled),f.set("parent",a),f.set("id",r.objectId),f.save().then(function(t){uni.hideLoading(),e.log(t),uni.showToast({title:"修改成功"})}).catch(function(t){e.log(t)})}else{var h=c.default.Query("stocks");h.equalTo("parent","==",l),h.equalTo("stock_name","==",i.warehouse_name),h.find().then(function(t){if(e.log(t),0==t.length){var n=c.default.Query("stocks");n.set("Image",i.Images),n.set("stock_name",i.warehouse_name),n.set("num",Number(i.warehouse_num)),s&&n.set("shop",u),n.set("charge",d),n.set("beizhu",i.warehouse_beizhu),n.set("disabled",!i.disabled),n.set("parent",a),n.save().then(function(t){e.log(t),uni.hideLoading(),uni.showToast({title:"添加成功"}),i.warehouse_name="",i.warehouse_shop="",i.warehouse_num=0,i.warehouse_charge="",i.warehouse_beizhu="",i.disabled=!0}).catch(function(t){e.log(t)})}else uni.showToast({title:"已存在此仓库",icon:"none"})})}}}};t.default=v}).call(this,a("5a52")["default"])},"4d05":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-navbar"},[a("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":e.fixed,"uni-navbar--shadow":e.border,"uni-navbar--border":e.border},style:{"background-color":e.backgroundColor}},[e.statusBar?a("uni-status-bar"):e._e(),a("v-uni-view",{staticClass:"uni-navbar__header",style:{color:e.color}},[a("v-uni-view",{staticClass:"uni-navbar__header-btns",on:{click:function(t){t=e.$handleEvent(t),e.onClickLeft(t)}}},[e.leftIcon.length?a("v-uni-view",[a("uni-icon",{attrs:{type:e.leftIcon,color:e.color,size:"24"}})],1):e._e(),e.leftText.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text",class:{"uni-navbar-btn-icon-left":!e.leftIcon.length}},[e._v(e._s(e.leftText))]):e._e(),e._t("left")],2),a("v-uni-view",{staticClass:"uni-navbar__header-container"},[e.title.length?a("v-uni-view",{staticClass:"uni-navbar__header-container-inner"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2),a("v-uni-view",{staticClass:"uni-navbar__header-btns",on:{click:function(t){t=e.$handleEvent(t),e.onClickRight(t)}}},[e.rightIcon.length?a("v-uni-view",[a("uni-icon",{attrs:{type:e.rightIcon,color:e.color,size:"24"}})],1):e._e(),e.rightText.length&&!e.rightIcon.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text"},[e._v(e._s(e.rightText))]):e._e(),e._t("right")],2)],1)],1),e.fixed?a("v-uni-view",{staticClass:"uni-navbar__placeholder"},[e.statusBar?a("uni-status-bar"):e._e(),a("v-uni-view",{staticClass:"uni-navbar__placeholder-view"})],1):e._e()],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},"4f00":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(t){t=e.$handleEvent(t),e.start_add(t)}}},[a("v-uni-view")],1),a("v-uni-view",[a("v-uni-view",{staticStyle:{"margin-top":"20px",background:"#fff",padding:"0 30rpx"}},[a("v-uni-view",{staticClass:"notice_text"},[e._v("上传仓库图(会员可用)")]),a("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[a("v-uni-view",{staticClass:"upload_image display_flex"},[e._l(e.Images,function(t,n){return e.Images.length>0?a("v-uni-view",{key:n,staticStyle:{position:"relative"}},[a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:t}}),a("fa-icon",{staticStyle:{position:"absolute",top:"-10rpx",right:"-10rpx"},attrs:{type:"times-circle-o",size:"20",color:"#426ab3"},on:{click:function(t){t=e.$handleEvent(t),e.removeImg(n)}}})],1):e._e()}),0==e.Images.length?a("v-uni-view",{staticStyle:{width:"180rpx",height:"180rpx","line-height":"220rpx","text-align":"center",border:"1rpx solid#ccc","border-radius":"16rpx"},on:{click:function(t){t=e.$handleEvent(t),e.upload_image(t)}}},[a("fa-icon",{attrs:{type:"plus-square-o",size:"40",color:"#426ab3"}})],1):e._e()],2)],1)],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v("名称")]),a("v-uni-text",{staticStyle:{color:"#d93a49","margin-right":"20rpx"}},[e._v("*")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入名称"},model:{value:e.warehouse_name,callback:function(t){e.warehouse_name=t},expression:"warehouse_name"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v("排序")]),a("v-uni-text",{staticStyle:{color:"#d93a49","margin-right":"20rpx"}},[e._v("*")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入排序(数值越小,排列越靠前)",type:"number",maxlength:"11"},model:{value:e.warehouse_num,callback:function(t){e.warehouse_num=t},expression:"warehouse_num"}})],1),a("v-uni-navigator",{staticClass:"display_flex_bet item",attrs:{"hover-class":"none",url:"../../shops/shops?type=choose"}},[a("v-uni-view",{staticClass:"display_flex"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("门店")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请选择门店"},model:{value:e.warehouse_shop,callback:function(t){e.warehouse_shop=t},expression:"warehouse_shop"}})],1),a("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#ddd"}})],1),a("v-uni-navigator",{staticClass:"display_flex_bet item",staticStyle:{"margin-bottom":"60rpx"},attrs:{"hover-class":"none",url:"../../staff/staff?type=choose"}},[a("v-uni-view",{staticClass:"display_flex"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v("负责人")]),a("v-uni-text",{staticStyle:{color:"#d93a49","margin-right":"20rpx"}},[e._v("*")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请选择负责人",disabled:"true"},model:{value:e.warehouse_charge,callback:function(t){e.warehouse_charge=t},expression:"warehouse_charge"}})],1),a("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#ddd"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("备注")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入备注"},model:{value:e.warehouse_beizhu,callback:function(t){e.warehouse_beizhu=t},expression:"warehouse_beizhu"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item",staticStyle:{"margin-bottom":"60rpx"}},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("启用")]),a("v-uni-switch",{attrs:{checked:e.disabled},on:{change:function(t){t=e.$handleEvent(t),e.switchChange(t)}}})],1)],1)],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},6931:function(e,t,a){var n=a("77dc");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("10de9ba5",n,!0,{sourceMap:!1,shadowMode:!1})},"77dc":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".uni-status-bar[data-v-0e05f980]{display:block;width:100%;height:20px;height:0}",""])},"7a5e":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.uni-navbar__content[data-v-11835227]{display:block;position:relative;width:100%;background-color:#fff;overflow:hidden;padding:0 %?30?%;width:calc(100% - %?60?%)}.uni-navbar__content uni-view[data-v-11835227]{line-height:%?78?%}.uni-navbar__header[data-v-11835227]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;height:%?78?%;line-height:%?78?%;font-size:%?26?%;font-weight:700;color:#333}.uni-navbar__header-btns[data-v-11835227]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding:0 %?12?%}.uni-navbar__header-btns[data-v-11835227]:first-child{padding-left:0}.uni-navbar__header-btns[data-v-11835227]:last-child{text-align:right}.uni-navbar__header-container[data-v-11835227]{width:100%;margin:0 %?10?%}.uni-navbar__header-container-inner[data-v-11835227]{font-size:%?30?%;text-align:center;padding-right:%?60?%}.uni-navbar__placeholder-view[data-v-11835227]{height:%?88?%}.uni-navbar--fixed[data-v-11835227]{position:fixed;z-index:998}.uni-navbar--shadow[data-v-11835227]{-webkit-box-shadow:0 1px 6px #ccc;box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-11835227]:after{position:absolute;z-index:3;bottom:0;left:0;right:0;height:1px;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}',""])},"89ce":function(e,t,a){"use strict";a.r(t);var n=a("4f00"),i=a("ae75");for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a("e4e6");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"27648374",null);t["default"]=s.exports},"8e11":function(e,t,a){"use strict";a.r(t);var n=a("2b76"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=i.a},"8f52":function(e,t,a){"use strict";a.r(t);var n=a("f1db"),i=a("d5c0");for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a("c47b");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"0e05f980",null);t["default"]=s.exports},a288:function(e,t,a){"use strict";var n=a("1221"),i=a.n(n);i.a},ae75:function(e,t,a){"use strict";a.r(t);var n=a("465c"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=i.a},b92d:function(e,t,a){"use strict";a.r(t);var n=a("4d05"),i=a("8e11");for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a("a288");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"11835227",null);t["default"]=s.exports},c47b:function(e,t,a){"use strict";var n=a("6931"),i=a.n(n);i.a},d5c0:function(e,t,a){"use strict";a.r(t);var n=a("1f15"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=i.a},e4e6:function(e,t,a){"use strict";var n=a("279c"),i=a.n(n);i.a},e601:function(e,t,a){"use strict";(function(t){var n=a("288e"),i=n(a("5d73")),r=n(a("795b")),o=n(a("c74b"));e.exports={upload_image:function(e){return new r.default(function(a,n){var r=uni.getStorageSync("user"),s=[];r.is_vip?uni.chooseImage({count:e,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){t.log(e);var n,r=Date.parse(new Date),u=e.tempFilePaths,l=!0,c=!1,d=void 0;try{for(var f,h=(0,i.default)(u);!(l=(f=h.next()).done);l=!0){var v=f.value;n=o.default.File(r+".jpg",v)}}catch(p){c=!0,d=p}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}n.save().then(function(e){var t=!0,n=!1,r=void 0;try{for(var o,u=(0,i.default)(e);!(t=(o=u.next()).done);t=!0){o.value;s.push(e[0].url)}}catch(p){n=!0,r=p}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}a(s)})}}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})})}}}).call(this,a("5a52")["default"])},f1db:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-status-bar",style:{height:e.statusBarHeight}},[e._t("default")],2)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})}}]);