(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-commonNew-goods_out-out_detail-out_detail"],{"11a5":function(t,e,o){var s=o("24fb");e=s(!1),e.push([t.i,".page[data-v-b95990b0]{color:#4d4d4d;font-size:%?28?%;height:calc(100vh - %?110?%);overflow:scroll}.stockClassItem[data-v-b95990b0]{line-height:%?80?%;font-weight:700}.bottomEle[data-v-b95990b0]{font-weight:700;position:fixed;bottom:0;left:0;width:calc(100% - %?30?%);background:#fafafa;padding:%?20?% %?0?% %?20?% %?30?%}.pro_list[data-v-b95990b0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.pro_listitem[data-v-b95990b0]{background-color:#fff;padding:%?10?% %?20?%;border-bottom:%?1?% solid#ddd}.pro_allmoney[data-v-b95990b0]{background-color:#fff;padding:%?10?% %?20?%;text-align:right;font-size:%?32?%;color:#f30}.beizhu_style[data-v-b95990b0]{text-align:right;width:calc(100% - %?40?%);background-color:#fff;padding:%?10?% 0;max-height:%?100?%}.confrim_button[data-v-b95990b0]{padding:0 %?50?%;background:#1651aa;color:#fff;font-weight:700;font-size:%?32?%;border-radius:unset}",""]),t.exports=e},"34a5":function(t,e,o){"use strict";o.r(e);var s=o("d3d5"),i=o.n(s);for(var a in s)"default"!==a&&function(t){o.d(e,t,(function(){return s[t]}))}(a);e["default"]=i.a},"408a":function(t,e,o){var s=o("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},"5cae":function(t,e,o){"use strict";o.r(e);var s=o("78ea"),i=o("34a5");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("633a");var n,r=o("f0c5"),c=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"b95990b0",null,!1,s["a"],n);e["default"]=c.exports},"633a":function(t,e,o){"use strict";var s=o("b7d4"),i=o.n(s);i.a},"78ea":function(t,e,o){"use strict";var s,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("v-uni-view",{staticClass:"page"},[o("v-uni-view",{staticStyle:{"line-height":"70rpx",padding:"20rpx 20rpx 0",color:"#3D3D3D","font-weight":"bold"}},[t._v("已选产品")]),o("v-uni-view",t._l(t.products,(function(e,s){return o("v-uni-view",{key:s,staticClass:"pro_listitem"},[o("v-uni-view",{staticClass:"pro_list",staticStyle:{color:"#333"}},[o("v-uni-view",{staticStyle:{width:"calc(100% - 200rpx)"}},[t._v("产品："+t._s(e.goodsName))]),o("v-uni-view",[t._v("数量：X"+t._s(e.num))])],1),e.selected_model?o("v-uni-view",t._l(e.selected_model,(function(e,s){return e.num>0?o("v-uni-view",{key:s,staticClass:"display_flex_bet"},[e?o("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999"}},[t._v(t._s(e.custom1.value+e.custom2.value+e.custom3.value+e.custom4.value))]):t._e(),e?o("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#f30"}},[t._v(t._s(e.num))]):t._e()],1):t._e()})),1):t._e(),o("v-uni-view",[o("v-uni-view",[t._v("实际零售价："),o("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("￥"+t._s(e.modify_retailPrice))])],1)],1)],1)})),1),o("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[o("v-uni-view",{staticStyle:{margin:"30rpx 0 0"}},[o("v-uni-view",{staticStyle:{margin:"0 0 10rpx 20rpx",color:"#3D3D3D","font-weight":"bold"}},[t._v("出库明细")]),o("v-uni-view",{staticClass:"kaidan_detail",staticStyle:{"line-height":"70rpx"}},[o("v-uni-navigator",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"},attrs:{"hover-class":"none",url:"/pages/manage/warehouse/warehouse?type=choose"}},[o("v-uni-view",{staticClass:"left_content",staticStyle:{width:"150rpx"}},[t._v("出库仓库"),o("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("*")])],1),o("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-input",{staticStyle:{"text-align":"right","margin-right":"20rpx"},attrs:{placeholder:"请选择要出库的仓库",disabled:"true",value:t.stock.stock_name}}),o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isChooseStockClass=!0}}},[o("v-uni-view",{staticClass:"left_content",staticStyle:{width:"150rpx"}},[t._v("出库类别"),o("v-uni-text",{staticStyle:{color:"#f30"}},[t._v("*")])],1),o("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-input",{staticStyle:{"text-align":"right","margin-right":"20rpx"},attrs:{placeholder:"请选择要出库类别",disabled:"true",value:t.stockClass}}),o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",{staticStyle:{width:"140rpx"}},[t._v("出库时间")]),o("v-uni-picker",{attrs:{mode:"date",value:t.nowDay,end:t.nowDay},on:{change:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[o("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[t._v(t._s(t.nowDay.split(" ")[0]))]),o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",{staticStyle:{width:"140rpx"}},[t._v("备注")]),o("v-uni-input",{staticClass:"beizhu_style",attrs:{placeholder:"请输入备注",name:"input_beizhu"}})],1)],1)],1),o("v-uni-view",{staticStyle:{background:"#fff",padding:"10rpx 20rpx"}},[o("v-uni-view",{staticClass:"notice_text"},[t._v("上传凭证图(会员可用)")]),o("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[o("v-uni-view",{staticClass:"upload_image display_flex"},[t._l(t.Images,(function(e,s){return t.Images&&t.Images.length>0?o("v-uni-view",{key:s,staticStyle:{position:"relative"}},[o("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx","margin-right":"10rpx"},attrs:{src:e}}),o("fa-icon",{staticStyle:{position:"absolute",top:"-10rpx",right:"-10rpx"},attrs:{type:"times-circle-o",size:"20",color:"#426ab3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeImg(s)}}})],1):t._e()})),t.Images.length<3?o("v-uni-view",{staticStyle:{width:"180rpx",height:"180rpx","line-height":"220rpx","text-align":"center",border:"1rpx solid#ccc","border-radius":"16rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload_image.apply(void 0,arguments)}}},[o("fa-icon",{attrs:{type:"plus-square-o",size:"40",color:"#426ab3"}})],1):t._e()],2)],1)],1),o("v-uni-view",{staticClass:"bottomEle display_flex_bet",staticStyle:{padding:"0 30rpx"}},[o("v-uni-view",[o("v-uni-view",[t._v("合计：￥"+t._s(t.all_money))]),o("v-uni-view",[t._v("总数："+t._s(t.total_num))])],1),o("v-uni-view",{staticClass:"display_flex"},[o("v-uni-button",{staticClass:"confrim_button",attrs:{disabled:t.button_disabled,"form-type":"submit","data-type":"2"}},[t._v("出库")])],1)],1)],1)],1),t.isChooseStockClass?o("v-uni-view",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"10",width:"calc(100% - 60rpx)",height:"100vh",background:"#fff","line-height":"60rpx",padding:"20rpx 30rpx"}},[o("v-uni-view",{staticStyle:{"text-align":"right"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isChooseStockClass=!1}}},[o("fa-icon",{attrs:{type:"times-circle-o",size:"20",color:"#426ab3"}})],1),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("借用出库")}}},[t._v("借用出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("领料出库")}}},[t._v("领料出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("零售出库")}}},[t._v("零售出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("盘点出库")}}},[t._v("盘点出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("报损出库")}}},[t._v("报损出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("调拨出库")}}},[t._v("调拨出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("网点发货出库")}}},[t._v("网点发货出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("加工成品出库")}}},[t._v("加工成品出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("委外出库")}}},[t._v("委外出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("返修出库")}}},[t._v("返修出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("批发出库")}}},[t._v("批发出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("归还出库")}}},[t._v("归还出库")]),o("v-uni-view",{staticClass:"borderBot stockClassItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseStockClass("其他出库")}}},[t._v("其他出库")])],1):t._e()],1)},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return s}))},"9f50":function(t,e,o){"use strict";(function(t){var s=o("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(o("9546")),a={sendTempMini:function(t,e){if("enter"==e){var o={thing1:{value:t.goodsName+"...等",color:"#173177"},number2:{value:t.total_num,color:"#173177"},name3:{value:uni.getStorageSync("user").nickName},date4:{value:t.createdAt}};o.id=t.operationId,this.send_in_mini(o)}else if("out"==e){var s={thing1:{value:t.goodsName+"...等",color:"#173177"},number2:{value:t.total_num,color:"#173177"},name3:{value:uni.getStorageSync("user").nickName},time4:{value:t.createdAt}};s.id=t.operationId,this.send_out_mini(s)}},send_in:function(e){var o=uni.getStorageSync("setting").wx_openid;uni.request({url:"https://www.jimuzhou.com/api/send_temp.php",method:"POST",data:{openid:o,frist:e.frist,data1:e.data1,data2:e.data2,remark:e.remark,url:e.url,type:"in"},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.log(e)}})},send_in_noconfrim:function(e){var o=uni.getStorageSync("setting").wx_openid;uni.request({url:"https://www.jimuzhou.com/api/send_temp.php",method:"POST",data:{openid:o,frist:e.frist,data1:e.data1,data2:e.data2,data3:e.data3,data4:e.data4,remark:e.remark,url:e.url,type:"in_noconfrim"},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.log(e)}})},send_in_mini:function(e){var o={touser:uni.getStorageSync("openid"),template_id:"G2UJEDEyAtGuBdO-Yv96yBi-UnTLhaInr-KzEXqZ-48",page:"/pages/report/EnteringHistory/detail/detail?id="+e.id,data:e,emphasis_keyword:""};i.default.sendWeAppMessage(o).then((function(e){t.log(e)})).catch((function(e){t.log(e)}))},send_out_mini:function(e){var o={touser:uni.getStorageSync("openid"),template_id:"BKT2_0OuWF3mLZGvFmpRzWFa_Dyr4EIppl_LFF1uRLE",page:"/pages/report/EnteringHistory/detail/detail?id="+e.id,data:e,emphasis_keyword:""};i.default.sendWeAppMessage(o).then((function(e){t.log(e)})).catch((function(e){t.log(e)}))},send_temp:function(e){var o=uni.getStorageSync("setting").wx_openid;uni.request({url:"https://www.jimuzhou.com/api/send_temp.php",method:"POST",data:{openid:o,data1:e.data1,data2:e.data2,data3:e.data3,data4:e.data4,remark:"备注:"+e.remark,url:e.url,type:"out"},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.log(e)}})}};e.default=a}).call(this,o("5a52")["default"])},a2fc:function(t,e,o){"use strict";(function(t){var s=o("ee27");o("7db0"),o("a9e3"),o("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(o("54f8")),a=s(o("9546")),n={delete_goods:function(e){return new Promise((function(o,s){var n,r=0,c=(0,i.default)(e);try{for(c.s();!(n=c.n()).done;){var l=n.value,u=a.default.Query("Goods");u.destroy(l.objectId).then((function(t){r+=1,r==e.length&&o(!0)})).catch((function(e){t.log(e)}))}}catch(d){c.e(d)}finally{c.f()}}))},upload_good_withNoCan:function(e,o){return new Promise((function(s,i){var n=uni.getStorageSync("uid"),r=a.default.Pointer("_User"),c=r.set(n),l=e.reserve,u=a.default.Pointer("stocks"),d=u.set(o.objectId),f=a.default.Query("Goods");f.equalTo("userId","==",n),f.equalTo("goodsName","==",e.goodsName),f.equalTo("stocks","==",o.objectId),f.find().then((function(o){if(t.log(o),o.length>=1)s([!1,"该商品存在此店仓中"]);else{var i=a.default.Query("Goods");if(i.set("goodsName",e.goodsName),i.set("goodsIcon",e.goodsIcon),i.set("costPrice",e.costPrice),i.set("retailPrice",e.retailPrice),i.set("reserve",Number(e.reserve)),i.set("productCode",e.productCode?e.productCode:""),i.set("stocks",d),i.set("product_info",e.product_info?e.product_info:""),i.set("producer",e.producer?e.producer:""),i.set("packingUnit",e.packingUnit?e.packingUnit:""),i.set("packageContent",e.packageContent?e.packageContent:""),i.set("warning_num",Number(e.warning_num?e.warning_num:0)),i.set("stocktype",Number(e.warning_num?e.warning_num:0)>=Number(l)?0:1),e.second_class){var n=a.default.Pointer("class_user"),r=n.set(e.goodsClass);i.set("second_class",f);var u=a.default.Pointer("second_class"),f=u.set(e.second_class);i.set("goodsClass",r)}i.set("userId",c),i.save().then((function(e){t.log(e),s([!0,e])})).catch((function(e){t.log(e)}))}}))}))},upload_good:function(e){return new Promise((function(o,s){var i=JSON.parse(localStorage.getItem("bmob")).objectId,n=a.default.Pointer("_User"),r=n.set(i),c=a.default.Pointer("class_user"),l=c.set(e.goodsClass),u=a.default.Pointer("second_class"),d=u.set(e.second_class),f=a.default.Query("Goods");f.equalTo("userId","==",i),f.equalTo("goodsName","==",e.goodsName),f.equalTo("position","==",e.position),f.equalTo("stocks","==",e.stocks),f.find().then((function(s){if(t.log(s),s.length>=1)o([!1,s]);else{var i=e.reserve,n=a.default.Pointer("stocks"),c=n.set(e.stocks),u=a.default.Query("Goods");u.set("goodsName",e.goodsName),u.set("goodsIcon",e.goodsIcon),u.set("costPrice",e.costPrice),u.set("retailPrice",e.retailPrice),u.set("producttime",e.producttime),u.set("nousetime",e.nousetime),u.set("regNumber",e.regNumber),u.set("reserve",Number(e.reserve)),u.set("productCode",e.productCode),u.set("stocks",c),u.set("product_info",e.product_info),u.set("producer",e.producer),u.set("packingUnit",e.packingUnit),u.set("packageContent",e.packageContent),u.set("warning_num",Number(e.warning_num)),u.set("stocktype",Number(e.warning_num)>=Number(i)?0:1),u.set("second_class",d),u.set("goodsClass",l),u.set("userId",r),u.save().then((function(e){t.log(e),o([!0,e])})).catch((function(e){t.log(e)}))}}))}))},get_fristclass:function(){var t=JSON.parse(localStorage.getItem("bmob")).objectId;return new Promise((function(e,o){var s=a.default.Query("class_user");s.equalTo("parent","==",t),s.find().then((function(t){localStorage.setItem("frist_class",JSON.stringify(t)),e(t)}))}))},get_secondclass:function(t){return new Promise((function(e,o){var s=a.default.Query("class_user");s.field("second",t),s.relation("second_class").then((function(t){e(t.results)}))}))},getstock_list:function(t){var e=JSON.parse(localStorage.getItem("bmob")).objectId;return new Promise((function(o,s){var i=a.default.Query("stocks");i.order("-num"),i.include("charge","shop"),i.equalTo("parent","==",e),t&&i.equalTo("stock_name","==",{$regex:t+".*"}),i.limit(500),i.find().then((function(t){localStorage.setItem("stocks",JSON.stringify(t)),o(t)}))}))}};e.default=n}).call(this,o("5a52")["default"])},b6802:function(t,e,o){"use strict";var s=o("23e7"),i=o("a691"),a=o("408a"),n=o("1148"),r=o("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,o){return 0===e?o:e%2===1?u(t,e-1,o*t):u(t*t,e/2,o)},d=function(t){var e=0,o=t;while(o>=4096)e+=12,o/=4096;while(o>=2)e+=1,o/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));s({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,o,s,r,c=a(this),f=i(t),p=[0,0,0,0,0,0],v="",m="0",g=function(t,e){var o=-1,s=e;while(++o<6)s+=t*p[o],p[o]=s%1e7,s=l(s/1e7)},h=function(t){var e=6,o=0;while(--e>=0)o+=p[e],p[e]=l(o/t),o=o%t*1e7},_=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var o=String(p[t]);e=""===e?o:e+n.call("0",7-o.length)+o}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,o=e<0?c*u(2,-e,1):c/u(2,e,1),o*=4503599627370496,e=52-e,e>0){g(0,o),s=f;while(s>=7)g(1e7,0),s-=7;g(u(10,s,1),0),s=e-1;while(s>=23)h(1<<23),s-=23;h(1<<s),g(1,1),h(2),m=_()}else g(0,o),g(1<<-e,0),m=_()+n.call("0",f);return f>0?(r=m.length,m=v+(r<=f?"0."+n.call("0",f-r)+m:m.slice(0,r-f)+"."+m.slice(r-f))):m=v+m,m}})},b7d4:function(t,e,o){var s=o("11a5");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=o("4f06").default;i("2d23cb6e",s,!0,{sourceMap:!1,shadowMode:!1})},d3d5:function(t,e,o){"use strict";(function(t){var s=o("ee27");o("a15b"),o("a434"),o("a9e3"),o("b6802"),o("d3b7"),o("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a,n=s(o("54f8")),r=s(o("9546")),c=s(o("7fd5")),l=(s(o("9f50")),s(o("856d")),s(o("a2fc")),{data:function(){return{user:uni.getStorageSync("user"),identity:uni.getStorageSync("identity"),othercurrent:"",Images:[],stock:"",products:null,button_disabled:!1,beizhu_text:"",real_money:0,really_total_money:0,all_money:0,total_num:0,nowDay:c.default.getDay(0,!0),stockClass:"销售出库",isChooseStockClass:!1}},onLoad:function(){a=this,i=uni.getStorageSync("uid"),this.products=uni.getStorageSync("products");for(var t=0;t<this.products.length;t++)this.all_money=Number((this.products[t].total_money+this.all_money).toFixed(2)),this.really_total_money=Number((this.products[t].really_total_money+this.really_total_money).toFixed(2)),this.total_num+=Number(this.products[t].num);this.real_money=Number(this.all_money.toFixed(2))},onShow:function(){a.stock=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:""},methods:{bindDateChange:function(t){a.nowDay=t.detail.value+" 00:00:00"},chooseStockClass:function(t){a.stockClass=t,a.isChooseStockClass=!1},removeImg:function(t){a.Images.splice(t,1),a.Images=a.Images},upload_image:function(){a.user.is_vip?uni.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){t.log(e);var o,s,i=Date.parse(new Date),c=e.tempFilePaths,l=(0,n.default)(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;o=r.default.File(i+".jpg",u)}}catch(d){l.e(d)}finally{l.f()}o.save().then((function(t){var e,o=(0,n.default)(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;a.Images.push(s.url)}}catch(d){o.e(d)}finally{o.f()}}))}}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})},formSubmit:function(e){if(!this.button_disabled)if(null!=a.stock&&""!=a.stock&&void 0!=a.stock){uni.getStorageSync("identity");this.button_disabled=!0;var o=2;e.detail.formId;uni.showLoading({title:"请勿退出..."});for(var s=new Array,n=[],l=[],u=[],d=[],f=0;f<this.products.length;f++){var p=Number(this.products[f].reserve)-this.products[f].num;d.push(this.products[f].goodsName);var v=r.default.Query("Bills"),m={},g=r.default.Pointer("_User"),h=g.set(i),_=r.default.Pointer("_User"),y=_.set(uni.getStorageSync("masterId")),b=r.default.Pointer("Goods"),w=b.set(this.products[f].header?this.products[f].header.objectId:this.products[f].objectId);if(uni.getStorageSync("custom")){var k=r.default.Pointer("customs"),S=k.set(uni.getStorageSync("custom").objectId);v.set("custom",S)}v.set("goodsName",this.products[f].goodsName),v.set("retailPrice",this.products[f].modify_retailPrice.toString()),v.set("num",Number(this.products[f].num)),v.set("total_money",this.products[f].total_money),v.set("really_total_money",this.products[f].really_total_money),v.set("goodsId",w),v.set("userId",h),v.set("type",-1),v.set("extra_type",o),v.set("opreater",y),v.set("status",!0),v.set("createdTime",{__type:"Date",iso:a.nowDay});var x={};if(a.stock&&a.stock.objectId){var C=r.default.Pointer("stocks"),I=C.set(a.stock.objectId);v.set("stock",I),m.stock=a.stock.stock_name,l.push(a.stock.objectId),u.push(a.stock.stock_name)}m.goodsName=this.products[f].goodsName,m.modify_retailPrice=this.products[f].modify_retailPrice.toString(),m.retailPrice=this.products[f].retailPrice,m.total_money=this.products[f].total_money,x.costPrice=this.products[f].costPrice,x.retailPrice=this.products[f].retailPrice,x.objectId=this.products[f].objectId,x.reserve=p,this.products[f].selectd_model&&(x.selected_model=this.products[f].selected_model,x.models=this.products[f].models),m.goodsId=x,m.type=-1,m.num=this.products[f].num,m.warning_num=this.products[f].warning_num,m.packingUnit=this.products[f].packingUnit,s.push(v),n.push(m)}r.default.Query("Bills").saveAll(s).then((function(t){for(var s=[],f=0;f<t.length;f++)s.push(t[f].success.objectId);var p=r.default.Pointer("_User"),v=p.set(i),m=uni.getStorageSync("masterId"),g=r.default.Pointer("_User"),h=g.set(m),_=r.default.Query("order_opreations");_.set("detail",n),_.set("bills",s),_.set("beizhu",e.detail.value.input_beizhu),_.set("type",-1),_.set("extra_type",o),_.set("opreater",h),_.set("stockClass",a.stockClass),_.set("stockIds",l),_.set("stockNames",u),_.set("master",v),_.set("real_num",a.total_num),_.set("goodsName",d.join(",")),_.set("real_money",Number(a.real_money)),_.set("debt",a.all_money-Number(a.real_money)),_.set("all_money",a.all_money),_.set("Images",a.Images),_.set("status",!0),_.set("createdTime",{__type:"Date",iso:a.nowDay}),_.save().then((function(t){var e=t.objectId;t.createdAt;c.default.outRedGoodNumNew(a.products).then((function(t){uni.showToast({title:"出库成功"}),uni.hideLoading(),uni.setStorageSync("is_option",!0),uni.removeStorageSync("_warehouse"),uni.removeStorageSync("out_warehouse"),uni.removeStorageSync("category"),uni.removeStorageSync("warehouse"),setTimeout((function(){a.button_disabled=!1,c.default.log(uni.getStorageSync("user").nickName+"出库了'"+a.products[0].goodsName+"'等"+a.products.length+"商品",-1,e),uni.navigateBack({delta:2})}),500)}))}))}),(function(e){t.log("异常处理")}))}else uni.showToast({icon:"none",title:"请选择出库仓库"})},sendTemp:function(){}}});e.default=l}).call(this,o("5a52")["default"])}}]);