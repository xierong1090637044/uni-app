(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-staffChart-staffChart"],{"24f8":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.frist[data-v-463dcb1b]{border-bottom:%?1?% solid #f7f7f7;padding:%?10?% 0}.frist .item[data-v-463dcb1b]{text-align:center;width:100%;color:#999}.select[data-v-463dcb1b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% %?30?%;margin-bottom:%?20?%;border-bottom:%?1?% solid #f7f7f7}.select .section[data-v-463dcb1b]{width:50%;text-align:center}.staff_name[data-v-463dcb1b]{font-weight:700;font-size:%?30?%;color:#3d3d3d;margin-bottom:%?4?%}.staff_mobile[data-v-463dcb1b]{color:#999}.right_item[data-v-463dcb1b]{width:100%;border-bottom:%?1?% solid #ccc}.staff_avatar[data-v-463dcb1b]{width:%?100?%;height:%?70?%;margin-right:%?20?%}.content[data-v-463dcb1b]{padding:%?10?% %?30?%;border-bottom:%?1?% solid #f7f7f7}',""])},"5f7d":function(e,t,a){"use strict";a.r(t);var r=a("a0b25"),n=a("7101");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("afdf");var i=a("f0c5"),u=Object(i["a"])(n["default"],r["a"],r["b"],!1,null,"463dcb1b",null);t["default"]=u.exports},7101:function(e,t,a){"use strict";a.r(t);var r=a("7f6a"),n=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,function(){return r[e]})}(o);t["default"]=n.a},"7f6a":function(e,t,a){"use strict";(function(e){var r=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("5d73"));a("7514"),a("28a5");var o,i,u=r(a("9546")),d=r(a("7fd5")),l={data:function(){return{start_date:d.default.getDay(0,!0),end_date:d.default.getDay(1,!0),start_date_desc:"",end_date_desc:"",headerData:{data1:0,data2:0,data3:0},opreaterList:[]}},onLoad:function(){i=this,o=uni.getStorageSync("uid"),i.start_date_desc=i.start_date.split(" ")[0],i.end_date_desc=i.end_date.split(" ")[0],i.getdetail()},methods:{StorageSync:function(e){uni.setStorageSync("staff",e)},bindDate_startChange:function(t){e.log(t),i.start_date=t.detail.value+" 00:00:00",i.getdetail()},bindDate_endChange:function(t){e.log(t),i.end_date=t.detail.value+" 00:00:00",i.getdetail()},getdetail:function(){uni.showLoading({title:"加载中..."});var t=u.default.Query("_User"),a=t.equalTo("objectId","==",o),r=t.equalTo("masterId","==",o);t.or(a,r),t.find().then(function(t){e.log(t);var a=t,r=0,d=!0,l=!1,s=void 0;try{for(var c,f=function(){var e=c.value,t=u.default.Query("order_opreations");t.equalTo("master","==",o),t.equalTo("opreater","==",e.objectId),t.equalTo("type","==",-1),t.equalTo("status","==",!0),t.equalTo("extra_type","==",1),t.equalTo("createdAt",">=",i.start_date),t.equalTo("createdAt","<=",i.end_date),t.count().then(function(o){var u=o;if(r+=1,0==u)e.sellNum=0,e.sellPrice=0,r==a.length&&(i.opreaterList=a,uni.hideLoading());else for(var d=0;d<Math.ceil(u/500);d++)t.limit(500),t.skip(500*d),t.find().then(function(t){e.sellNum=t.length>0?t.length:0,e.sellPrice=0;var o=!0,u=!1,d=void 0;try{for(var l,s=(0,n.default)(t);!(o=(l=s.next()).done);o=!0){var c=l.value;e.sellPrice+=c.all_money}}catch(f){u=!0,d=f}finally{try{o||null==s.return||s.return()}finally{if(u)throw d}}r==a.length&&(i.opreaterList=a,uni.hideLoading())})})},v=(0,n.default)(a);!(d=(c=v.next()).done);d=!0)f()}catch(g){l=!0,s=g}finally{try{d||null==v.return||v.return()}finally{if(l)throw s}}i.getheaderData()})},getheaderData:function(){i.headerData={data1:0,data2:0,data3:0};var e=u.default.Query("order_opreations");e.equalTo("master","==",o),e.equalTo("type","==",-1),e.equalTo("status","==",!0),e.equalTo("extra_type","==",1),e.equalTo("createdAt",">=",i.start_date),e.equalTo("createdAt","<=",i.end_date),e.limit(500),e.count().then(function(t){for(var a=t,r=0;r<Math.ceil(a/500);r++)e.limit(500),e.skip(500*r),e.find().then(function(e){var t=!0,a=!1,r=void 0;try{for(var o,u=(0,n.default)(e);!(t=(o=u.next()).done);t=!0){var d=o.value;i.headerData.data1+=d.all_money?d.all_money:0,i.headerData.data2+=d.profit?d.profit:0}}catch(l){a=!0,r=l}finally{try{t||null==u.return||u.return()}finally{if(a)throw r}}i.headerData.data3+=e.length})})}}};t.default=l}).call(this,a("5a52")["default"])},"7fd5":function(e,t,a){"use strict";(function(t){var r=a("288e");a("6b54"),a("7514");var n=r(a("5d73"));a("c5f6");var o=r(a("795b")),i=r(a("9546"));e.exports={enterAddGoodNum:function(e){var a=this;return new o.default(function(r,o){for(var u=function(o){var u=0,d=i.default.Query("Goods");d.get(e[o].objectId).then(function(l){var s=l;if(e[o].selectd_model){var c=!0,f=!1,v=void 0;try{for(var g,h=(0,n.default)(e[o].selected_model);!(c=(g=h.next()).done);c=!0){var m=g.value,y=!0,b=!1,_=void 0;try{for(var p,w=(0,n.default)(s.models);!(y=(p=w.next()).done);y=!0){var S=p.value;S.id==m.id&&(S.reserve=Number(S.reserve)+Number(m.num)),delete S.num}}catch(N){b=!0,_=N}finally{try{y||null==w.return||w.return()}finally{if(b)throw _}}}}catch(N){f=!0,v=N}finally{try{c||null==h.return||h.return()}finally{if(f)throw v}}u=Number(s.reserve)+Number(e[o].num),d.set("models",s.models)}else u=Number(s.reserve)+Number(e[o].num);d.set("reserve",u),d.set("id",e[o].objectId),d.save().then(function(n){if(e[o].header){var u=i.default.Query("Goods");u.equalTo("header","==",e[o].header.objectId),u.equalTo("order","==",1),u.statTo("sum","reserve"),u.find().then(function(n){t.log("dasds",n);var u=n[0]._sumReserve,d=i.default.Query("Goods");d.set("reserve",u),d.set("id",e[o].header.objectId),d.save().then(function(t){a.modifyStockType(e[o].header.objectId),o==e.length-1&&r(!0)})})}else a.modifyStockType(e[o].objectId),o==e.length-1&&r(!0)}).catch(function(e){t.log(e)})})},d=0;d<e.length;d++)u(d)})},outRedGoodNum:function(e){var a=this;return new o.default(function(r,o){for(var u=function(o){var u=0,d=i.default.Query("Goods");d.get(e[o].objectId).then(function(l){var s=l;if(e[o].selectd_model){var c=!0,f=!1,v=void 0;try{for(var g,h=(0,n.default)(e[o].selected_model);!(c=(g=h.next()).done);c=!0){var m=g.value,y=!0,b=!1,_=void 0;try{for(var p,w=(0,n.default)(s.models);!(y=(p=w.next()).done);y=!0){var S=p.value;u+=Number(S.reserve),S.id==m.id&&(S.reserve=Number(S.reserve)-Number(m.num)),delete S.num}}catch(N){b=!0,_=N}finally{try{y||null==w.return||w.return()}finally{if(b)throw _}}}}catch(N){f=!0,v=N}finally{try{c||null==h.return||h.return()}finally{if(f)throw v}}u=Number(s.reserve)-Number(e[o].num),d.set("models",s.models)}else u=Number(s.reserve)-Number(e[o].num);d.set("reserve",u),d.set("id",e[o].objectId),d.save().then(function(t){if(e[o].header){var n=i.default.Query("Goods");n.equalTo("header","==",e[o].header.objectId),n.equalTo("order","==",1),n.statTo("sum","reserve"),n.find().then(function(t){var n=t[0]._sumReserve,u=i.default.Query("Goods");u.set("reserve",n),u.set("id",e[o].header.objectId),u.save().then(function(t){a.modifyStockType(e[o].header.objectId),o==e.length-1&&r(!0)})})}else a.modifyStockType(e[o].objectId),o==e.length-1&&r(!0)}).catch(function(e){t.log(e)})})},d=0;d<e.length;d++)u(d)})},enterAddGoodNumNew:function(e){var a=this;return new o.default(function(r,o){for(var u=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",d=uni.getStorageSync("uid"),l=function(o){var l=0,s=i.default.Query("Goods");s.get(e[o].objectId).then(function(s){if(e[o].selectd_model){var c=!0,f=!1,v=void 0;try{for(var g,h=(0,n.default)(e[o].selected_model);!(c=(g=h.next()).done);c=!0){var m=g.value,y=!0,b=!1,_=void 0;try{for(var p,w=(0,n.default)(e[o].models);!(y=(p=w.next()).done);y=!0){var S=p.value;S.id==m.id&&(S.reserve=Number(S.reserve)+Number(m.num)),delete S.num}}catch(x){b=!0,_=x}finally{try{y||null==w.return||w.return()}finally{if(b)throw _}}}}catch(x){f=!0,v=x}finally{try{c||null==h.return||h.return()}finally{if(f)throw v}}l=Number(e[o].reserve)+Number(e[o].num),s.set("models",e[o].models)}else l=Number(e[o].reserve)+Number(e[o].num);s.set("reserve",l),s.save();var N=i.default.Query("Goods");N.equalTo("userId","==",d),N.equalTo("header","==",e[o].objectId),N.equalTo("stocks","==",u.objectId),N.find().then(function(n){if(0==n.length)a.upload_good_withNoCan(e[o],u,Number(e[o].num)).then(function(a){t.log(a),o==e.length-1&&r(!0)});else{var d=i.default.Query("Goods");d.set("id",n[0].objectId),d.set("reserve",n[0].reserve+Number(e[o].num)),d.save().then(function(a){t.log(a),o==e.length-1&&r(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},s=0;s<e.length;s++)l(s)})},outRedGoodNumNew:function(e){var a=this;return new o.default(function(r,o){for(var u=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",d=uni.getStorageSync("uid"),l=function(o){var l=0,s=i.default.Query("Goods");s.get(e[o].objectId).then(function(s){if(e[o].selectd_model){var c=!0,f=!1,v=void 0;try{for(var g,h=(0,n.default)(e[o].selected_model);!(c=(g=h.next()).done);c=!0){var m=g.value,y=!0,b=!1,_=void 0;try{for(var p,w=(0,n.default)(e[o].models);!(y=(p=w.next()).done);y=!0){var S=p.value;S.id==m.id&&(S.reserve=Number(S.reserve)-Number(m.num)),delete S.num}}catch(x){b=!0,_=x}finally{try{y||null==w.return||w.return()}finally{if(b)throw _}}}}catch(x){f=!0,v=x}finally{try{c||null==h.return||h.return()}finally{if(f)throw v}}l=Number(e[o].reserve)-Number(e[o].num),s.set("models",e[o].models)}else l=Number(e[o].reserve)-Number(e[o].num);s.set("reserve",l),s.save();var N=i.default.Query("Goods");N.equalTo("userId","==",d),N.equalTo("header","==",e[o].objectId),N.equalTo("stocks","==",u.objectId),N.find().then(function(n){if(0==n.length)a.upload_good_withNoCan(e[o],u,Number(e[o].num),"out").then(function(a){t.log(a),o==e.length-1&&r(!0)});else{var d=i.default.Query("Goods");d.set("id",n[0].objectId),d.set("reserve",n[0].reserve-Number(e[o].num)),d.save().then(function(a){t.log(a),o==e.length-1&&r(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},s=0;s<e.length;s++)l(s)})},upload_good_withNoCan:function(e,a,r,u){return new o.default(function(o,d){var l=uni.getStorageSync("uid"),s=i.default.Pointer("_User"),c=s.set(l),f=i.default.Pointer("stocks"),v=f.set(a.objectId),g=i.default.Pointer("Goods"),h="";h=e.header?g.set(e.header.objectId):g.set(e.objectId);var m=i.default.Query("Goods");if(m.set("goodsName",e.goodsName),m.set("goodsIcon",e.goodsIcon),"out"==u){if(m.set("reserve",0-Number(r)),e.goodsId&&e.goodsId.models){var y=!0,b=!1,_=void 0;try{for(var p,w=(0,n.default)(e.goodsId.models);!(y=(p=w.next()).done);y=!0){var S=p.value;S.reserve=0-Number(S.num)}}catch(P){b=!0,_=P}finally{try{y||null==w.return||w.return()}finally{if(b)throw _}}m.set("models",e.goodsId.models)}}else if("allocation"==u){if(m.set("reserve",Number(r)),e.selected_model&&e.selected_model.length>0){var N=!0,x=!1,I=void 0;try{for(var k,T=(0,n.default)(e.selected_model);!(N=(k=T.next()).done);N=!0){var j=k.value;j.reserve=Number(j.num),delete j.num}}catch(P){x=!0,I=P}finally{try{N||null==T.return||T.return()}finally{if(x)throw I}}m.set("models",e.selected_model)}}else if(m.set("reserve",Number(r)),e.goodsId&&e.goodsId.models){var D=!0,q=!1,C=void 0;try{for(var Q,G=(0,n.default)(e.goodsId.models);!(D=(Q=G.next()).done);D=!0){var F=Q.value;F.reserve=Number(F.num)}}catch(P){q=!0,C=P}finally{try{D||null==G.return||G.return()}finally{if(q)throw C}}m.set("models",e.goodsId.models)}m.set("stocks",v),m.set("userId",c),m.set("header",h),m.set("costPrice",""+e.costPrice),m.set("retailPrice",""+e.retailPrice),m.set("order",1),m.save().then(function(e){t.log(e),o([!0,e])}).catch(function(e){t.log(e)})})},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,a,r){var n=i.default.Pointer("_User"),o=n.set(uni.getStorageSync("uid"));if(-2==a){var u=i.default.Pointer("Goods"),d=u.set(r),l=i.default.Query("logs");l.equalTo("goodId","==",r),l.find().then(function(r){if(0==r.length){var n=i.default.Query("logs");n.set("parent",o),n.set("goodId",d),n.set("log",e),n.set("type",a),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}})}else{var s=i.default.Query("logs");s.set("parent",o),s.set("log",e),s.set("detail_id",r),s.set("type",a),s.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},modifyStockType:function(e){var a=this,r=i.default.Query("Goods");r.get(e).then(function(e){var t=e;""==t.warning_num&&""==t.max_num?e.set("stocktype",1):void 0==t.warning_num&&void 0==t.max_num?e.set("stocktype",1):null==t.warning_num&&null==t.max_num?e.set("stocktype",1):(""!=t.warning_num&&(t.warning_num>=t.reserve?(e.set("stocktype",0),a.log(t.goodsName+"已经超过设置的最小库存值"+t.warning_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1)),""!=t.max_num&&(t.max_num<=t.reserve?(e.set("stocktype",2),a.log(t.goodsName+"已经超过设置的最大库存值"+t.max_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1))),e.save()}).catch(function(e){t.log(e)})},record_shopOut:function(e,a){t.log(e,a);var r=i.default.Query("shops");r.set("id",e),r.set("have_out",a),r.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var a=i.default.Query("_User");a.set("id",uni.getStorageSync("user").objectId),a.set("have_out",Number(e)+uni.getStorageSync("user").have_out),a.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var a=i.default.Query("Goods");a.equalTo("userId","==",e),a.find().then(function(e){t.log(e);var a=!0,r=!1,o=void 0;try{for(var i,u=(0,n.default)(e);!(a=(i=u.next()).done);a=!0){var d=i.value;t.log(d),Number(d.costPrice)*d.reserve,d.reserve}}catch(l){r=!0,o=l}finally{try{a||null==u.return||u.return()}finally{if(r)throw o}}})},getDay:function(e,t){var a=this,r=new Date,n=r.getTime()+864e5*e;r.setTime(n);var o=r.getFullYear(),i=r.getMonth(),u=r.getDate();return i=a.handleMonth(i+1),u=a.handleMonth(u),t?o+"-"+i+"-"+u+" 00:00:00":o+"-"+i+"-"+u},js_date_time:function(e,t){var a=new Date(e),r=a.getFullYear(),n=a.getMonth()+1;n=n<10?"0"+n:n;var o=a.getDate();o=o<10?"0"+o:o;var i=a.getHours();i=i<10?"0"+i:i;var u=a.getMinutes(),d=a.getSeconds();return u=u<10?"0"+u:u,d=d<10?"0"+d:d,t?r+"-"+n+"-"+o+" "+i+":"+u:r+"-"+n+"-"+o},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,a("5a52")["default"])},a0b25:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticStyle:{height:"100vh",background:"#FFFFFF"}},[a("v-uni-view",{staticClass:"select"},[a("v-uni-view",{staticClass:"section",staticStyle:{"border-right":"1rpx solid#DDDDDD"}},[a("v-uni-picker",{attrs:{mode:"date",end:e.start_date_desc},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDate_startChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.start_date.split(" ")[0]))]),a("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1),a("v-uni-view",{staticClass:"section"},[a("v-uni-picker",{attrs:{mode:"date",end:e.end_date_desc},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDate_endChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.end_date.split(" ")[0]))]),a("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"display_flex_bet frist"},[a("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#F7F7F7"}},[a("v-uni-view",[e._v("销售额")]),a("v-uni-view",{staticStyle:{color:"#333"}},[e._v("￥"+e._s(e.headerData.data1))])],1),a("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#F7F7F7"}},[a("v-uni-view",[e._v("销售毛利")]),a("v-uni-view",{staticStyle:{color:"#333"}},[e._v("￥"+e._s(e.headerData.data2))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",[e._v("销售笔数")]),a("v-uni-view",{staticStyle:{color:"#333"}},[e._v(e._s(e.headerData.data3))])],1)],1),a("v-uni-scroll-view",{staticStyle:{height:"calc(100vh - 234rpx)"},attrs:{"scroll-y":"true"}},[a("v-uni-view",{staticStyle:{padding:"20rpx","border-bottom":"1rpx solid#F7F7F7"}},[e._v("销售排行")]),e._l(e.opreaterList,function(t,r){return a("v-uni-navigator",{key:r,attrs:{"hover-class":"none",url:"/pages/manage/staff/detail/detail?start_date="+e.start_date+"&end_date="+e.end_date},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.StorageSync(t)}}},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"display_flex_bet"},[a("v-uni-view",{staticClass:"display_flex"},[a("fa-icon",{staticStyle:{"margin-right":"20rpx"},attrs:{type:"user-circle",size:"30",color:"#426ab3"}}),a("v-uni-view",[a("v-uni-view",{staticClass:"staff_name"},[e._v(e._s(t.nickName))]),a("v-uni-view",{staticClass:"staff_mobile display_flex"},[a("v-uni-view",[e._v("销售笔数 "+e._s(t.sellNum))]),a("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[e._v("销售额 "+e._s(t.sellPrice))])],1)],1)],1),a("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1)})],2)],1)},n=[];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},afdf:function(e,t,a){"use strict";var r=a("edc4"),n=a.n(r);n.a},edc4:function(e,t,a){var r=a("24f8");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("4f06").default;n("6d4a4a57",r,!0,{sourceMap:!1,shadowMode:!1})}}]);