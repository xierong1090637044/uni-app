(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-home_page-home_page"],{"02a8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"UniPopup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(e){this.offsetTop=e?44:0}},created:function(){var e=0;e=this.h5Top?0:44,this.offsetTop=e},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};t.default=i},"27af":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".modal_confrimbutton[data-v-f310b576]{background:#426ab3;color:#fff;width:60%;padding:%?10?% 0;text-align:center;margin-left:20%;border-radius:%?8?%;margin-top:%?30?%}.avatar[data-v-f310b576]{width:%?100?%;height:%?100?%;border-radius:50%}.thumb_background[data-v-f310b576]{width:%?100?%;height:%?100?%}.frist[data-v-f310b576]{padding:0 %?20?%;background:#fff}.item[data-v-f310b576]{padding:%?8?% 0;border-bottom:%?1?% solid#ddd}.item1[data-v-f310b576]{padding:%?20?% 0;border-bottom:%?1?% solid#ddd}.icon_enter[data-v-f310b576]{margin-left:%?20?%}.right_item[data-v-f310b576]{color:#999}.grjj[data-v-f310b576]{padding:%?20?% %?0?%;border-bottom:%?1?% solid#ccc}",""])},3062:function(e,t,n){"use strict";n.r(t);var i=n("d191"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},"33f5":function(e,t,n){"use strict";var i=n("3fd0"),a=n.n(i);a.a},"3fd0":function(e,t,n){var i=n("a868");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("fcfbf626",i,!0,{sourceMap:!1,shadowMode:!1})},"4e00":function(e,t,n){"use strict";n.r(t);var i=n("02a8"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},"6eb0":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"uni-mask",style:{top:e.offsetTop+"px"},on:{click:function(t){t=e.$handleEvent(t),e.hide(t)},touchmove:function(t){t.stopPropagation(),t.preventDefault(),t=e.$handleEvent(t),e.moveHandle(t)}}}),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+e.position+" uni-popup-"+e.mode},[e._v(e._s(e.msg)),e._t("default"),"middle"===e.position&&"insert"===e.mode?n("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===e.buttonMode,"uni-close-right":"right"===e.buttonMode},on:{click:function(t){t=e.$handleEvent(t),e.closeMask(t)}}}):e._e()],2)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},9017:function(e,t,n){var i=n("27af");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("26b80ec8",i,!0,{sourceMap:!1,shadowMode:!1})},"9e73":function(e,t,n){"use strict";var i=n("9017"),a=n.n(i);a.a},a868:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'.uni-mask[data-v-aaf92358]{position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-aaf92358]{position:fixed;z-index:999;background-color:#fff}.uni-popup-middle[data-v-aaf92358]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-aaf92358]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);-ms-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;-webkit-box-shadow:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-aaf92358]{border-radius:%?10?%;padding:%?30?%}.uni-close-bottom[data-v-aaf92358],.uni-close-right[data-v-aaf92358]{position:absolute;bottom:%?-180?%;text-align:center;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-bottom[data-v-aaf92358]{margin:auto;left:0;right:0}.uni-close-right[data-v-aaf92358]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-aaf92358]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-bottom[data-v-aaf92358],.uni-popup-top[data-v-aaf92358]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.uni-popup-top[data-v-aaf92358]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-aaf92358]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""])},c049:function(e,t,n){"use strict";n.r(t);var i=n("f511"),a=n("3062");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("9e73");var r=n("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"f310b576",null);t["default"]=s.exports},d191:function(e,t,n){"use strict";(function(e){var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var a,o=i(n("0914")),r=i(n("c74b")),s=i(n("0082")),u=i(n("df06")),l=i(n("db37")),c={components:{faIcon:o.default,uniPopup:l.default},data:function(){return{userInfo:"",modal_show:!1,identity:uni.getStorageSync("identity"),sexs:["男","女"]}},onLoad:function(){a=this},onShow:function(){a.userInfo=uni.getStorageSync("user"),a.userInfo.vip_time=u.default.js_date_time(a.userInfo.vip_time)},methods:{setheaderimg:function(){1==a.identity?uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var n;e.log(t),n=r.default.File(a.userInfo.nickName+".png",t.tempFilePaths[0]),n.save().then(function(t){e.log("图片地址",t),a.userInfo.avatarUrl=t[0].url,s.default.update_user(a.userInfo).then(function(e){e&&uni.setStorageSync("user",a.userInfo)})})}}):uni.showToast({title:"员工暂不支持修改",icon:"none"})},confrim_username:function(){1==a.identity?s.default.update_user(a.userInfo).then(function(e){e&&(uni.showToast({title:"修改成功",icon:"none"}),a.modal_show=!1,uni.setStorageSync("user",a.userInfo),a.userInfo=uni.getStorageSync("user"))}):uni.showToast({title:"员工暂不支持修改",icon:"none"})},chooseSex:function(e){var t=Number(e.detail.value)+1;a.userInfo.sex=t,1==a.identity?s.default.update_user(a.userInfo).then(function(e){e&&(uni.showToast({title:"修改成功",icon:"none"}),uni.setStorageSync("user",a.userInfo),a.userInfo=uni.getStorageSync("user"))}):uni.showToast({title:"员工暂不支持修改",icon:"none"})}}};t.default=c}).call(this,n("5a52")["default"])},db37:function(e,t,n){"use strict";n.r(t);var i=n("6eb0"),a=n("4e00");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("33f5");var r=n("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"aaf92358",null);t["default"]=s.exports},df06:function(e,t,n){"use strict";(function(t){var i=n("288e");n("6b54"),n("87b3"),n("7514");var a=i(n("5d73"));n("c5f6");var o=i(n("795b")),r=i(n("c74b"));e.exports={enterAddGoodNum:function(e){return new o.default(function(n,i){for(var o=function(i){var o=0,s=r.default.Query("Goods");s.get(e[i].objectId).then(function(r){if(t.log(e[i]),e[i].selectd_model){var s=!0,u=!1,l=void 0;try{for(var c,f=(0,a.default)(e[i].selected_model);!(s=(c=f.next()).done);s=!0){var d=c.value,v=!0,m=!1,p=void 0;try{for(var h,g=(0,a.default)(e[i].models);!(v=(h=g.next()).done);v=!0){var b=h.value;b.id==d.id&&(b.reserve=Number(b.reserve)+Number(d.num)),delete b.num}}catch(y){m=!0,p=y}finally{try{v||null==g.return||g.return()}finally{if(m)throw p}}}}catch(y){u=!0,l=y}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}o=Number(e[i].reserve)+Number(e[i].num),r.set("models",e[i].models)}else o=Number(e[i].reserve)+Number(e[i].num);r.set("reserve",o),r.set("stocktype",o>e[i].warning_num?1:0),r.save(),i==e.length-1&&n(!0)}).catch(function(e){t.log(e)})},s=0;s<e.length;s++)o(s)})},outRedGoodNum:function(e){var n=this;return new o.default(function(i,o){for(var s=function(o){var s=0,u=r.default.Query("Goods");u.get(e[o].objectId).then(function(t){if(e[o].selectd_model){var r=!0,u=!1,l=void 0;try{for(var c,f=(0,a.default)(e[o].selected_model);!(r=(c=f.next()).done);r=!0){var d=c.value,v=!0,m=!1,p=void 0;try{for(var h,g=(0,a.default)(e[o].models);!(v=(h=g.next()).done);v=!0){var b=h.value;s+=Number(b.reserve),b.id==d.id&&(b.reserve=Number(b.reserve)-Number(d.num)),delete b.num}}catch(y){m=!0,p=y}finally{try{v||null==g.return||g.return()}finally{if(m)throw p}}}}catch(y){u=!0,l=y}finally{try{r||null==f.return||f.return()}finally{if(u)throw l}}s=Number(e[o].reserve)-Number(e[o].num),t.set("models",e[o].models)}else s=Number(e[o].reserve)-Number(e[o].num);t.set("reserve",s),t.set("stocktype",s>=e[o].warning_num?1:0),t.save(),e[o].warning_num>=s&&n.log(e[o].goodsName+"出库了"+e[o].num+"件，已经低于预警数量"+e[o].warning_num,-2,e[o].objectId),n.record_staffOut(Number(e[o].num)),o==e.length-1&&i(!0)}).catch(function(e){t.log(e)})},u=0;u<e.length;u++)s(u)})},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,n,i){var a=r.default.Pointer("_User"),o=a.set(uni.getStorageSync("uid")),s=r.default.Query("logs");s.set("parent",o),s.set("log",e),s.set("detail_id",i),s.set("type",n),s.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_shopOut:function(e,n){t.log(e,n);var i=r.default.Query("shops");i.set("id",e),i.set("have_out",n),i.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var n=r.default.Query("staffs");n.set("id",uni.getStorageSync("user").objectId),n.set("have_out",Number(e)+uni.getStorageSync("user").have_out),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var n=r.default.Query("Goods");n.equalTo("userId","==",e),n.find().then(function(e){t.log(e);var n=!0,i=!1,o=void 0;try{for(var r,s=(0,a.default)(e);!(n=(r=s.next()).done);n=!0){var u=r.value;t.log(u),Number(u.costPrice)*u.reserve,u.reserve}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}})},getDay:function(e,t){var n=this,i=new Date,a=i.getTime()+864e5*e;i.setTime(a);var o=i.getFullYear(),r=i.getMonth(),s=i.getDate();return r=n.handleMonth(r+1),s=n.handleMonth(s),t?o+"-"+r+"-"+s+" 00:00:00":o+"-"+r+"-"+s},js_date_time:function(e,t){var n=new Date(e),i=n.getFullYear(),a=n.getMonth()+1;a=a<10?"0"+a:a;var o=n.getDate();o=o<10?"0"+o:o;var r=n.getHours();r=r<10?"0"+r:r;var s=n.getMinutes(),u=n.getSeconds();return s=s<10?"0"+s:s,u=u<10?"0"+u:u,t?i+"-"+a+"-"+o+" "+r+":"+s:i+"-"+a+"-"+o},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,n("5a52")["default"])},f511:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"frist"},[n("v-uni-view",{staticClass:"display_flex_bet item",on:{click:function(t){t=e.$handleEvent(t),e.setheaderimg()}}},[n("v-uni-view",[e._v("头像")]),n("v-uni-view",{staticClass:"display_flex"},[n("v-uni-image",{staticClass:"avatar",attrs:{src:e.userInfo.avatarUrl}}),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1),n("v-uni-view",{staticClass:"display_flex_bet item1",on:{click:function(t){t=e.$handleEvent(t),e.modal_show=!0}}},[n("v-uni-view",[e._v("昵称")]),n("v-uni-view",{staticClass:"display_flex right_item"},[n("v-uni-text",[e._v(e._s(e.userInfo.nickName))]),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1),n("v-uni-picker",{attrs:{range:e.sexs},on:{change:function(t){t=e.$handleEvent(t),e.chooseSex(t)}}},[n("v-uni-view",{staticClass:"display_flex_bet item1"},[n("v-uni-view",[e._v("性别")]),n("v-uni-view",{staticClass:"display_flex right_item"},[1==e.userInfo.sex?n("v-uni-text",[e._v("男")]):n("v-uni-text",[e._v("女")]),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"frist",staticStyle:{"margin-top":"20rpx"}},[n("v-uni-view",{staticClass:"display_flex_bet item1"},[n("v-uni-view",[e._v("手机号")]),n("v-uni-view",{staticClass:"display_flex right_item"},[n("v-uni-text",[e._v(e._s(e.userInfo.mobilePhoneNumber))]),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1),n("v-uni-navigator",{staticClass:"display_flex_bet item1",attrs:{"hover-class":"none",url:"/pages/mine/vip/vip"}},[n("v-uni-view",[e._v("是否已是会员")]),e.userInfo.is_vip?n("v-uni-view",{staticClass:"display_flex right_item"},[n("v-uni-text",[e._v("是")]),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1):n("v-uni-view",{staticClass:"display_flex right_item"},[n("v-uni-text",{staticStyle:{color:"#426ab3"}},[e._v("成为会员")]),n("fa-icon",{staticStyle:{"margin-left":"10rpx"},attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1),e.userInfo.is_vip?n("v-uni-view",{staticClass:"display_flex_bet item1"},[n("v-uni-view",[e._v("会员截止日期")]),n("v-uni-view",{staticClass:"display_flex right_item"},[n("v-uni-text",[e._v(e._s(e.userInfo.vip_time))])],1)],1):e._e()],1),n("uni-popup",{attrs:{show:e.modal_show,position:"middle",mode:"fixed",h5Top:!0},on:{hidePopup:function(t){t=e.$handleEvent(t),e.modal_show=!1}}},[n("v-uni-view",{staticStyle:{width:"500rpx"}},[n("v-uni-view",{staticClass:"display_flex",staticStyle:{"border-bottom":"1rpx solid#ccc"}},[n("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:e.userInfo.nickName},model:{value:e.userInfo.nickName,callback:function(t){e.$set(e.userInfo,"nickName",t)},expression:"userInfo.nickName"}})],1),n("v-uni-view",{staticClass:"modal_confrimbutton",on:{click:function(t){t=e.$handleEvent(t),e.confrim_username(t)}}},[e._v("确定")])],1)],1)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})}}]);