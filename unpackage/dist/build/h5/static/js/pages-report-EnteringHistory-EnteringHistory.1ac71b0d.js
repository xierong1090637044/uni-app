(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-EnteringHistory-EnteringHistory"],{"15b3":function(e,t,i){var n=i("486a");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("2104870c",n,!0,{sourceMap:!1,shadowMode:!1})},"2bef":function(e,t,i){"use strict";var n=i("288e");i("6b54"),i("87b3"),i("c5f6");var o=n(i("5d73"));i("7514"),e.exports={handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,t,i){var n=Bmob.Pointer("_User"),o=n.set(uni.getStorageSync("uid")),a=Bmob.Query("logs");a.set("parent",o),a.set("log",e),a.set("detail_id",i),a.set("type",t),a.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_shopOut:function(e,t){console.log(e,t);var i=Bmob.Query("shops");i.set("id",e),i.set("have_out",t),i.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_staffOut:function(e){if(console.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var t=Bmob.Query("staffs");t.set("id",uni.getStorageSync("user").objectId),t.set("have_out",e+uni.getStorageSync("user").have_out),t.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");console.log(e);var t=Bmob.Query("Goods");t.equalTo("userId","==",e),t.find().then(function(e){console.log(e);var t=!0,i=!1,n=void 0;try{for(var a,c=(0,o.default)(e);!(t=(a=c.next()).done);t=!0){var s=a.value;console.log(s),Number(s.costPrice)*s.reserve,s.reserve}}catch(l){i=!0,n=l}finally{try{t||null==c.return||c.return()}finally{if(i)throw n}}})},getDay:function(e,t){var i=this,n=new Date,o=n.getTime()+864e5*e;n.setTime(o);var a=n.getFullYear(),c=n.getMonth(),s=n.getDate();return c=i.handleMonth(c+1),s=i.handleMonth(s),t?a+"-"+c+"-"+s+" 00:00:00":a+"-"+c+"-"+s},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}},"486a":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".page[data-v-5fc8c26b]{overflow:hidden;height:calc(100vh - %?234?%);font-size:%?28?%;color:#3d3d3d;background:#fafafa}.item[data-v-5fc8c26b]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#fff;padding:%?20?%;border-bottom:%?0.5?% solid#ddd}.icon-order[data-v-5fc8c26b]{font-size:%?44?%;color:#426ab3}.list-item[data-v-5fc8c26b]{height:100%;overflow:scroll}.select_time[data-v-5fc8c26b]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;line-height:%?80?%;color:#999;padding:0 %?30?%}.item_beizhu[data-v-5fc8c26b]{max-width:calc(100% - %?120?%);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.order_get[data-v-5fc8c26b]{padding:%?0?% %?30?%;color:#2ca879;border:%?0.5?% solid#2ca879;height:%?52?%;line-height:%?52?%;border-radius:%?8?%}.order_out[data-v-5fc8c26b]{padding:0 15px;color:#f30;border:1px solid#f30;height:26px;line-height:26px;margin-top:7px;border-radius:4px}.order_counting[data-v-5fc8c26b]{padding:0 15px;color:#000;border:1px solid#000;height:26px;line-height:26px;margin-top:7px;border-radius:4px}.order_returning[data-v-5fc8c26b]{padding:0 15px;color:#b3b242;border:1px solid#b3b242;height:26px;line-height:26px;margin-top:7px;border-radius:4px}",""])},"95fb":function(e,t,i){"use strict";var n=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("7514"),i("c5f6");var o,a,c,s=n(i("2bef")),l=n(i("b841")),r=n(i("e081")),d=n(i("c8e0")),u=n(i("11b1")),v=30,f=1,p={components:{uniPagination:u.default,loading:l.default,uniNavBar:r.default,uniIcon:d.default},data:function(){return{now_day:s.default.getDay(0,!1),end_day:s.default.getDay(1,!1),option_now_day:s.default.getDay(0,!1),option_end_day:s.default.getDay(1,!1),max_day:s.default.getDay(0,!1),page_num:1,checked_option:"all",loading:!0,list:null,showOptions:!1,is_checked:!1,goodsName:"",staff:""}},onLoad:function(e){a=this,c=Number(e.type),o=uni.getStorageSync("uid"),uni.removeStorageSync("charge"),1==c?uni.setNavigationBarTitle({title:"入库详情"}):-1==c?uni.setNavigationBarTitle({title:"出库详情"}):2==c?uni.setNavigationBarTitle({title:"退货详情"}):3==c&&uni.setNavigationBarTitle({title:"盘点详情"}),this.get_list()},onShow:function(){uni.getStorageSync("charge")&&(a.staff=uni.getStorageSync("charge"))},onUnload:function(){v=30,f=1},methods:{bindDateChange1:function(e){a.now_day=e.detail.value,a.option_now_day=e.detail.value},bindDateChange2:function(e){a.end_day=e.detail.value,a.option_end_day=e.detail.value},selectd:function(e){"one"==e?(a.now_day=s.default.getDay(0,!1),a.end_day=s.default.getDay(1,!1)):"two"==e?(a.now_day=s.default.getDay(-1,!1),a.end_day=s.default.getDay(0,!1)):"three"==e?(a.now_day=s.default.getDay(-7,!1),a.end_day=s.default.getDay(1,!1)):"four"==e?(a.now_day=s.default.getDay(-30,!1),a.end_day=s.default.getDay(1,!1)):(a.now_day="",a.end_day=""),f=1,a.page_num=1,a.checked_option=e,a.get_list()},shaixuan_click:function(){a.showOptions=!0},option_reset:function(){uni.removeStorageSync("charge"),a.goodsName="",a.staff="",a.is_checked=!1,a.showOptions=!1,a.get_list()},option_confrim:function(){a.is_checked=!0,a.showOptions=!1,a.get_list()},change_page:function(e){f=e.current,a.get_list()},get_list:function(){var e=this,t=Bmob.Query("order_opreations");t.equalTo("master","==",o),t.equalTo("type","==",c),uni.getStorageSync("charge")&&t.equalTo("opreater","==",a.staff.userId.objectId),t.equalTo("goodsName","==",{$regex:a.goodsName+".*"}),"all"!=a.checked_option?(t.equalTo("createdAt",">=",a.now_day+" 00:00:00"),t.equalTo("createdAt","<=",a.end_day+" 00:00:00")):a.is_checked&&(t.equalTo("createdAt",">=",a.option_now_day+" 00:00:00"),t.equalTo("createdAt","<=",a.option_end_day+" 00:00:00")),t.limit(v),t.skip(v*(f-1)),t.include("opreater"),t.order("-createdAt"),t.find().then(function(t){e.list=t,e.loading=!1})},get_detail:function(e){wx.navigateTo({url:"detail/detail?id="+e})}}};t.default=p},abee:function(e,t,i){"use strict";i.r(t);var n=i("95fb"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=o.a},aed1:function(e,t,i){"use strict";var n=i("15b3"),o=i.n(n);o.a},af87:function(e,t,i){"use strict";i.r(t);var n=i("e103"),o=i("abee");for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);i("aed1");var c=i("2877"),s=Object(c["a"])(o["default"],n["a"],n["b"],!1,null,"5fc8c26b",null);t["default"]=s.exports},e103:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[e.loading?i("loading"):i("v-uni-view",[i("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"筛选"},on:{"click-right":function(t){t=e.$handleEvent(t),e.shaixuan_click(t)}}}),i("v-uni-view",{staticClass:"display_flex good_option_view"},[i("v-uni-view",{staticClass:"good_option",on:{click:function(t){t=e.$handleEvent(t),e.selectd("all")}}},[i("v-uni-text",{class:"all"==e.checked_option?"option_selected":""},[e._v("全部")]),"all"==e.checked_option?i("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):e._e()],1),i("v-uni-view",{staticClass:"good_option",on:{click:function(t){t=e.$handleEvent(t),e.selectd("one")}}},[i("v-uni-text",{class:"one"==e.checked_option?"option_selected":""},[e._v("今天")]),"one"==e.checked_option?i("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):e._e()],1),i("v-uni-view",{staticClass:"good_option",on:{click:function(t){t=e.$handleEvent(t),e.selectd("two")}}},[i("v-uni-text",{class:"two"==e.checked_option?"option_selected":""},[e._v("昨天")]),"two"==e.checked_option?i("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):e._e()],1),i("v-uni-view",{staticClass:"good_option",on:{click:function(t){t=e.$handleEvent(t),e.selectd("three")}}},[i("v-uni-text",{class:"three"==e.checked_option?"option_selected":""},[e._v("七天")]),"three"==e.checked_option?i("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):e._e()],1),i("v-uni-view",{staticClass:"good_option",on:{click:function(t){t=e.$handleEvent(t),e.selectd("four")}}},[i("v-uni-text",{class:"four"==e.checked_option?"option_selected":"three"},[e._v("一个月")]),"four"==e.checked_option?i("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):e._e()],1)],1),i("v-uni-view",[i("v-uni-view",{staticClass:"page"},[e.list.length>0?i("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticClass:"list-item"},e._l(e.list,function(t,n){return i("v-uni-view",{key:n,staticClass:"item",on:{click:function(i){i=e.$handleEvent(i),e.get_detail(t.objectId)}}},[i("v-uni-view",{staticStyle:{display:"flex",width:"calc(100% - 120rpx)"}},[i("v-uni-view",{staticStyle:{"line-height":"80rpx"}},[1==t.type?i("fa-icon",{attrs:{type:"sign-in",size:"20",color:"#2ca879"}}):e._e(),-1==t.type?i("fa-icon",{attrs:{type:"sign-out",size:"20",color:"#f30"}}):e._e(),-2==t.type?i("fa-icon",{attrs:{type:"random",size:"20",color:"#4e72b8"}}):e._e(),2==t.type?i("fa-icon",{attrs:{type:"leanpub",size:"20",color:"#b3b242"}}):e._e(),3==t.type?i("fa-icon",{attrs:{type:"check-square-o",size:"20",color:"#000"}}):e._e()],1),i("v-uni-view",{staticStyle:{"margin-left":"20rpx"}},[i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作者：")]),e._v(e._s(t.opreater.nickName))],1),t.goodsName?i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作商品：")]),e._v(e._s(t.goodsName)+" 等...")],1):e._e(),t.beizhu?i("v-uni-view",{staticClass:"item_beizhu"},[i("v-uni-text",{staticStyle:{color:"#999"}},[e._v("备注：")]),e._v(e._s(t.beizhu))],1):e._e(),i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作时间：")]),e._v(e._s(t.createdAt))],1)],1)],1),-1==t.type?i("v-uni-view",{staticClass:"order_out"},[e._v("出库")]):-2==t.type?i("v-uni-view",{staticClass:"order_returning",staticStyle:{color:"#4e72b8",border:"1rpx solid#4e72b8"}},[e._v("调拨")]):2==t.type?i("v-uni-view",{staticClass:"order_returning"},[e._v("退货")]):3==t.type?i("v-uni-view",{staticClass:"order_counting"},[e._v("盘点")]):i("v-uni-view",{staticClass:"order_get"},[e._v("入库")])],1)}),1)],1):i("nocontent",{attrs:{type:1}})],1),i("v-uni-view",{staticStyle:{padding:"6rpx 0","border-top":"1rpx solid#ddd"}},[i("uni-pagination",{attrs:{"show-icon":!0,total:"100000",current:e.page_num},on:{change:function(t){t=e.$handleEvent(t),e.change_page(t)}}})],1)],1)],1),e.showOptions?i("v-uni-view",{staticClass:"modal_background",nativeOn:{tap:function(t){t.stopPropagation(),e.showOptions=!1}}},[i("v-uni-view",{staticClass:"showOptions"},[i("v-uni-view",{staticClass:"input_item1"},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[i("v-uni-view",{staticClass:"left_item"},[e._v("产品名称")]),i("v-uni-view",{staticClass:"right_input"},[i("v-uni-input",{attrs:{placeholder:"产品名称"},on:{click:function(t){t.stopPropagation(),t=e.$handleEvent(t)}},model:{value:e.goodsName,callback:function(t){e.goodsName=t},expression:"goodsName"}})],1)],1)],1),i("v-uni-navigator",{staticClass:"input_item1",attrs:{"hover-class":"none",url:"/pages/manage/staff/staff?type=choose"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[i("v-uni-view",{staticClass:"left_item"},[e._v("操作者")]),i("v-uni-view",{staticClass:"right_input"},[i("v-uni-input",{attrs:{placeholder:"操作者",value:e.staff.username,disabled:"true"}})],1)],1),i("v-uni-view",[i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),i("v-uni-view",{staticClass:"input_item1"},[i("v-uni-view",[i("v-uni-picker",{attrs:{mode:"date",value:e.option_now_day,end:e.max_day},on:{change:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.bindDateChange1(t)},click:function(t){t.stopPropagation(),t=e.$handleEvent(t)}}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[i("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v(e._s(e.option_now_day))]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1),i("v-uni-view",[e._v("至")]),i("v-uni-view",[i("v-uni-picker",{attrs:{mode:"date",value:e.option_end_day,end:e.max_day},on:{change:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.bindDateChange2(t)},click:function(t){t.stopPropagation(),t=e.$handleEvent(t)}}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[i("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v(e._s(e.option_end_day))]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"option_bottom"},[i("v-uni-view",{staticClass:"selection",on:{click:function(t){t=e.$handleEvent(t),e.option_reset(t)}}},[e._v("重置")]),i("v-uni-view",{staticClass:"selection1",on:{click:function(t){t=e.$handleEvent(t),e.option_confrim(t)}}},[e._v("确定")])],1)],1)],1):e._e()],1)},o=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o})}}]);