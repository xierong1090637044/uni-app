(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-warehouse-warehouse"],{"0a52":function(t,e,n){var a=n("b782");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("8e650e7e",a,!0,{sourceMap:!1,shadowMode:!1})},1179:function(t,e,n){"use strict";var a=n("fc62"),o=n.n(a);o.a},"2ccb":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{height:"100vh"}},[t.loading?n("loading"):t._e(),n("v-uni-view",{attrs:{"wx:else":!0}},[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.goto_add.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"input-view"},[n("uni-icon",{attrs:{type:"search",size:"22",color:"#666666"}}),n("v-uni-input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.input_confirm.apply(void 0,arguments)}}})],1)],1),n("v-uni-view",{staticClass:"uni-common-mt"},[n("uni-segmented-control",{attrs:{current:t.current,values:t.items,"style-type":"text","active-color":"#426ab3"},on:{clickItem:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickItem.apply(void 0,arguments)}}})],1),t.stocks&&t.stocks.length>0?n("v-uni-scroll-view",{staticClass:"indexes",staticStyle:{height:"calc(100vh - 212rpx)"},attrs:{"scroll-y":!0,"scroll-with-animation":"true","enable-back-to-top":"true"}},t._l(t.stocks,function(e,a){return n("v-uni-view",{key:a},[n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"display_flex_bet",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goto_detail(e)}}},[n("v-uni-view",{staticClass:"display_flex"},[e.Image&&e.Image.length>0?n("v-uni-image",{staticClass:"stock_avatar",attrs:{src:e.Image[0],mode:"aspectFit"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.priviewImg(e.Image[0])}}}):n("v-uni-image",{staticClass:"stock_avatar",attrs:{src:"/static/warehouse.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"stock_name"},[t._v(t._s(e.stock_name))]),e.charge&&e.charge.nickName?n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人："+t._s(e.charge.nickName))]):e.Ncharge&&e.Ncharge.nickName?n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人："+t._s(e.Ncharge.nickName))]):n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人：未填写")])],1)],1),n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1),n("v-uni-view",{staticClass:"right_item"},[t.is_choose?n("v-uni-view",{staticClass:"display_flex",staticStyle:{"justify-content":"flex-end",width:"100%"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.select_this(e)}}},[n("v-uni-text",{staticStyle:{color:"#d93a49"}},[t._v("选择")])],1):t._e()],1)],1)],1)}),1):n("nocontent",{attrs:{type:1}})],1)],1)},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},"493e":function(t,e,n){"use strict";(function(t){var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("5d73"));n("7514");var i,r,c,s=a(n("f499")),u=a(n("9546")),l=a(n("8d57")),d=a(n("c952")),f=a(n("4d52")),v=a(n("120a")),h=a(n("96bd")),g=a(n("3628")),m={components:{uniSegmentedControl:d.default,faIcon:f.default,loading:v.default,uniNavBar:h.default,uniIcon:g.default},data:function(){return{is_choose:!1,loading:!0,stocks:null,items:["已启用","未启用"],current:0,disabled:!1,type:""}},onLoad:function(e){i=this,c=uni.getStorageSync("uid"),t.log(e),"choose"!=e.type&&"out_choose"!=e.type&&"choose_more"!=e.type||(i.is_choose=!0,i.type=e.type)},onShow:function(){i.getstock_list()},onUnload:function(){r=""},methods:{priviewImg:function(t){uni.previewImage({current:t,urls:[t]})},onClickItem:function(t){this.current!==t&&(this.current=t,0==t?(i.disabled=!1,i.getstock_list()):1==t&&(i.disabled=!0,i.getstock_list()))},goto_detail:function(t){uni.setStorageSync("stock",t),uni.navigateTo({url:"detail/detail"})},select_this:function(t){var e;e="choose_more"==i.type&&uni.getStorageSync("warehouse")||[];var n={};n.stock=t,n.reserve=0,n.warning_num=0,-1==(0,s.default)(e).indexOf((0,s.default)(n))?(e.push(n),"out_choose"==i.type?(uni.setStorageSync("out_warehouse",e),uni.navigateBack({delta:1})):(uni.setStorageSync("warehouse",e),uni.navigateBack({delta:1}))):uni.showToast({title:"已选择此仓库",icon:"none"})},goto_add:function(){var e=uni.getStorageSync("user"),n=uni.getStorageSync("identity");e.is_vip||i.stocks.length<2?uni.navigateTo({url:"add/add"}):uni.showModal({title:"提示",content:"非会员最多上传2个仓库",confirmText:"充值会员",success:function(e){e.confirm?1==n?uni.navigateTo({url:"/pages/mine/vip/vip"}):uni.showToast({title:"员工不能充值",icon:"none"}):e.cancel&&t.log("用户点击取消")}})},input_confirm:function(t){r=t.detail.value,i.getstock_list()},getstock_list:function(){var e=u.default.Query("stocks");e.order("-num"),e.include("charge","shop","Ncharge"),e.equalTo("parent","==",c),e.equalTo("disabled","!=",!i.disabled),r&&e.equalTo("stock_name","==",{$regex:r+".*"}),e.limit(500),e.find().then(function(e){i.loading=!1;var n=e,a=[],r=!0,c=!1,s=void 0;try{for(var u,d=(0,o.default)(n);!(r=(u=d.next()).done);r=!0){var f=u.value,v={};v.name=f.stock_name,v.objectId=f.objectId,a.push(v)}}catch(h){c=!0,s=h}finally{try{r||null==d.return||d.return()}finally{if(c)throw s}}uni.setStorageSync("_warehouse",a),uni.getStorage({key:"identity",success:function(e){"2"==e.data?l.default.get_satffAuth().then(function(e){t.log(e);var a=[],r=!0,c=!1,s=void 0;try{for(var u,l=(0,o.default)(e.stocks);!(r=(u=l.next()).done);r=!0){var d=u.value,f=!0,v=!1,g=void 0;try{for(var m,b=(0,o.default)(n);!(f=(m=b.next()).done);f=!0){var p=m.value;p.objectId==d&&a.push(p)}}catch(h){v=!0,g=h}finally{try{f||null==b.return||b.return()}finally{if(v)throw g}}}}catch(h){c=!0,s=h}finally{try{r||null==l.return||l.return()}finally{if(c)throw s}}i.stocks=a}):"1"==e.data&&(i.stocks=n)}})})}}};e.default=m}).call(this,n("5a52")["default"])},5958:function(t,e,n){"use strict";n.r(e);var a=n("2ccb"),o=n("9462");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("1179");var r=n("f0c5"),c=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"048e4c69",null);e["default"]=c.exports},6916:function(t,e,n){"use strict";var a=n("0a52"),o=n.n(a);o.a},"6edb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}};e.default=a},"73bfd":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"uni-page-body[data-v-048e4c69]{height:100vh;background:#fafafa}.uni-common-mt[data-v-048e4c69]{background:#fff;padding:%?20?% 0}.stock_name[data-v-048e4c69]{font-weight:700;font-size:%?30?%;color:#3d3d3d;margin-bottom:%?4?%}.stock_mobile[data-v-048e4c69]{color:#999}.right_item[data-v-048e4c69]{width:100%;border-bottom:%?1?% solid#ccc;padding-bottom:%?10?%}.stock_avatar[data-v-048e4c69]{width:%?82?%;height:%?70?%;margin-right:%?20?%}.content[data-v-048e4c69]{padding:%?10?% %?30?%;background:#fff}body.?%PAGE?%[data-v-048e4c69]{background:#fafafa}",""])},"7c0b":function(t,e,n){"use strict";n.r(e);var a=n("6edb"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"8d57":function(t,e,n){"use strict";(function(t){var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("f499"));n("7514");var i=a(n("795b")),r=a(n("9546")),c={get_satffAuth:function(){return new i.default(function(t,e){var n=uni.getStorageSync("user").objectId,a=r.default.Query("_User");a.include("masterId"),a.get(n).then(function(e){e.masterId.is_vip?(e.is_vip=!0,e.vip_time=e.masterId.vip_time):(e.is_vip=!1,e.vip_time=0),uni.setStorageSync("user",e),t(e)}).catch(function(e){t()})})},get_stafflist:function(t,e){return new i.default(function(n,a){var i=JSON.parse(localStorage.getItem("bmob")).objectId,c=r.default.Query("_User");c.order("num"),c.equalTo("masterId","==",i),c.equalTo("disabled","==",t),c.include("shop"),e&&c.equalTo("name","==",{$regex:e+".*"}),c.find().then(function(t){localStorage.setItem("_User",(0,o.default)(t)),n(t)})})},add_staff:function(e){var n=JSON.parse(localStorage.getItem("bmob")).objectId;return new i.default(function(a,o){var i=r.default.Pointer("_User"),c=i.set(n),s=r.default.Pointer("shops"),u=s.set(e.shop);if(e.objectId){var l=r.default.Pointer("_User"),d=l.set(n),f=r.default.Query("_User");f.set("username",e.name),f.set("nickName",e.name),f.set("password",e.password),f.set("mobilePhoneNumber",e.mobilePhoneNumber),f.set("rights",e.rights),f.set("address",e.address),f.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),f.set("masterId",d),f.set("disabled",!e.disabled),f.set("shop",u),f.set("id",e.objectId),f.save().then(function(e){t.log(e),a(e)}).catch(function(e){t.log(e)})}else{var v=r.default.Query("_User");v.equalTo("masterId","==",n),v.equalTo("mobilePhoneNumber","==",e.mobilePhoneNumber),v.find().then(function(n){if(t.log(n),0==n.length){var o=r.default.Query("_User");o.set("username",e.name),o.set("shop",u),o.set("nickName",e.name),o.set("password",e.password),o.set("mobilePhoneNumber",e.mobilePhoneNumber),o.set("rights",e.rights),o.set("address",e.address),o.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),o.set("masterId",c),o.set("have_out",0),o.set("disabled",!e.disabled),o.save().then(function(e){t.log(e),a(e)}).catch(function(e){t.log(e)})}else a(!1,"已存在此账号")})}})},delete_staff:function(e){return new i.default(function(n,a){var o=r.default.Query("_User");o.destroy(e).then(function(t){n(t)}).catch(function(e){t.log(e)})})}};e.default=c}).call(this,n("5a52")["default"])},9462:function(t,e,n){"use strict";n.r(e);var a=n("493e"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},b782:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".segmented-control[data-v-917140dc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:75%;font-size:%?28?%;box-sizing:border-box;margin:0 auto;overflow:hidden;border:1px solid;border-radius:%?10?%}.segmented-control.text[data-v-917140dc]{border:0;border-radius:0}.segmented-control-item[data-v-917140dc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;line-height:%?60?%;box-sizing:border-box;border-left:1px solid}.segmented-control-item.active[data-v-917140dc]{color:#fff}.segmented-control-item.text[data-v-917140dc]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-917140dc]{border-bottom-style:solid}.segmented-control-item[data-v-917140dc]:first-child{border-left-width:0}",""])},c952:function(t,e,n){"use strict";n.r(e);var a=n("ca58"),o=n("7c0b");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("6916");var r=n("f0c5"),c=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"917140dc",null);e["default"]=c.exports},ca58:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===t.styleType},style:{borderColor:"text"===t.styleType?"":t.activeColor}},t._l(t.values,function(e,a){return n("v-uni-view",{key:a,staticClass:"segmented-control-item",class:[{text:"text"===t.styleType},{active:a===t.currentIndex}],style:{color:a===t.currentIndex?"text"===t.styleType?t.activeColor:"#fff":"text"===t.styleType?"#000":t.activeColor,backgroundColor:a===t.currentIndex&&"button"===t.styleType?t.activeColor:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._onClick(a)}}},[t._v(t._s(e))])}),1)},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},fc62:function(t,e,n){var a=n("73bfd");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("e54cde02",a,!0,{sourceMap:!1,shadowMode:!1})}}]);