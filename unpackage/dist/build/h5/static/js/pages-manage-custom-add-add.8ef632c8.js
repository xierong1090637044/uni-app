(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-custom-add-add"],{1775:function(t,e,a){"use strict";a.r(e);var n=a("9f3f"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},1792:function(t,e,a){"use strict";var n={"uni-nav-bar":a("96bd").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":t.textDesc},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.add_data.apply(void 0,arguments)}}},[a("v-uni-view")],1),a("v-uni-view",[a("v-uni-view",{staticClass:"normalBorder",staticStyle:{background:"#fff",padding:"0 30rpx"}},[a("v-uni-view",{staticClass:"notice_text"},[t._v("上传客户头像(会员可用)")]),a("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[a("v-uni-view",{staticClass:"upload_image display_flex"},[t._l(t.Images,(function(e,n){return t.Images.length>0?a("v-uni-view",{key:n,staticStyle:{position:"relative"}},[a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:e}}),a("fa-icon",{staticStyle:{position:"absolute",top:"-10rpx",right:"-10rpx"},attrs:{type:"times-circle-o",size:"20",color:"#426ab3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeImg(n)}}})],1):t._e()})),0==t.Images.length?a("v-uni-view",{staticStyle:{width:"180rpx",height:"180rpx","line-height":"220rpx","text-align":"center",border:"1rpx solid#ccc","border-radius":"16rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload_image.apply(void 0,arguments)}}},[a("fa-icon",{attrs:{type:"plus-square-o",size:"40",color:"#426ab3"}})],1):t._e()],2)],1)],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("姓名"),a("v-uni-text",{staticStyle:{color:"#d93a49"}},[t._v("*")])],1),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-uni-navigator",{staticClass:"display_flex_bet item normalBorder",attrs:{"hover-class":"none",url:"/pages/manage/customClass/customClass?type=choose"}},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("客户类别")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请选择客户分类",disabled:!0},model:{value:t.customClass.class_text,callback:function(e){t.$set(t.customClass,"class_text",e)},expression:"customClass.class_text"}}),a("fa-icon",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"angle-right",size:"20",color:"#999"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"320rpx"}},[t._v("订货平台登陆账号"),a("v-uni-text",{staticStyle:{color:"#d93a49"}},[t._v("*")])],1),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"系统自动生成",disabled:"true"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"320rpx"}},[t._v("订货平台登陆密码"),a("v-uni-text",{staticStyle:{color:"#d93a49"}},[t._v("*")])],1),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"订货平台登陆密码",maxlength:"11"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系地址")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系电话")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入电话",type:"number",maxlength:"11"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item normalBorder"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("折扣率")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入折扣率",type:"number",maxlength:"3"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getDiscount.apply(void 0,arguments)}},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[t._v("%")])],1),a("v-uni-view",{staticClass:"display_flex_bet item"},[a("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("期初欠款")]),a("v-uni-input",{staticClass:"rightInput",staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入期初欠款金额",type:"digit"},model:{value:t.debt,callback:function(e){t.debt=e},expression:"debt"}})],1)],1)],1)},s=[];a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}))},"54f8":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");var n=a("dde1");function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(n["a"])(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s,r=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==i["return"]||i["return"]()}finally{if(o)throw s}}}}},"6e59":function(t,e,a){var n=a("c434");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("c1c68a74",n,!0,{sourceMap:!1,shadowMode:!1})},"9ef1":function(t,e,a){"use strict";(function(e){var n=a("ee27");a("d3b7");var i=n(a("54f8")),s=n(a("9546"));t.exports={upload_image:function(t){return new Promise((function(a,n){var r=uni.getStorageSync("user"),o=[];r.is_vip?uni.chooseImage({count:t,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.log(t);var n,r,c=Date.parse(new Date),u=t.tempFilePaths,l=(0,i.default)(u);try{for(l.s();!(r=l.n()).done;){var d=r.value;n=s.default.File(c+".jpg",d)}}catch(p){l.e(p)}finally{l.f()}n.save().then((function(t){var e,n=(0,i.default)(t);try{for(n.s();!(e=n.n()).done;){e.value;o.push(t[0].url)}}catch(p){n.e(p)}finally{n.f()}a(o)}))}}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})}))}}}).call(this,a("5a52")["default"])},"9f3f":function(t,e,a){"use strict";(function(t){var n=a("ee27");a("a434"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,s,r,o=n(a("9546")),c=n(a("9ef1")),u=n(a("96bd")),l={components:{uniNavBar:u.default},data:function(){return{username:"",password:"",Images:[],name:"",address:"",phone:"",debt:0,discount:100,textDesc:"添加",customClass:{}}},onLoad:function(t){t.type,i=this,r=uni.getStorageSync("uid"),uni.removeStorageSync("customCategory")},onShow:function(){s=uni.getStorageSync("customs"),s?(uni.getStorageSync("custom_type"),uni.setNavigationBarTitle({title:"修改客户"}),i.textDesc="修改",i.Images=s.Images||[],i.name=s.custom_name||"",i.address=s.custom_address||"",i.phone=s.custom_phone||"",i.debt=s.debt||0,i.discount=s.discount||100,i.username=s.username||"",i.password=s.password||""):uni.setNavigationBarTitle({title:"新增客户"}),uni.getStorageSync("customCategory")&&(i.customClass=uni.getStorageSync("customCategory"))},onUnload:function(){uni.removeStorageSync("custom_type"),uni.removeStorageSync("customs"),uni.removeStorageSync("customCategory")},methods:{handleData:function(){i.Images=[],i.name="",i.address="",i.phone="",i.debt=0,i.discount=100},removeImg:function(t){i.Images.splice(t,1),i.Images=i.Images},upload_image:function(){c.default.upload_image(1).then((function(t){i.Images=t}))},getDiscount:function(t){var e=Number(t.detail.value);e>=100&&(i.discount=100)},add_data:function(){if(null==i.name||""==i.name)uni.showToast({title:"请输入姓名",icon:"none"});else{var e=o.default.Query("customs"),a=o.default.Pointer("_User"),n=a.set(r);if(s&&e.set("id",s.objectId),e.set("custom_name",i.name),e.set("custom_phone",i.phone?i.phone:""),e.set("custom_address",i.address?i.address:""),e.set("orginDebt",Number(i.debt)),e.set("discount",Number(i.discount)),e.set("parent",n),e.set("Images",i.Images),e.set("password",i.password),1==i.customClass.type){var c=o.default.Pointer("customFristClass"),u=c.set(i.customClass.objectId);e.set("customFristClass",u),s&&e.get(s.objectId).then((function(t){t.unset("customSecondClass"),t.save()}))}else if(2==i.customClass.type){var l=o.default.Pointer("customFristClass"),d=l.set(i.customClass.parent.objectId),p=o.default.Pointer("customSecondClass"),v=p.set(i.customClass.objectId);e.set("customFristClass",d),e.set("customSecondClass",v)}e.save().then((function(e){t.log(e),s?uni.showToast({title:"修改成功"}):(uni.showToast({title:"添加成功"}),i.handleData())})).catch((function(e){t.log(e)}))}}}};e.default=l}).call(this,a("5a52")["default"])},c434:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-259c7cd0]{background:#fafafa}.notice_text[data-v-259c7cd0]{padding:%?20?% 0 0}.item[data-v-259c7cd0]{padding:%?20?% %?30?%;background:#fff}.rightInput[data-v-259c7cd0]{text-align:right}body.?%PAGE?%[data-v-259c7cd0]{background:#fafafa}",""]),t.exports=e},db42:function(t,e,a){"use strict";var n=a("6e59"),i=a.n(n);i.a},e731:function(t,e,a){"use strict";a.r(e);var n=a("1792"),i=a("1775");for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("db42");var r,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"259c7cd0",null,!1,n["a"],r);e["default"]=c.exports}}]);