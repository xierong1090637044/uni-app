(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tarBar-index"],{"3ec7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("uni-notice-bar",{attrs:{"show-icon":!0,single:!0,color:"#426ab3",text:"现已支持扫码自动识别条码产品信息并进行添加,但是该功能暂时只对会员使用!"}}),i("v-uni-view",{staticClass:"fristSearchView"},[i("uni-search-bar",{attrs:{radius:100,color:"#fff"},on:{confirm:function(e){e=t.$handleEvent(e),t.search(e)}}})],1),i("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":"true","indicator-active-color":"#fff",autoplay:"true"}},[[i("v-uni-swiper-item",{staticClass:"item"},[i("v-uni-view",{staticClass:"every_item"},[i("v-uni-view",{staticClass:"s_num"},[t._v(t._s(t.get_reserve))]),i("v-uni-view",[t._v("今日入库")])],1),i("v-uni-view",{staticClass:"every_item"},[i("v-uni-view",{staticClass:"s_num"},[t._v(t._s(t.out_reserve))]),i("v-uni-view",[t._v("今日出库")])],1)],1),i("v-uni-swiper-item",{staticClass:"item"},[i("v-uni-view",{staticClass:"every_item"},[i("v-uni-view",{staticClass:"s_num"},[t._v(t._s(t.total_reserve))]),i("v-uni-view",[t._v("库存总量")])],1),i("v-uni-view",{staticClass:"every_item"},[i("v-uni-view",{staticClass:"s_num"},[t._v(t._s(t.total_money))]),i("v-uni-view",[t._v("库存成本")])],1)],1),i("v-uni-swiper-item",{staticClass:"item"},[i("v-uni-view",{staticClass:"every_item"},[i("v-uni-view",{staticClass:"s_num"},[t._v(t._s(t.total_products))]),i("v-uni-view",[t._v("库存种类")])],1)],1)]],2),t.logsList.length>0?i("v-uni-swiper",{staticStyle:{color:"#333 !important",height:"10vh",background:"#426ab3"},attrs:{vertical:"true",autoplay:"true"}},[t._l(t.logsList,function(e,a){return i("v-uni-swiper-item",{key:a,staticClass:"item"},[i("v-uni-navigator",{staticClass:"display_flex_bet",staticStyle:{width:"100%",background:"#fff",height:"100%",padding:"0 30rpx"},attrs:{"hover-class":"none",url:e.link}},[i("v-uni-view",{staticStyle:{"line-height":"5vh",width:"90%"}},[i("v-uni-view",{staticClass:"text_overflow",staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.log))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999"}},[t._v(t._s(e.createdAt))])],1),i("fa-icon",{attrs:{type:"angle-right",size:"18",color:"#999"}})],1)],1)})],2):t._e(),i("v-uni-view",{staticClass:"o_list",staticStyle:{"margin-top":"20rpx"}},t._l(t.optionsLists,function(e,a){return i("v-uni-navigator",{key:a,staticClass:"o_item",attrs:{url:e.url,"hover-class":"none"}},[i("v-uni-view",{staticStyle:{width:"100%"}},[i("v-uni-image",{staticClass:"o_image",attrs:{src:e.icon}})],1),i("v-uni-view",{staticClass:"o_text"},[t._v(t._s(e.name))])],1)}),1),i("v-uni-view",{staticClass:"scan_code display_flex",on:{click:function(e){e=t.$handleEvent(e),t.scan_code(e)}}},[i("fa-icon",{staticClass:"icon-scan",attrs:{type:"qrcode",size:"20",color:"#fff"}}),i("v-uni-text",[t._v("扫描产品条形码")])],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},4225:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".fristSearchView[data-v-e9629664]{padding:%?10?% %?30?%;background:#426ab3}.scan_code[data-v-e9629664]{position:fixed;width:calc(100% - %?60?%);left:%?30?%;right:%?30?%;bottom:10%;background:-webkit-gradient(linear,left top,right top,from(#426ab3),to(#118fff));background:-o-linear-gradient(left,#426ab3,#118fff);background:linear-gradient(90deg,#426ab3,#118fff);line-height:%?80?%;text-align:center;border-radius:4px;color:#fff;-webkit-box-shadow:0 5px 5px rgba(0,0,0,.2);box-shadow:0 5px 5px rgba(0,0,0,.2)}.icon-scan[data-v-e9629664]{margin-right:%?20?%}\n\n/* pages/home/index/index.wxss */.swiper[data-v-e9629664]{background:#426ab3;color:#fff;height:14vh}.item[data-v-e9629664]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.every_item[data-v-e9629664]{width:50%;text-align:center;line-height:30px;font-size:14px}.s_num[data-v-e9629664]{font-size:16px;font-weight:700}.o_list[data-v-e9629664]{background:#fff;padding:15px 15px 0}.o_image[data-v-e9629664]{width:%?80?%;height:%?80?%;border-radius:50%;border:3px solid#e2e2e2;padding:%?6?% %?6?% 0}.o_item[data-v-e9629664]{width:25%;text-align:center;display:inline-block;margin-bottom:%?20?%}.o_text[data-v-e9629664]{color:#000;font-weight:700;font-size:%?23?%}.scan_code[data-v-e9629664]{position:fixed;width:calc(100% - %?60?%);left:%?30?%;right:%?30?%;bottom:10%;background:-webkit-gradient(linear,left top,right top,from(#426ab3),to(#118fff));background:-o-linear-gradient(left,#426ab3,#118fff);background:linear-gradient(90deg,#426ab3,#118fff);line-height:%?80?%;text-align:center;border-radius:%?8?%;color:#fff;-webkit-box-shadow:0 %?10?% %?10?% rgba(0,0,0,.2);box-shadow:0 %?10?% %?10?% rgba(0,0,0,.2);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.icon-scan[data-v-e9629664]{margin-right:%?20?%}",""])},4493:function(t,e,i){"use strict";i.r(e);var a=i("3ec7"),n=i("ead9");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("8c56");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"e9629664",null);e["default"]=r.exports},"8c56":function(t,e,i){"use strict";var a=i("c1aa"),n=i.n(a);n.a},"942a":function(t,e,i){"use strict";(function(t){var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("5d73"));i("7514"),i("28a5");var o,s,r=a(i("0914")),c=a(i("7fee")),l=a(i("4fee")),u=a(i("df06")),d=a(i("0082")),g=a(i("2dc1")),f=a(i("c74b")),v={components:{faIcon:r.default,uniNoticeBar:c.default,uniSearchBar:l.default},data:function(){return{logsList:[],optionsLists:[{name:"采购或入库",icon:"/static/entering.png",url:"/pages/common/goods-select/goods-select?type=entering"},{name:"销售或出库",icon:"/static/delivery.png",url:"/pages/common/goods-select/goods-select?type=delivery"},{name:"产品调拨",icon:"/static/allocation.png",url:"/pages/common/goods-select/goods-select?type=allocation"},{name:"退货入库",icon:"/static/return_goods.png",url:"/pages/common/goods-select/goods-select?type=returing"},{name:"库存盘点",icon:"/static/stocking.png",url:"/pages/common/goods-select/goods-select?type=counting"},{name:"使用手册",icon:"/static/userInfo.png",url:"/pages/mine/manual/manual"}],get_reserve:0,out_reserve:0,total_reserve:0,total_money:0,total_products:0,openid:""}},onLoad:function(t){o=this,s=uni.getStorageSync("uid"),this.$wechat.share_pyq(),d.default.query_setting(),t.openid&&uni.setStorageSync("openid",t.openid)},onShow:function(){o.gettoday_detail(),o.loadallGoods(),o.get_logsList()},onShareAppMessage:function(e){return"button"===e.from&&t.log(e.target),{title:"库存表，欢迎您的加入",path:"/pages/tarBar/index"}},methods:{search:function(e){t.log(e);var i=e.value;uni.navigateTo({url:"/pages/manage/goods/goods?search_text="+i})},scan_code:function(){uni.showActionSheet({itemList:["扫码出库","扫码入库","扫码盘点","查看详情","扫码添加产品"],success:function(t){o.scan(t.tapIndex)},fail:function(e){t.log(e.errMsg)}})},scan:function(t){this.$wechat.scanQRCode().then(function(e){var i=e.split("-");if(0==t)uni.navigateTo({url:"/pages/common/goods_out/goods_out?id="+i[0]+"&type="+i[1]});else if(1==t)uni.navigateTo({url:"/pages/common/good_confrim/good_confrim?id="+i[0]+"&type="+i[1]});else if(2==t)uni.navigateTo({url:"/pages/common/good_count/good_count?id="+i[0]+"&type="+i[1]});else if(3==t)uni.navigateTo({url:"/pages/manage/good_det/good_det?id="+i[0]+"&type="+i[1]});else if(4==t){var a=uni.getStorageSync("user");a.is_vip?uni.navigateTo({url:"/pages/manage/good_add/good_add?id="+result}):uni.showToast({title:"该功能只限会员使用",icon:"none"})}})},gettoday_detail:function(){var t=0,e=0,i=f.default.Query("Bills");i.equalTo("userId","==",s),i.equalTo("createdAt",">=",u.default.getDay(0,!0)),i.equalTo("createdAt","<=",u.default.getDay(1,!0)),i.equalTo("status","!=",!1),i.include("goodsId"),i.find().then(function(i){for(var a=0;a<i.length;a++)1==i[a].type?(t+=i[a].num,i[a].num*i[a].goodsId.retailPrice,i[a].total_money):-1==i[a].type&&(e+=i[a].num,i[a].num*i[a].goodsId.costPrice,i[a].total_money);o.get_reserve=t.toFixed(uni.getStorageSync("print_setting").show_float),o.out_reserve=e.toFixed(uni.getStorageSync("print_setting").show_float)})},loadallGoods:function(){g.default.loadallGoods().then(function(t){o.total_money=t.total_money,o.total_reserve=t.total_reserve,o.total_products=t.total_products})},get_logsList:function(){var t=f.default.Query("logs");t.equalTo("parent","==",s),t.equalTo("type","!=",-2),t.order("-createdAt"),t.limit(20),t.find().then(function(t){var e=!0,i=!1,a=void 0;try{for(var s,r=(0,n.default)(t);!(e=(s=r.next()).done);e=!0){var c=s.value;5==c.type?c.link="/pages/manage/good_det/good_det?id="+c.detail_id+"&type=false":-1!=c.type&&1!=c.type&&2!=c.type&&3!=c.type||(c.link="/pages/report/EnteringHistory/detail/detail?id="+c.detail_id)}}catch(l){i=!0,a=l}finally{try{e||null==r.return||r.return()}finally{if(i)throw a}}o.logsList=t})}}};e.default=v}).call(this,i("5a52")["default"])},c1aa:function(t,e,i){var a=i("4225");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("116419c4",a,!0,{sourceMap:!1,shadowMode:!1})},ead9:function(t,e,i){"use strict";i.r(e);var a=i("942a"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a}}]);