(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-staff-add-add"],{"01ef":function(e,t,a){"use strict";var n=a("f8ae"),i=a.n(n);i.a},"01fa":function(e,t,a){"use strict";var n=a("ffc1"),i=a.n(n);i.a},"02aa":function(e,t,a){"use strict";a.r(t);var n=a("ff67"),i=a("ff03");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("01fa");var o=a("2877"),l=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"f56a6716",null);t["default"]=l.exports},"101e":function(e,t,a){"use strict";a.r(t);var n=a("3b4b"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},"151c":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.uni-collapse[data-v-089d00af]{background-color:#fff;position:relative;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.uni-collapse[data-v-089d00af]:after{position:absolute;z-index:10;right:0;bottom:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.uni-collapse[data-v-089d00af]:before{position:absolute;z-index:10;right:0;top:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}',""])},"18d6":function(e,t,a){"use strict";a.r(t);var n=a("ff65"),i=a("2d72");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("810b");var o=a("2877"),l=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"295a1270",null);t["default"]=l.exports},2070:function(e,t,a){"use strict";(function(e){var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("7514");var i=n(a("5d73"));a("7f7f");var s,o,l,c,r,u=n(a("c74b")),f=n(a("0914")),d=n(a("bd14")),h=n(a("18d6")),p=n(a("b92d")),v={},m={components:{faIcon:f.default,uniCollapse:d.default,uniCollapseItem:h.default,uniNavBar:p.default},data:function(){return{select_stocks:[],stocks:uni.getStorageSync("_warehouse"),modify_desc:"添加",disabled:!0,shop_name:"",staff_name:"",staff_address:"",staff_phone:"",staff_password:"",manage:[{id:1,name:"产品管理"},{id:2,name:"员工管理"},{id:3,name:"仓库管理"},{id:4,name:"门店管理"},{id:5,name:"客户管理"},{id:6,name:"产品类别管理"},{id:7,name:"单品统计"}],recode:[{id:1,name:"入库记录"},{id:2,name:"出库记录"},{id:3,name:"调拨记录"},{id:4,name:"客户退货记录"},{id:5,name:"盘点记录"},{id:6,name:"经营状况"},{id:7,name:"报表查看"}],others:[{id:1,name:"进价隐藏"},{id:2,name:"销售"},{id:3,name:"采购"},{id:4,name:"审核"}],current:[],recodecurrent:[],othercurrent:[]}},onLoad:function(e){s=this,r=uni.getStorageSync("uid")},onShow:function(){if(c=uni.getStorageSync("staff"),l=uni.getStorageSync("shop"),uni.getStorageSync("warehouse")&&uni.getStorageSync("warehouse").length>0&&(s.stock=uni.getStorageSync("warehouse")[0].stock),c){if(uni.setNavigationBarTitle({title:"修改员工信息"}),s.modify_desc="修改",s.shop_name=c.shop?c.shop.name:"",s.staff_name=c.username,s.staff_address=c.address,s.staff_phone=c.mobilePhoneNumber,s.staff_password=c.password,s.current=[],s.recodecurrent=[],s.othercurrent=[],c.rights.current){var e=!0,t=!1,a=void 0;try{for(var n,r=(0,i.default)(c.rights.current);!(e=(n=r.next()).done);e=!0){var f=n.value;s.manage[f].checked=!0,s.current.push(f)}}catch(O){t=!0,a=O}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}if(c.rights.recodecurrent){var d=!0,h=!1,p=void 0;try{for(var m,b=(0,i.default)(c.rights.recodecurrent);!(d=(m=b.next()).done);d=!0){var g=m.value;s.recode[g].checked=!0,s.recodecurrent.push(g)}}catch(O){h=!0,p=O}finally{try{d||null==b.return||b.return()}finally{if(h)throw p}}}if(c.rights.othercurrent){var x=!0,_=!1,w=void 0;try{for(var k,y=(0,i.default)(c.rights.othercurrent);!(x=(k=y.next()).done);x=!0){var S=k.value;s.others[S].checked=!0,s.othercurrent.push(S)}}catch(O){_=!0,w=O}finally{try{x||null==y.return||y.return()}finally{if(_)throw w}}}v.current=s.current,v.recodecurrent=s.recodecurrent,v.othercurrent=s.othercurrent}if(l){s.shop_name=l.name;var C=u.default.Pointer("shops");o=C.set(l.objectId)}},methods:{checkstockChange:function(e){s.select_stocks=e.detail.value},switchChange:function(e){s.disabled=e.detail.value},checkboxChange:function(e){s.current=e.detail.value,v.current=e.detail.value},checkboxChange_record:function(e){s.recodecurrent=e.detail.value,v.recodecurrent=e.detail.value},checkboxChange_other:function(e){s.othercurrent=e.detail.value,v.othercurrent=e.detail.value},start_add:function(){null==this.staff_name?uni.showToast({title:"请输入姓名",icon:"none"}):this.staff_phone.length<11?uni.showToast({title:"账号不能少于11位",icon:"none"}):this.staff_password.length<6?uni.showToast({title:"密码不能少于6位",icon:"none"}):s.add_data()},add_data:function(){if(uni.showLoading({title:"上传中..."}),c){uni.hideLoading();var t=uni.getStorageSync("uid"),a=u.default.Pointer("_User"),n=a.set(t),i=u.default.Query("staffs");i.set("username",s.staff_name),i.set("nickName",s.staff_name),i.set("password",s.staff_password),i.set("mobilePhoneNumber",s.staff_phone),i.set("rights",v),i.set("address",null==s.staff_address?"":s.staff_address),i.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),i.set("masterId",n),i.set("disabled",!s.disabled),i.set("stocks",s.select_stocks),l&&i.set("shop",o),i.set("id",c.objectId),i.save().then(function(t){e.log(t),uni.showToast({title:"修改成功"}),s.select_stocks=[]}).catch(function(t){e.log(t)})}else{var f=u.default.Query("staffs");f.equalTo("masterId","==",r),f.equalTo("mobilePhoneNumber","==",s.staff_phone),f.find().then(function(t){if(e.log(t),0==t.length){uni.hideLoading();var a=uni.getStorageSync("uid"),n=u.default.Pointer("_User"),i=n.set(a),c=u.default.Query("staffs");c.set("username",s.staff_name),l&&c.set("shop",o),c.set("stocks",s.select_stocks),c.set("nickName",s.staff_name),c.set("password",s.staff_password),c.set("mobilePhoneNumber",s.staff_phone),c.set("rights",v),c.set("address",null==s.staff_address?"":s.staff_address),c.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),c.set("masterId",i),c.set("have_out",0),c.set("disabled",!s.disabled),c.save().then(function(t){e.log(t),uni.showToast({title:"添加成功"}),s.select_stocks=[]}).catch(function(t){e.log(t)})}else uni.showToast({title:"已存在此账号",icon:"none"})})}}}};t.default=m}).call(this,a("5a52")["default"])},"2d72":function(e,t,a){"use strict";a.r(t);var n=a("7365"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},"3b4b":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac6a");var n={name:"UniCollapse",props:{accordion:{type:Boolean,default:!1}},data:function(){return{}},provide:function(){return{collapse:this}},created:function(){this.childrens=[]},methods:{onChange:function(){var e=[];this.childrens.forEach(function(t,a){t.isOpen&&e.push(t.nameSync)}),this.$emit("change",e)}}};t.default=n},7365:function(e,t,a){"use strict";var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac6a"),a("7f7f"),a("6b54"),a("87b3"),a("c5f6");var i=n(a("5753")),s={name:"UniCollapseItem",components:{uniIcon:i.default},props:{title:{type:String,default:""},name:{type:[Number,String],default:0},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!1},open:{type:Boolean,default:!1},thumb:{type:String,default:""}},data:function(){var e=this.__call_hook?"uni_collapse_item":"Uni_".concat(Math.ceil(1e6*Math.random()).toString(36));return{isOpen:!1,height:"auto",elId:e}},watch:{open:function(e){this.isOpen=e}},inject:["collapse"],created:function(){if(this.isOpen=this.open,this.nameSync=this.name?this.name:this.collapse.childrens.length,this.collapse.childrens.push(this),this.collapse.accordion&&this.isOpen){var e=this.collapse.childrens[this.collapse.childrens.length-2];e&&(this.collapse.childrens[this.collapse.childrens.length-2].isOpen=!1)}},mounted:function(){this.getSize()},methods:{getSize:function(){var e=this;this.showAnimation&&uni.createSelectorQuery().in(this).select("#".concat(this.elId)).boundingClientRect().exec(function(t){e.height=t[0].height+"px"})},onClick:function(){var e=this;this.disabled||(this.collapse.accordion&&this.collapse.childrens.forEach(function(t){t!==e&&(t.isOpen=!1)}),this.isOpen=!this.isOpen,this.collapse.onChange&&this.collapse.onChange())}}};t.default=s},"810b":function(e,t,a){"use strict";var n=a("f8ca"),i=a.n(n);i.a},"92c6":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.uni-collapse-cell[data-v-295a1270]{position:relative}.uni-collapse-cell--hover[data-v-295a1270]{background-color:#f1f1f1}.uni-collapse-cell--open[data-v-295a1270]{background-color:#f1f1f1}.uni-collapse-cell--disabled[data-v-295a1270]{opacity:.3}.uni-collapse-cell--animation[data-v-295a1270]{-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s}.uni-collapse-cell[data-v-295a1270]:after{position:absolute;z-index:3;right:0;bottom:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.uni-collapse-cell__title[data-v-295a1270]{padding:%?12?% %?30?%;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.uni-collapse-cell__title-extra[data-v-295a1270]{margin-right:%?18?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.uni-collapse-cell__title-img[data-v-295a1270]{height:%?52?%;width:%?52?%}.uni-collapse-cell__title-arrow[data-v-295a1270]{width:20px;height:20px;-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center}.uni-collapse-cell__title-arrow.uni-active[data-v-295a1270]{-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg)}.uni-collapse-cell__title-inner[data-v-295a1270]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.uni-collapse-cell__title-text[data-v-295a1270]{font-size:%?24?%;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;color:inherit;line-height:1.5;overflow:hidden}.uni-collapse-cell__content[data-v-295a1270]{position:relative;width:100%;overflow:hidden;background:#fff}.uni-collapse-cell__content uni-view[data-v-295a1270]{font-size:%?28?%}',""])},bd14:function(e,t,a){"use strict";a.r(t);var n=a("d840"),i=a("101e");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("01ef");var o=a("2877"),l=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"089d00af",null);t["default"]=l.exports},d840:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-collapse"},[e._t("default")],2)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},f8ae:function(e,t,a){var n=a("151c");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("61036523",n,!0,{sourceMap:!1,shadowMode:!1})},f8ca:function(e,t,a){var n=a("92c6");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("ceaad6ec",n,!0,{sourceMap:!1,shadowMode:!1})},fe43:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"uni-page-body[data-v-f56a6716]{background:#fafafa}.item[data-v-f56a6716]{padding:%?20?% %?30?%;background:#fff;border-bottom:%?1?% solid#f6f5ec}.rights_item[data-v-f56a6716]{margin-bottom:%?20?%}body.?%PAGE?%[data-v-f56a6716]{background:#fafafa}",""])},ff03:function(e,t,a){"use strict";a.r(t);var n=a("2070"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},ff65:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{class:["uni-collapse-cell",{"uni-collapse-cell--disabled":e.disabled,"uni-collapse-cell--open":e.isOpen}],attrs:{"hover-class":e.disabled?"":"uni-collapse-cell--hover"}},[a("v-uni-view",{staticClass:"uni-collapse-cell__title",on:{click:function(t){t=e.$handleEvent(t),e.onClick(t)}}},[e.thumb?a("v-uni-view",{staticClass:"uni-collapse-cell__title-extra"},[a("v-uni-image",{staticClass:"uni-collapse-cell__title-img",attrs:{src:e.thumb}})],1):e._e(),a("v-uni-view",{staticClass:"uni-collapse-cell__title-inner"},[a("v-uni-view",{staticClass:"uni-collapse-cell__title-text"},[e._v(e._s(e.title))])],1),a("v-uni-view",{staticClass:"uni-collapse-cell__title-arrow",class:{"uni-active":e.isOpen,"uni-collapse-cell--animation":!0===e.showAnimation}},[a("uni-icon",{attrs:{color:"#bbb",size:"20",type:"arrowdown"}})],1)],1),a("v-uni-view",{staticClass:"uni-collapse-cell__content",class:{"uni-collapse-cell--animation":!0===e.showAnimation},style:{height:e.isOpen?"auto":"0px"}},[a("v-uni-view",{attrs:{id:e.elId}},[e._t("default")],2)],1)],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},ff67:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":e.modify_desc},on:{"click-right":function(t){t=e.$handleEvent(t),e.start_add(t)}}}),a("v-uni-view",[a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("姓名")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入姓名"},model:{value:e.staff_name,callback:function(t){e.staff_name=t},expression:"staff_name"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("账号")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"手机号(员工不用注册,直接在员工登陆界面输入即可)",type:"number",maxlength:"11"},model:{value:e.staff_phone,callback:function(t){e.staff_phone=t},expression:"staff_phone"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("密码")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入登录密码",type:"number",maxlength:"11"},model:{value:e.staff_password,callback:function(t){e.staff_password=t},expression:"staff_password"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("联系地址")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入地址"},model:{value:e.staff_address,callback:function(t){e.staff_address=t},expression:"staff_address"}})],1),a("v-uni-navigator",{staticClass:"display_flex_bet item",attrs:{"hover-class":"none",url:"../../shops/shops?type=choose"}},[a("v-uni-view",{staticClass:"display_flex"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("门店")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请选择门店"},model:{value:e.shop_name,callback:function(t){e.shop_name=t},expression:"shop_name"}})],1),a("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#ddd"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item",staticStyle:{"margin-bottom":"60rpx"}},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[e._v("启用")]),a("v-uni-switch",{attrs:{checked:e.disabled},on:{change:function(t){t=e.$handleEvent(t),e.switchChange(t)}}})],1),a("uni-collapse",[a("uni-collapse-item",{attrs:{"show-animation":!0,title:"管理权限"}},[a("v-uni-view",{staticStyle:{padding:"30rpx"}},[a("v-uni-checkbox-group",{on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange(t)}}},e._l(e.manage,function(t,n){return a("v-uni-view",{key:""+n,staticClass:"rights_item"},[a("v-uni-view",{staticClass:"display_flex"},[a("v-uni-checkbox",{staticClass:"round blue",staticStyle:{transform:"scale(0.9)"},attrs:{value:""+n,checked:t.checked}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(t.name))])],1),2==n?a("v-uni-view",{staticStyle:{"padding-left":"80rpx"}},[-1!=e.current.indexOf("2")?a("v-uni-checkbox-group",{on:{change:function(t){t=e.$handleEvent(t),e.checkstockChange(t)}}},e._l(e.stocks,function(t,n){return a("v-uni-view",{key:n,staticClass:"display_flex rights_item"},[a("v-uni-checkbox",{staticClass:"round blue",staticStyle:{transform:"scale(0.9)"},attrs:{value:t.objectId,checked:t.checked}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(t.name))])],1)}),1):e._e()],1):e._e()],1)}),1)],1)],1)],1),a("v-uni-view",[a("uni-collapse",[a("uni-collapse-item",{attrs:{"show-animation":!0,title:"查看权限"}},[a("v-uni-view",{staticStyle:{padding:"30rpx"}},[a("v-uni-checkbox-group",{on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange_record(t)}}},e._l(e.recode,function(t,n){return a("v-uni-view",{key:""+n,staticClass:"display_flex rights_item"},[a("v-uni-checkbox",{staticClass:"round blue",staticStyle:{transform:"scale(0.9)"},attrs:{value:""+n,checked:t.checked}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(t.name))])],1)}),1)],1)],1)],1)],1),a("v-uni-view",[a("uni-collapse",[a("uni-collapse-item",{attrs:{"show-animation":!0,title:"其他权限"}},[a("v-uni-view",{staticStyle:{padding:"30rpx"}},[a("v-uni-checkbox-group",{on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange_other(t)}}},e._l(e.others,function(t,n){return a("v-uni-view",{key:""+n,staticClass:"display_flex rights_item"},[a("v-uni-checkbox",{staticClass:"round blue",staticStyle:{transform:"scale(0.9)"},attrs:{value:""+n,checked:t.checked}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(t.name))])],1)}),1)],1)],1)],1)],1)],1)],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},ffc1:function(e,t,a){var n=a("fe43");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("7934f453",n,!0,{sourceMap:!1,shadowMode:!1})}}]);