(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-good_allocation-good_allocation"],{"27eb":function(t,e,n){"use strict";var a=n("b677"),i=n.n(a);i.a},"6ce5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"确定",leftIcon:"scan","left-text":"扫码"},on:{"click-right":function(e){e=t.$handleEvent(e),t.confrim_this(e)},"click-left":function(e){e=t.$handleEvent(e),t.scanGoods(e)}}}),n("v-uni-view",{staticClass:"page"},t._l(t.products,function(e,a){return n("v-uni-view",{key:a,staticClass:"margin-b-10"},[n("unicard",{attrs:{title:"品名："+e.goodsName}},[n("v-uni-view",[n("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[t._v("可调数量："+t._s(e.reserve))]),n("v-uni-view",{staticClass:"margin-t-5 display_flex"},[t._v("调出仓库："),n("v-uni-view",[t._v(t._s(t.stock.stock_name))])],1),n("v-uni-view",{staticClass:"margin-t-5"},[t._v("调出库存："),n("uninumberbox",{attrs:{min:0,max:e.reserve},on:{change:function(e){e=t.$handleEvent(e),t.handleNumChange(e,a)}}})],1),n("v-uni-view",{staticClass:"bottom_del"},[n("v-uni-view",{staticClass:"del",on:{click:function(e){e=t.$handleEvent(e),t.handleDel(a)}}},[n("fa-icon",{attrs:{type:"close",size:"15",color:"#fff"}}),t._v("删除")],1)],1)],1)],1)],1)}),1)],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"7ae0":function(t,e,n){"use strict";n.r(e);var a=n("aca5"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},aca5:function(t,e,n){"use strict";(function(t){var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var i=a(n("5d73"));n("28a5"),n("7514");var o,r,l=a(n("906f")),c=a(n("5e7b")),u=a(n("a99a")),s=a(n("eaf0")),d=a(n("f4e7")),f=a(n("36cf")),v={components:{unicard:c.default,faIcon:s.default,uninumberbox:u.default,uniNavBar:d.default,uniIcon:f.default},data:function(){return{products:null,stock:uni.getStorageSync("warehouse")[0].stock}},onLoad:function(e){var n=this;if(o=uni.getStorageSync("uid"),r=this,uni.removeStorageSync("is_option"),e.id){uni.showLoading({title:"加载中..."});var a=l.default.Query("Goods");"false"==e.type?a.equalTo("objectId","==",e.id):a.equalTo("productCode","==",e.id),a.equalTo("userId","==",o),a.find().then(function(e){t.log(e),-1==e[0].status?uni.showToast({title:"该产品已删除",icon:"none"}):(e[0].num=1,e[0].total_money=1*e[0].retailPrice,e[0].modify_retailPrice=e[0].retailPrice,n.products=e),uni.hideLoading()})}else this.products=uni.getStorageSync("products")},methods:{scanGoods:function(){uni.scanCode({success:function(e){uni.showLoading({title:"加载中..."});var n=e.result,a=n.split("-"),c=l.default.Query("Goods");"false"==a[1]?c.equalTo("objectId","==",a[0]):c.equalTo("productCode","==",a[0]),c.equalTo("userId","==",o),c.find().then(function(e){if(t.log(e),-1==e[0].status)uni.showToast({title:"该产品已删除",icon:"none"});else{var n=!0,a=!1,o=void 0;try{for(var l,c=(0,i.default)(e);!(n=(l=c.next()).done);n=!0){var u=l.value;u.num=1,u.total_money=1*u.retailPrice,u.really_total_money=1*u.retailPrice,u.modify_retailPrice=u.retailPrice}}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}r.products=r.products.concat(e)}uni.hideLoading()})},fail:function(t){uni.showToast({title:"未识别到条形码",icon:"none"})}})},confrim_this:function(){uni.navigateTo({url:"/pages/common/good_allocation/allocation_detail/allocation_detail"})},handleNumChange:function(t,e){this.products[e].num=t||0,this.products[e].total_money=t*Number(this.products[e].modify_retailPrice),uni.setStorageSync("products",this.products)},handleDel:function(e){t.log(e),1==this.products.length?uni.showToast({title:"最少选择一个产品",icon:"none"}):(this.products.splice(e,1),uni.setStorageSync("products",this.products))},getrealprice:function(t,e){this.products[e].modify_retailPrice=t.target.value,this.products[e].total_money=this.products[e].num*Number(t.target.value),uni.setStorageSync("products",this.products)}}};e.default=v}).call(this,n("5a52")["default"])},b677:function(t,e,n){var a=n("dfa7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1e12f6ea",a,!0,{sourceMap:!1,shadowMode:!1})},beea:function(t,e,n){"use strict";n.r(e);var a=n("6ce5"),i=n("7ae0");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("27eb");var r=n("2877"),l=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,"66a703a9",null);e["default"]=l.exports},dfa7:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".page[data-v-66a703a9]{font-size:%?28?%;height:calc(100vh - %?88?%);overflow:scroll}.margin-b-10[data-v-66a703a9]{margin-top:%?20?%}.margin-t-5[data-v-66a703a9]{margin:%?10?% 0}.input_withlabel[data-v-66a703a9]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?10?% 0}.bottom_del[data-v-66a703a9]{text-align:right}.del[data-v-66a703a9]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#aa2116;color:#fff;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:%?4?% %?12?%;border-radius:%?8?%}.input_label[data-v-66a703a9]{border:%?1?% solid#ddd;border-radius:%?8?%;padding:0 %?6?%;width:%?140?%;color:#aa2116}",""])}}]);