(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-custom-producer_detail-producer_detail"],{"0069":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.loading?i("loading"):i("v-uni-view",[i("uni-nav-bar",{attrs:{fixed:!0,color:"#333333","background-color":"#FFFFFF","right-text":"操作"},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.show_options.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"display_flex_bet list_item border_bottom"},[i("v-uni-view",{staticClass:"left_desc"},[t._v("供货商昵称")]),i("v-uni-view",[t._v(t._s(t.producer.producer_name))])],1),i("v-uni-view",{staticClass:"display_flex_bet list_item border_bottom"},[i("v-uni-view",{staticClass:"left_desc"},[t._v("联系电话")]),t.producer.producer_phone?i("v-uni-view",[t._v(t._s(t.producer.producer_phone))]):i("v-uni-view",[t._v("未填写")])],1),i("v-uni-navigator",{staticClass:"display_flex_bet list_item border_bottom",attrs:{"hover-class":"none",url:"debt_history/debt_history?id="+t.producer.objectId+"&name="+t.producer.producer_name}},[i("v-uni-view",{staticClass:"left_desc"},[t._v("欠供应商款")]),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("￥"+t._s(t.producer.debt))]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),i("v-uni-view",{staticClass:"display_flex_bet list_item border_bottom"},[i("v-uni-view",{staticClass:"left_desc"},[t._v("建立时间")]),i("v-uni-view",[t._v(t._s(t.producer.createdAt))])],1),i("v-uni-navigator",{staticClass:"list_item display_flex_bet",staticStyle:{margin:"20rpx 0"},attrs:{"hover-class":"none",url:"history/history?id="+t.producer.objectId}},[i("v-uni-text",{staticClass:"left_desc"},[t._v("交易历史")]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1),i("v-uni-navigator",{staticClass:"list_item display_flex_bet",staticStyle:{margin:"20rpx 0"},attrs:{"hover-class":"none",url:"debt_history/debt_history?id="+t.producer.objectId+"&name="+t.producer.producer_name+"&type=producer"}},[i("v-uni-text",{staticClass:"left_desc"},[t._v("付款流水")]),i("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1),i("uni-popup",{attrs:{show:t.modal_show,position:"middle",mode:"fixed"},on:{hidePopup:function(e){arguments[0]=e=t.$handleEvent(e),t.modal_show=!1}}},[i("v-uni-view",{staticStyle:{width:"500rpx"}},[i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticStyle:{width:"160rpx",color:"#999"}},[t._v("本次还款：")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入本次还款金额",type:"digit"},model:{value:t.modal_sk.sk_number,callback:function(e){t.$set(t.modal_sk,"sk_number",e)},expression:"modal_sk.sk_number"}})],1),i("v-uni-view",{staticClass:"display_flex"},[i("v-uni-view",{staticStyle:{width:"160rpx",color:"#999"}},[t._v("备注：")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入备注信息"},model:{value:t.modal_sk.beizhu,callback:function(e){t.$set(t.modal_sk,"beizhu",e)},expression:"modal_sk.beizhu"}})],1),i("v-uni-view",{staticClass:"modal_confrimbutton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confrim_sk.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),i("v-uni-view",{staticClass:"getmoney_button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotopay.apply(void 0,arguments)}}},[t._v("还款")])],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},"2af7":function(t,e,i){var o=i("ef04");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("a1ac3a7e",o,!0,{sourceMap:!1,shadowMode:!1})},"2f69":function(t,e,i){"use strict";(function(t){var o=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var n,a=o(i("9546")),s=o(i("7faa")),r=o(i("7fd5")),d=o(i("4d52")),u=o(i("7aeb")),c=o(i("120a")),l={components:{faIcon:d.default,loading:c.default,uniPopup:u.default},data:function(){return{loading:!0,modal_show:!1,producer:{},modal_sk:{sk_number:"",beizhu:""}}},onLoad:function(e){n=this,s.default.producer_detail(e.id).then(function(e){t.log(e),e.debt||(e.debt=0),n.producer=e,n.loading=!1})},methods:{gotopay:function(){uni.setStorageSync("producer",n.producer),uni.redirectTo({url:"/pages/finance/outRecord/outRecord"})},show_options:function(){uni.showActionSheet({itemList:["编辑","删除"],success:function(t){0==t.tapIndex?n.edit(n.producer):1==t.tapIndex&&n.delete_this(n.producer.objectId)},fail:function(e){t.log(e.errMsg)}})},edit:function(t){uni.setStorageSync("customs",t),uni.setStorageSync("custom_type","producers"),uni.navigateTo({url:"../add/add"})},delete_this:function(t){uni.showModal({title:"提示",content:"是否删除此客户",success:function(e){e.confirm&&n.delete_data("producers",t)}})},delete_data:function(e,i){t.log(i);var o=a.default.Query(e);o.destroy(i).then(function(e){t.log(e),uni.showToast({title:"删除成功",icon:"none"}),uni.navigateBack({delta:1})}).catch(function(e){t.log(e)})},confrim_sk:function(){t.log(n.modal_sk);var e=n.modal_sk.sk_number,i=n.modal_sk.beizhu,o=n.producer.objectId;if(null==e||0==e.length)uni.showToast({title:"请输入还款金额",icon:"none"});else{uni.showLoading({title:"加载中..."}),n.modal_show=!1;var d=a.default.Query("producers");d.get(o).then(function(d){if(d.debt-Number(e)<0)uni.hideLoading(),uni.showToast({icon:"none",title:"还款金额超出"});else if(null==d.debt||0==d.debt)uni.hideLoading(),uni.showToast({icon:"none",title:"没有欠款"});else{d.set("debt",d.debt-Number(e)),d.save();var u=a.default.Pointer("producers"),c=u.set(o),l=a.default.Pointer("_User"),p=l.set(uni.getStorageSync("uid")),f=a.default.Pointer("_User"),v=f.set(uni.getStorageSync("masterId")),b=a.default.Query("debt_history");b.set("producer",c),b.set("master",p),b.set("operater",v),b.set("debt_number",Number(e)),b.set("beizhu",i),b.save().then(function(i){t.log(i),r.default.log(uni.getStorageSync("user").nickName+"操作'"+n.producer.producer_name+"'供货商收款￥"+e+"元",6,i.objectId),uni.hideLoading(),s.default.producer_detail(n.producer.objectId).then(function(e){t.log(e),n.producer=e,uni.showToast({title:"还款成功"})})}).catch(function(e){t.log(e)})}}).catch(function(e){t.log(e)})}}}};e.default=l}).call(this,i("5a52")["default"])},"39cb":function(t,e,i){"use strict";var o=i("3e40"),n=i.n(o);n.a},"3e40":function(t,e,i){var o=i("ab2c");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("05c2212e",o,!0,{sourceMap:!1,shadowMode:!1})},"567a":function(t,e,i){"use strict";i.r(e);var o=i("0069"),n=i("bd5b");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("a1ec");var s=i("f0c5"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"64846b46",null);e["default"]=r.exports},6753:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"UniPopup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(t){this.offsetTop=t?44:0}},created:function(){var t=0;t=this.h5Top?0:44,this.offsetTop=t},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};e.default=o},"7aeb":function(t,e,i){"use strict";i.r(e);var o=i("c0ba"),n=i("c492");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("39cb");var s=i("f0c5"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"72114cd8",null);e["default"]=r.exports},a1ec:function(t,e,i){"use strict";var o=i("2af7"),n=i.n(o);n.a},ab2c:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.uni-mask[data-v-72114cd8]{position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-72114cd8]{position:fixed;z-index:999;background-color:#fff}.uni-popup-middle[data-v-72114cd8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-72114cd8]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-72114cd8]{border-radius:%?10?%;padding:%?30?%}.uni-close-bottom[data-v-72114cd8],.uni-close-right[data-v-72114cd8]{position:absolute;bottom:%?-180?%;text-align:center;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-bottom[data-v-72114cd8]{margin:auto;left:0;right:0}.uni-close-right[data-v-72114cd8]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-72114cd8]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-bottom[data-v-72114cd8],.uni-popup-top[data-v-72114cd8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-popup-top[data-v-72114cd8]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-72114cd8]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""])},bd5b:function(t,e,i){"use strict";i.r(e);var o=i("2f69"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},c0ba:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-mask",style:{top:t.offsetTop+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hide.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+t.position+" uni-popup-"+t.mode},[t._v(t._s(t.msg)),t._t("default"),"middle"===t.position&&"insert"===t.mode?i("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===t.buttonMode,"uni-close-right":"right"===t.buttonMode},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeMask.apply(void 0,arguments)}}}):t._e()],2)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},c492:function(t,e,i){"use strict";i.r(e);var o=i("6753"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},ef04:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-page-body[data-v-64846b46]{color:#3d3d3d}.modal_confrimbutton[data-v-64846b46]{background:#426ab3;color:#fff;width:60%;padding:%?20?% 0;text-align:center;margin-left:20%;border-radius:%?8?%;margin-top:%?30?%}.list_item[data-v-64846b46]{padding:%?20?% %?30?%;background:#fff}.left_desc[data-v-64846b46]{color:#999}.border_bottom[data-v-64846b46]{border-bottom:%?1?% solid#DDDDDD}.getmoney_button[data-v-64846b46]{width:100%;background:#426ab3;color:#fff;padding:%?20?% 0;text-align:center;position:fixed;bottom:0;left:0}",""])}}]);