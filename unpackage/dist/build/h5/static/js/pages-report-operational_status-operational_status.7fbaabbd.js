(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-operational_status-operational_status"],{"112b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"Loading_view"},[n("v-uni-image",{staticClass:"loading_image",attrs:{src:"/static/timg.gif"}}),n("v-uni-view",{staticStyle:{color:"#999","margin-top":"3%"}},[e._v("加载中...")])],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},"12ae":function(e,t,n){"use strict";n.r(t);var i=n("58e4"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},"2bef":function(e,t,n){"use strict";var i=n("288e");n("6b54"),n("87b3"),n("c5f6");var a=i(n("5d73"));n("7514"),e.exports={handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,t,n){var i=Bmob.Pointer("_User"),a=i.set(uni.getStorageSync("uid")),s=Bmob.Query("logs");s.set("parent",a),s.set("log",e),s.set("detail_id",n),s.set("type",t),s.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_shopOut:function(e,t){console.log(e,t);var n=Bmob.Query("shops");n.set("id",e),n.set("have_out",t),n.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_staffOut:function(e){if(console.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var t=Bmob.Query("staffs");t.set("id",uni.getStorageSync("user").objectId),t.set("have_out",e+uni.getStorageSync("user").have_out),t.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");console.log(e);var t=Bmob.Query("Goods");t.equalTo("userId","==",e),t.find().then(function(e){console.log(e);var t=!0,n=!1,i=void 0;try{for(var s,o=(0,a.default)(e);!(t=(s=o.next()).done);t=!0){var r=s.value;console.log(r),Number(r.costPrice)*r.reserve,r.reserve}}catch(l){n=!0,i=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})},getDay:function(e,t){var n=this,i=new Date,a=i.getTime()+864e5*e;i.setTime(a);var s=i.getFullYear(),o=i.getMonth(),r=i.getDate();return o=n.handleMonth(o+1),r=n.handleMonth(r),t?s+"-"+o+"-"+r+" 00:00:00":s+"-"+o+"-"+r},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}},"34b6":function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("5d73"));n("7514");var s=i(n("795b")),o={querycount:function(){var e=uni.getStorageSync("uid"),t=Bmob.Query("Goods");t.equalTo("userId","==",e),t.count().then(function(e){console.log("共有".concat(e,"条记录"))})},gettoday_detail:function(e,t){var n=uni.getStorageSync("uid"),i=0,a=0,o=0,r=0,l=0,u=0,c={};return new s.default(function(s,_){var d=Bmob.Query("Bills");d.equalTo("userId","==",n),d.equalTo("createdAt",">=",e),d.equalTo("createdAt","<=",t),d.select("goodsId","num","total_money","type"),d.limit(1e3),d.include("goodsId"),d.find().then(function(_){for(var d=0;d<_.length;d++)1==_[d].type?(i+=_[d].num,o+=_[d].num*_[d].goodsId.costPrice,l+=_[d].total_money):-1==_[d].type&&(a+=_[d].num,r+=_[d].num*_[d].goodsId.retailPrice,u+=_[d].total_money);c.get_reserve=i.toFixed(uni.getStorageSync("setting").show_float),c.out_reserve=a.toFixed(uni.getStorageSync("setting").show_float),c.get_reserve_real_money=o.toFixed(uni.getStorageSync("setting").show_float),c.out_reserve_real_money=r.toFixed(uni.getStorageSync("setting").show_float),c.get_reserve_num=l.toFixed(uni.getStorageSync("setting").show_float),c.out_reserve_num=u.toFixed(uni.getStorageSync("setting").show_float),c.get_reserve_get_num=(l-o).toFixed(uni.getStorageSync("setting").show_float),c.out_reserve_get_num=(u-r).toFixed(uni.getStorageSync("setting").show_float),console.log(i);var v=0,g=0,f=Bmob.Query("order_opreations");f.equalTo("master","==",n),f.equalTo("createdAt",">=",e),f.equalTo("createdAt","<=",t),f.equalTo("type","==",-1),f.find().then(function(e){for(var t=0;t<e.length;t++)v+=e[t].all_money,g+=e[t].real_money;c.should_get_money=v,c.real_get_money=g}),s(c)})})},loadallGoods:function(){var e=uni.getStorageSync("uid");return new s.default(function(t,n){var i=0,s=0,o=0,r=0,l={},u=Bmob.Query("Goods");u.equalTo("userId","==",e),u.equalTo("status","!=",-1),u.select("reserve","costPrice"),u.limit(1e3),u.find().then(function(e){var n=!0,u=!1,c=void 0;try{for(var _,d=(0,a.default)(e);!(n=(_=d.next()).done);n=!0){var v=_.value;0==v.stocktype&&(r+=1),i+=v.reserve,s+=v.reserve*v.costPrice,o+=1,l.total_money=s.toFixed(uni.getStorageSync("print_setting").show_float),l.total_reserve=i.toFixed(uni.getStorageSync("print_setting").show_float),l.total_products=o,l.warn_num=r,t(l)}}catch(g){u=!0,c=g}finally{try{n||null==d.return||d.return()}finally{if(u)throw c}}})})}};t.default=o},4077:function(e,t,n){var i=n("f149");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("2520deae",i,!0,{sourceMap:!1,shadowMode:!1})},4773:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.loading?n("loading"):n("v-uni-view",[n("v-uni-view",{staticClass:"select"},[n("v-uni-view",{staticClass:"section",staticStyle:{"border-right":"1rpx solid#DDDDDD"}},[n("v-uni-picker",{attrs:{mode:"date",end:e.start_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_startChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.start_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1),n("v-uni-view",{staticClass:"section"},[n("v-uni-picker",{attrs:{mode:"date",end:e.end_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_endChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.end_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"list"},[n("v-uni-view",{staticClass:"display_flex list_frst"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/chengben.png"}}),n("v-uni-text",{staticClass:"text_notice"},[e._v(e._s(e.i18n.a)+" "+e._s(e.reserve_money))])],1),n("v-uni-view",{staticClass:"display_flex_bet list_second"},[n("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#CCCCCC"}},[n("v-uni-view",[e._v("库存总数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.all_reserve))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-view",[e._v("预警产品数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.warn_num))])],1)],1)],1),n("v-uni-view",{staticClass:"second_list"},[n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段入库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段出库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库成本总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_real_money))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库成本总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_real_money))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计卖出总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计买进总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_num))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计可获利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_get_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("毛利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_get_num))])],1)],1)],1)],1)],1)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},"54b4":function(e,t,n){"use strict";n.r(t);var i=n("cdca"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},"58e4":function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("28a5");var a=i(n("2bef")),s=i(n("34b6")),o=i(n("b841")),r=void 0,l={components:{loading:o.default},data:function(){return{loading:!0,start_date:a.default.getDay(0,!0),end_date:a.default.getDay(1,!0),start_date_desc:a.default.getDay(0,!0).split(" ")[0],end_date_desc:a.default.getDay(1,!0).split(" ")[0],reserve_money:0,all_reserve:0,warn_num:0,today_in:0,today_out:0,get_reserve:0,out_reserve:0,get_reserve_real_money:0,out_reserve_real_money:0,get_reserve_num:0,out_reserve_num:0,get_reserve_get_num:0,out_reserve_get_num:0,should_get_money:0,real_get_money:0}},onLoad:function(){r=this,uni.getStorageSync("uid"),r.get_allCost(),r.gettoday_detail(),console.log(a.default.getDay(1,!0))},methods:{bindDate_startChange:function(e){r.start_date=e.detail.value+" 00:00:00",r.gettoday_detail()},bindDate_endChange:function(e){r.start_date=e.detail.value+" 00:00:00",r.gettoday_detail()},get_allCost:function(){s.default.loadallGoods().then(function(e){console.log(e),r.reserve_money=e.total_money,r.all_reserve=e.total_reserve,r.warn_num=e.warn_num,r.loading=!1})},gettoday_detail:function(){s.default.gettoday_detail(r.start_date,r.end_date).then(function(e){console.log("今日概况",e),r.get_reserve=e.get_reserve,r.out_reserve=e.out_reserve,r.get_reserve_real_money=e.get_reserve_real_money,r.out_reserve_real_money=e.out_reserve_real_money,r.get_reserve_num=e.get_reserve_num,r.out_reserve_num=e.out_reserve_num,r.get_reserve_get_num=e.get_reserve_get_num,r.out_reserve_get_num=e.out_reserve_get_num,r.should_get_money=e.should_get_money,r.real_get_money=e.real_get_money})}},computed:{i18n:function(){return this.$t("operational_status")}}};t.default=l},"65e3":function(e,t,n){"use strict";var i=n("4077"),a=n.n(i);a.a},"6e33":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".Loading_view[data-v-b97421aa]{height:100vh;width:100%;text-align:center;background:#fff}.loading_image[data-v-b97421aa]{width:%?200?%;height:%?200?%;margin-top:50%}",""])},"723d":function(e,t,n){"use strict";n.r(t);var i=n("4773"),a=n("12ae");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("65e3");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"bd1be980",null);t["default"]=r.exports},b841:function(e,t,n){"use strict";n.r(t);var i=n("112b"),a=n("54b4");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("c1c9");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"b97421aa",null);t["default"]=r.exports},c1c9:function(e,t,n){"use strict";var i=n("da86"),a=n.n(i);a.a},cdca:function(e,t,n){},da86:function(e,t,n){var i=n("6e33");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("753d171d",i,!0,{sourceMap:!1,shadowMode:!1})},f149:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.select[data-v-bd1be980]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#fff;padding:%?20?% %?30?%;margin-bottom:%?20?%}.select .section[data-v-bd1be980]{width:50%;text-align:center}.list[data-v-bd1be980]{background:#fff}.list .list_frst[data-v-bd1be980]{padding:%?10?% %?20?%;border-bottom:%?1?% solid #ccc}.list .list_frst .icon_img[data-v-bd1be980]{width:%?60?%;height:%?60?%}.list .list_frst .text_notice[data-v-bd1be980]{margin-left:%?10?%}.list .list_second[data-v-bd1be980]{padding:%?10?%;font-size:%?24?%;line-height:%?40?%}.list .list_second .item[data-v-bd1be980]{width:50%;padding-left:%?20?%}.list .list_second .show_num[data-v-bd1be980]{color:#3d3d3d;font-weight:700}.second_list[data-v-bd1be980]{padding:%?20?%;background:#fff;margin-top:%?30?%}.second_list .second_item[data-v-bd1be980]{width:50%}.second_list .icon_img[data-v-bd1be980]{width:%?60?%;height:%?60?%;margin-right:%?10?%}.second_list .text_notice[data-v-bd1be980]{font-weight:%?24?%}.second_list .list_item[data-v-bd1be980]{padding:%?10?% 0;border-bottom:%?1?% solid #ccc}.second_list .reserve_text[data-v-bd1be980]{color:#3d3d3d;font-weight:700}.second_list .text_notice[data-v-bd1be980]{font-size:%?20?%;margin-bottom:%?8?%}',""])}}]);