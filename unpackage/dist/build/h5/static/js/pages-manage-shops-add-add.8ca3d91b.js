(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-shops-add-add"],{"0d59":function(t,e,a){"use strict";var n=a("9d0d"),i=a.n(n);i.a},"139f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-navbar"},[a("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.border,"uni-navbar--border":t.border},style:{"background-color":t.backgroundColor}},[t.statusBar?a("uni-status-bar"):t._e(),a("v-uni-view",{staticClass:"uni-navbar__header",style:{color:t.color}},[a("v-uni-view",{staticClass:"uni-navbar__header-btns",on:{click:function(e){e=t.$handleEvent(e),t.onClickLeft(e)}}},[t.leftIcon.length?a("v-uni-view",[a("uni-icon",{attrs:{type:t.leftIcon,color:t.color,size:"24"}})],1):t._e(),t.leftText.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text",class:{"uni-navbar-btn-icon-left":!t.leftIcon.length}},[t._v(t._s(t.leftText))]):t._e(),t._t("left")],2),a("v-uni-view",{staticClass:"uni-navbar__header-container"},[t.title.length?a("v-uni-view",{staticClass:"uni-navbar__header-container-inner"},[t._v(t._s(t.title))]):t._e(),t._t("default")],2),a("v-uni-view",{staticClass:"uni-navbar__header-btns",on:{click:function(e){e=t.$handleEvent(e),t.onClickRight(e)}}},[t.rightIcon.length?a("v-uni-view",[a("uni-icon",{attrs:{type:t.rightIcon,color:t.color,size:"24"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?a("v-uni-view",{staticClass:"uni-navbar-btn-text"},[t._v(t._s(t.rightText))]):t._e(),t._t("right")],2)],1)],1),t.fixed?a("v-uni-view",{staticClass:"uni-navbar__placeholder"},[t.statusBar?a("uni-status-bar"):t._e(),a("v-uni-view",{staticClass:"uni-navbar__placeholder-view"})],1):t._e()],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"1a9b":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=uni.getSystemInfoSync().statusBarHeight+"px",i={name:"UniStatusBar",data:function(){return{statusBarHeight:n}}};e.default=i},"1d3b":function(t,e,a){"use strict";a.r(e);var n=a("9116"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"27b1":function(t,e,a){"use strict";a.r(e);var n=a("de4d"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"422b":function(t,e,a){"use strict";a.r(e);var n=a("c4d6"),i=a("4ff0");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("fa6c");var s=a("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"4f6a8297",null);e["default"]=r.exports},4807:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'.uni-navbar__content[data-v-7b3df830]{display:block;position:relative;width:100%;background-color:#fff;overflow:hidden;padding:0 %?30?%;width:calc(100% - %?60?%)}.uni-navbar__content uni-view[data-v-7b3df830]{line-height:%?78?%}.uni-navbar__header[data-v-7b3df830]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;height:%?78?%;line-height:%?78?%;font-size:%?26?%;font-weight:700;color:#333}.uni-navbar__header-btns[data-v-7b3df830]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding:0 %?12?%}.uni-navbar__header-btns[data-v-7b3df830]:first-child{padding-left:0}.uni-navbar__header-btns[data-v-7b3df830]:last-child{text-align:right}.uni-navbar__header-container[data-v-7b3df830]{width:100%;margin:0 %?10?%}.uni-navbar__header-container-inner[data-v-7b3df830]{font-size:%?30?%;text-align:center;padding-right:%?60?%}.uni-navbar__placeholder-view[data-v-7b3df830]{height:%?88?%}.uni-navbar--fixed[data-v-7b3df830]{position:fixed;z-index:998}.uni-navbar--shadow[data-v-7b3df830]{-webkit-box-shadow:0 1px 6px #ccc;box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-7b3df830]:after{position:absolute;z-index:3;bottom:0;left:0;right:0;height:1px;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}',""])},"4a8d":function(t,e,a){var n=a("b83d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("f730349a",n,!0,{sourceMap:!1,shadowMode:!1})},"4ff0":function(t,e,a){"use strict";a.r(e);var n=a("1a9b"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},6624:function(t,e,a){"use strict";(function(e){var n=a("288e"),i=n(a("5d73")),o=n(a("795b")),s=n(a("906f"));t.exports={upload_image:function(t){return new o.default(function(a,n){var o=uni.getStorageSync("user"),r=[];o.is_vip?uni.chooseImage({count:t,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.log(t);var n,o=Date.parse(new Date),u=t.tempFilePaths,l=!0,d=!1,c=void 0;try{for(var f,h=(0,i.default)(u);!(l=(f=h.next()).done);l=!0){var v=f.value;n=s.default.File(o+".jpg",v)}}catch(p){d=!0,c=p}finally{try{l||null==h.return||h.return()}finally{if(d)throw c}}n.save().then(function(t){var e=!0,n=!1,o=void 0;try{for(var s,u=(0,i.default)(t);!(e=(s=u.next()).done);e=!0){s.value;r.push(t[0].url)}}catch(p){n=!0,o=p}finally{try{e||null==u.return||u.return()}finally{if(n)throw o}}a(r)})}}):uni.showToast({title:"您还不是会员，无法使用",icon:"none"})})}}}).call(this,a("5a52")["default"])},"8c99":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".uni-status-bar[data-v-4f6a8297]{display:block;width:100%;height:20px;height:0}",""])},9116:function(t,e,a){"use strict";(function(t){var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7514"),a("c5f6"),a("7f7f");var i,o,s,r=n(a("906f")),u=n(a("6624")),l=n(a("eaf0")),d=n(a("f4e7")),c={components:{faIcon:l.default,uniNavBar:d.default},data:function(){return{user:uni.getStorageSync("user"),Images:[],disabled:!0,shop_name:"",shop_address:"",shop_num:0,shop_phone:"",shop_beizhu:""}},onLoad:function(t){i=this,s=uni.getStorageSync("uid")},onShow:function(){o=uni.getStorageSync("shop"),o?(uni.setNavigationBarTitle({title:"修改门店"}),i.Images=o.Image,i.shop_name=o.name,i.shop_address=o.address,i.shop_phone=o.phone,i.shop_num=o.num,i.shop_beizhu=o.beizhu):uni.setNavigationBarTitle({title:"新增门店"})},onUnload:function(){uni.removeStorageSync("shop")},methods:{removeImg:function(t){i.Images.splice(t,1),i.Images=i.Images},upload_image:function(){u.default.upload_image(1).then(function(e){t.log(e),i.Images=e})},switchChange:function(t){i.disabled=t.detail.value},start_add:function(){""==this.shop_name?uni.showToast({title:"请输入门店名字",icon:"none"}):i.add_data()},add_data:function(){uni.showLoading({title:"上传中..."});var e=r.default.Pointer("_User"),a=e.set(s);if(o){var n=r.default.Query("shops");n.set("Image",i.Images),n.set("name",i.shop_name),n.set("num",Number(i.shop_num)),n.set("address",i.shop_address),n.set("phone",i.shop_phone),n.set("beizhu",i.shop_beizhu),n.set("parent",a),n.set("disabled",!i.disabled),n.set("id",o.objectId),n.save().then(function(e){uni.hideLoading(),t.log(e),uni.showToast({title:"修改成功"})}).catch(function(e){t.log(e)})}else{var u=r.default.Query("shops");u.equalTo("parent","==",s),u.equalTo("name","==",i.shop_name),u.find().then(function(e){if(t.log(e),0==e.length){var n=r.default.Query("shops");n.set("Image",i.Images),n.set("name",i.shop_name),n.set("num",Number(i.shop_num)),n.set("address",i.shop_address),n.set("phone",i.shop_phone),n.set("beizhu",i.shop_beizhu),n.set("have_out",0),n.set("disabled",!i.disabled),n.set("parent",a),n.save().then(function(e){t.log(e),uni.hideLoading(),uni.showToast({title:"添加成功"}),i.disabled=!0,i.shop_name="",i.shop_address="",i.shop_num=0,i.shop_phone="",i.shop_beizhu=""}).catch(function(e){t.log(e)})}else uni.showToast({title:"已存在此门店",icon:"none"})})}}}};e.default=c}).call(this,a("5a52")["default"])},9811:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(e){e=t.$handleEvent(e),t.start_add(e)}}},[a("v-uni-view")],1),a("v-uni-view",[a("v-uni-view",{staticStyle:{"margin-top":"20px",background:"#fff",padding:"0 30rpx"}},[a("v-uni-view",{staticClass:"notice_text"},[t._v("上传门店图(会员可用)")]),a("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[a("v-uni-view",{staticClass:"upload_image display_flex"},[t._l(t.Images,function(e,n){return t.Images.length>0?a("v-uni-view",{key:n,staticStyle:{position:"relative"}},[a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:e}}),a("fa-icon",{staticStyle:{position:"absolute",top:"-10rpx",right:"-10rpx"},attrs:{type:"times-circle-o",size:"20",color:"#426ab3"},on:{click:function(e){e=t.$handleEvent(e),t.removeImg(n)}}})],1):t._e()}),0==t.Images.length?a("v-uni-view",{staticStyle:{width:"180rpx",height:"180rpx","line-height":"220rpx","text-align":"center",border:"1rpx solid#ccc","border-radius":"16rpx"},on:{click:function(e){e=t.$handleEvent(e),t.upload_image(e)}}},[a("fa-icon",{attrs:{type:"plus-square-o",size:"40",color:"#426ab3"}})],1):t._e()],2)],1)],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[t._v("门店名字")]),a("v-uni-text",{staticStyle:{color:"#d93a49","margin-right":"20rpx"}},[t._v("*")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入门店名字"},model:{value:t.shop_name,callback:function(e){t.shop_name=e},expression:"shop_name"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("门店地址")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入门店地址"},model:{value:t.shop_address,callback:function(e){t.shop_address=e},expression:"shop_address"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("门店电话")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入门店电话",type:"number",maxlength:"11"},model:{value:t.shop_phone,callback:function(e){t.shop_phone=e},expression:"shop_phone"}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[t._v("排序")]),a("v-uni-text",{staticStyle:{color:"#d93a49","margin-right":"20rpx"}},[t._v("*")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入排序(数值越小,排列越靠前)",type:"number",maxlength:"11"},model:{value:t.shop_num,callback:function(e){t.shop_num=e},expression:"shop_num"}})],1),a("v-uni-view",{staticClass:"display_flex_bet item",staticStyle:{"margin-bottom":"60rpx"}},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("启用")]),a("v-uni-switch",{attrs:{checked:t.disabled},on:{change:function(e){e=t.$handleEvent(e),t.switchChange(e)}}})],1),a("v-uni-view",{staticClass:"display_flex item"},[a("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("备注")]),a("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入备注"},model:{value:t.shop_beizhu,callback:function(e){t.shop_beizhu=e},expression:"shop_beizhu"}})],1)],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"9d0d":function(t,e,a){var n=a("4807");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("768ab04f",n,!0,{sourceMap:!1,shadowMode:!1})},ad75:function(t,e,a){"use strict";a.r(e);var n=a("9811"),i=a("1d3b");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("d9bf");var s=a("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"04d2f54e",null);e["default"]=r.exports},b83d:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"uni-page-body[data-v-04d2f54e]{background:#fafafa}.item[data-v-04d2f54e]{padding:%?20?% %?30?%;background:#fff}.rights_item[data-v-04d2f54e]{margin-bottom:%?20?%}body.?%PAGE?%[data-v-04d2f54e]{background:#fafafa}",""])},c4d6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-status-bar",style:{height:t.statusBarHeight}},[t._t("default")],2)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},d9bf:function(t,e,a){"use strict";var n=a("4a8d"),i=a.n(n);i.a},de4d:function(t,e,a){"use strict";var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("422b")),o=n(a("36cf")),s={name:"UniNavBar",components:{uniStatusBar:i.default,uniIcon:o.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:Boolean,default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:Boolean,default:!1},shadow:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},methods:{onClickLeft:function(){this.$emit("click-left")},onClickRight:function(){this.$emit("click-right")}}};e.default=s},f4e7:function(t,e,a){"use strict";a.r(e);var n=a("139f"),i=a("27b1");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("0d59");var s=a("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"7b3df830",null);e["default"]=r.exports},f8e7:function(t,e,a){var n=a("8c99");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("10b4f2b2",n,!0,{sourceMap:!1,shadowMode:!1})},fa6c:function(t,e,a){"use strict";var n=a("f8e7"),i=a.n(n);i.a}}]);