(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-operational_status-operational_status"],{"0bff":function(e,t,n){"use strict";n.r(t);var a=n("f3c3"),i=n("318f");for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);n("a0ca");var r=n("2877"),o=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,"d5843f1e",null);t["default"]=o.exports},"1f28":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.select[data-v-d5843f1e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#fff;padding:%?20?% %?30?%;margin-bottom:%?20?%}.select .section[data-v-d5843f1e]{width:50%;text-align:center}.list[data-v-d5843f1e]{background:#fff}.list .list_frst[data-v-d5843f1e]{padding:%?10?% %?20?%;border-bottom:%?1?% solid #ccc}.list .list_frst .icon_img[data-v-d5843f1e]{width:%?60?%;height:%?60?%}.list .list_frst .text_notice[data-v-d5843f1e]{margin-left:%?10?%}.list .list_second[data-v-d5843f1e]{padding:%?10?%;font-size:%?24?%;line-height:%?40?%}.list .list_second .item[data-v-d5843f1e]{width:50%;padding-left:%?20?%}.list .list_second .show_num[data-v-d5843f1e]{color:#3d3d3d;font-weight:700}.second_list[data-v-d5843f1e]{padding:%?20?%;background:#fff;margin-top:%?30?%}.second_list .second_item[data-v-d5843f1e]{width:50%}.second_list .icon_img[data-v-d5843f1e]{width:%?60?%;height:%?60?%;margin-right:%?10?%}.second_list .text_notice[data-v-d5843f1e]{font-weight:%?24?%}.second_list .list_item[data-v-d5843f1e]{padding:%?10?% 0;border-bottom:%?1?% solid #ccc}.second_list .reserve_text[data-v-d5843f1e]{color:#3d3d3d;font-weight:700}.second_list .text_notice[data-v-d5843f1e]{font-size:%?20?%;margin-bottom:%?8?%}',""])},"2dc1":function(e,t,n){"use strict";(function(e){var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("5d73"));n("7514");var s=a(n("795b")),r=a(n("c74b")),o={querycount:function(){var t=uni.getStorageSync("uid");return new s.default(function(n,a){var i=r.default.Query("Goods");i.equalTo("userId","==",t),i.equalTo("status","!=",-1),i.count().then(function(t){n(t),e.log("共有".concat(t,"条记录"))})})},gettoday_detail:function(t,n){var a=uni.getStorageSync("uid"),i=0,o=0,u=0,l=0,d=0,c=0,v={};return new s.default(function(s,_){var f=r.default.Query("order_opreations");f.equalTo("master","==",a),f.equalTo("createdAt",">=",t),f.equalTo("createdAt","<=",n),f.select("real_money","type"),f.limit(1e3),f.find().then(function(_){for(var f=0;f<_.length;f++)1==_[f].type?d+=_[f].real_money:-1==_[f].type&&(c+=_[f].real_money);var g=r.default.Query("Bills");g.equalTo("userId","==",a),g.equalTo("createdAt",">=",t),g.equalTo("createdAt","<=",n),g.select("goodsId","num","total_money","type"),g.limit(1e3),g.include("goodsId"),g.find().then(function(_){for(var f=0;f<_.length;f++)1==_[f].type?(i+=_[f].num,u+=_[f].num*_[f].goodsId.retailPrice):-1==_[f].type&&(o+=_[f].num,l+=_[f].num*_[f].goodsId.costPrice);v.get_reserve=i.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve=o.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_real_money=u.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_real_money=l.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_num=d.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_num=c.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_get_num=(u-d).toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_get_num=(c-l).toFixed(uni.getStorageSync("setting").show_float),e.log(i);var g=0,m=0,y=r.default.Query("order_opreations");y.equalTo("master","==",a),y.equalTo("createdAt",">=",t),y.equalTo("createdAt","<=",n),y.equalTo("type","==",-1),y.find().then(function(e){for(var t=0;t<e.length;t++)g+=e[t].all_money,m+=e[t].real_money;v.should_get_money=g,v.real_get_money=m}),s(v)})})})},loadallGoods:function(){var e=this,t=uni.getStorageSync("uid");return new s.default(function(n,a){var s=0,o=0,u=0,l={};e.querycount().then(function(e){l.total_products=e;var a=r.default.Query("Goods");a.equalTo("userId","==",t),a.equalTo("status","!=",-1),a.select("reserve","costPrice","stocktype"),a.limit(1e3),a.find().then(function(e){var t=!0,a=!1,r=void 0;try{for(var d,c=(0,i.default)(e);!(t=(d=c.next()).done);t=!0){var v=d.value;0==v.stocktype&&(u+=1),s+=v.reserve,o+=v.reserve*v.costPrice,l.total_money=o.toFixed(uni.getStorageSync("print_setting").show_float),l.total_reserve=s.toFixed(uni.getStorageSync("print_setting").show_float),l.warn_num=u,n(l)}}catch(_){a=!0,r=_}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}})})})}};t.default=o}).call(this,n("5a52")["default"])},"318f":function(e,t,n){"use strict";n.r(t);var a=n("61b5"),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);t["default"]=i.a},"519f":function(e,t,n){var a=n("1f28");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("6d37d80e",a,!0,{sourceMap:!1,shadowMode:!1})},"61b5":function(e,t,n){"use strict";(function(e){var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("28a5");a(n("c74b"));var i=a(n("df06")),s=a(n("2dc1")),r=a(n("524a")),o=void 0,u={components:{loading:r.default},data:function(){return{loading:!0,start_date:i.default.getDay(0,!0),end_date:i.default.getDay(1,!0),start_date_desc:i.default.getDay(0,!0).split(" ")[0],end_date_desc:i.default.getDay(1,!0).split(" ")[0],reserve_money:0,all_reserve:0,warn_num:0,today_in:0,today_out:0,get_reserve:0,out_reserve:0,get_reserve_real_money:0,out_reserve_real_money:0,get_reserve_num:0,out_reserve_num:0,get_reserve_get_num:0,out_reserve_get_num:0,should_get_money:0,real_get_money:0}},onLoad:function(){o=this,uni.getStorageSync("uid"),o.get_allCost(),o.gettoday_detail(),e.log(i.default.getDay(1,!0))},methods:{bindDate_startChange:function(e){o.start_date=e.detail.value+" 00:00:00",o.gettoday_detail()},bindDate_endChange:function(e){o.start_date=e.detail.value+" 00:00:00",o.gettoday_detail()},get_allCost:function(){s.default.loadallGoods().then(function(t){e.log(t),o.reserve_money=t.total_money,o.all_reserve=t.total_reserve,o.warn_num=t.warn_num,o.loading=!1})},gettoday_detail:function(){s.default.gettoday_detail(o.start_date,o.end_date).then(function(t){e.log("今日概况",t),o.get_reserve=t.get_reserve,o.out_reserve=t.out_reserve,o.get_reserve_real_money=t.get_reserve_real_money,o.out_reserve_real_money=t.out_reserve_real_money,o.get_reserve_num=t.get_reserve_num,o.out_reserve_num=t.out_reserve_num,o.get_reserve_get_num=t.get_reserve_get_num,o.out_reserve_get_num=t.out_reserve_get_num,o.should_get_money=t.should_get_money,o.real_get_money=t.real_get_money})}},computed:{i18n:function(){return this.$t("operational_status")}}};t.default=u}).call(this,n("5a52")["default"])},a0ca:function(e,t,n){"use strict";var a=n("519f"),i=n.n(a);i.a},df06:function(e,t,n){"use strict";(function(t){var a=n("288e");n("6b54"),n("87b3"),n("7514");var i=a(n("5d73"));n("c5f6");var s=a(n("795b")),r=a(n("c74b"));e.exports={enterAddGoodNum:function(e){return new s.default(function(n,a){for(var s=function(a){var s=0,o=r.default.Query("Goods");o.get(e[a].objectId).then(function(r){if(t.log(e[a]),e[a].selectd_model){var o=!0,u=!1,l=void 0;try{for(var d,c=(0,i.default)(e[a].selected_model);!(o=(d=c.next()).done);o=!0){var v=d.value,_=!0,f=!1,g=void 0;try{for(var m,y=(0,i.default)(e[a].models);!(_=(m=y.next()).done);_=!0){var h=m.value;h.id==v.id&&(h.reserve=Number(h.reserve)+Number(v.num)),delete h.num}}catch(w){f=!0,g=w}finally{try{_||null==y.return||y.return()}finally{if(f)throw g}}}}catch(w){u=!0,l=w}finally{try{o||null==c.return||c.return()}finally{if(u)throw l}}s=Number(e[a].reserve)+Number(e[a].num),r.set("models",e[a].models)}else s=Number(e[a].reserve)+Number(e[a].num);r.set("reserve",s),r.set("stocktype",s>e[a].warning_num?1:0),r.save(),a==e.length-1&&n(!0)}).catch(function(e){t.log(e)})},o=0;o<e.length;o++)s(o)})},outRedGoodNum:function(e){var n=this;return new s.default(function(a,s){for(var o=function(s){var o=0,u=r.default.Query("Goods");u.get(e[s].objectId).then(function(t){if(e[s].selectd_model){var r=!0,u=!1,l=void 0;try{for(var d,c=(0,i.default)(e[s].selected_model);!(r=(d=c.next()).done);r=!0){var v=d.value,_=!0,f=!1,g=void 0;try{for(var m,y=(0,i.default)(e[s].models);!(_=(m=y.next()).done);_=!0){var h=m.value;o+=Number(h.reserve),h.id==v.id&&(h.reserve=Number(h.reserve)-Number(v.num)),delete h.num}}catch(w){f=!0,g=w}finally{try{_||null==y.return||y.return()}finally{if(f)throw g}}}}catch(w){u=!0,l=w}finally{try{r||null==c.return||c.return()}finally{if(u)throw l}}o=Number(e[s].reserve)-Number(e[s].num),t.set("models",e[s].models)}else o=Number(e[s].reserve)-Number(e[s].num);t.set("reserve",o),t.set("stocktype",o>=e[s].warning_num?1:0),t.save(),e[s].warning_num>=o&&n.log(e[s].goodsName+"出库了"+e[s].num+"件，已经低于预警数量"+e[s].warning_num,-2,e[s].objectId),n.record_staffOut(Number(e[s].num)),s==e.length-1&&a(!0)}).catch(function(e){t.log(e)})},u=0;u<e.length;u++)o(u)})},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,n,a){var i=r.default.Pointer("_User"),s=i.set(uni.getStorageSync("uid")),o=r.default.Query("logs");o.set("parent",s),o.set("log",e),o.set("detail_id",a),o.set("type",n),o.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_shopOut:function(e,n){t.log(e,n);var a=r.default.Query("shops");a.set("id",e),a.set("have_out",n),a.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var n=r.default.Query("staffs");n.set("id",uni.getStorageSync("user").objectId),n.set("have_out",Number(e)+uni.getStorageSync("user").have_out),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var n=r.default.Query("Goods");n.equalTo("userId","==",e),n.find().then(function(e){t.log(e);var n=!0,a=!1,s=void 0;try{for(var r,o=(0,i.default)(e);!(n=(r=o.next()).done);n=!0){var u=r.value;t.log(u),Number(u.costPrice)*u.reserve,u.reserve}}catch(l){a=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}})},getDay:function(e,t){var n=this,a=new Date,i=a.getTime()+864e5*e;a.setTime(i);var s=a.getFullYear(),r=a.getMonth(),o=a.getDate();return r=n.handleMonth(r+1),o=n.handleMonth(o),t?s+"-"+r+"-"+o+" 00:00:00":s+"-"+r+"-"+o},js_date_time:function(e,t){var n=new Date(e),a=n.getFullYear(),i=n.getMonth()+1;i=i<10?"0"+i:i;var s=n.getDate();s=s<10?"0"+s:s;var r=n.getHours();r=r<10?"0"+r:r;var o=n.getMinutes(),u=n.getSeconds();return o=o<10?"0"+o:o,u=u<10?"0"+u:u,t?a+"-"+i+"-"+s+" "+r+":"+o:a+"-"+i+"-"+s},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,n("5a52")["default"])},f3c3:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.loading?n("loading"):n("v-uni-view",[n("v-uni-view",{staticClass:"select"},[n("v-uni-view",{staticClass:"section",staticStyle:{"border-right":"1rpx solid#DDDDDD"}},[n("v-uni-picker",{attrs:{mode:"date",end:e.start_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_startChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.start_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1),n("v-uni-view",{staticClass:"section"},[n("v-uni-picker",{attrs:{mode:"date",end:e.end_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_endChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.end_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"list"},[n("v-uni-view",{staticClass:"display_flex list_frst"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/chengben.png"}}),n("v-uni-text",{staticClass:"text_notice"},[e._v(e._s(e.i18n.a)+" "+e._s(e.reserve_money))])],1),n("v-uni-view",{staticClass:"display_flex_bet list_second"},[n("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#ddd"}},[n("v-uni-view",[e._v("库存总数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.all_reserve))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-view",[e._v("预警产品数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.warn_num))])],1)],1)],1),n("v-uni-view",{staticClass:"second_list"},[n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段入库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段出库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_num))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库的卖出总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_real_money))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库的成本总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_real_money))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计可获利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_get_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("毛利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_get_num))])],1)],1)],1)],1)],1)],1)},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})}}]);