(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-operational_status-operational_status"],{"0ed3":function(e,t,n){"use strict";n.r(t);var i=n("58a8"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},2019:function(e,t,n){"use strict";var i=n("e3f0"),a=n.n(i);a.a},5293:function(e,t,n){"use strict";(function(e){var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("5d73"));n("7514");var s=i(n("795b")),r=i(n("906f")),o={querycount:function(){var t=uni.getStorageSync("uid");return new s.default(function(n,i){var a=r.default.Query("Goods");a.equalTo("userId","==",t),a.count().then(function(t){n(t),e.log("共有".concat(t,"条记录"))})})},gettoday_detail:function(t,n){var i=uni.getStorageSync("uid"),a=0,o=0,u=0,l=0,c=0,_=0,v={};return new s.default(function(s,d){var g=r.default.Query("order_opreations");g.equalTo("master","==",i),g.equalTo("createdAt",">=",t),g.equalTo("createdAt","<=",n),g.select("real_money","type"),g.limit(1e3),g.find().then(function(d){for(var g=0;g<d.length;g++)1==d[g].type?c+=d[g].real_money:-1==d[g].type&&(_+=d[g].real_money);var f=r.default.Query("Bills");f.equalTo("userId","==",i),f.equalTo("createdAt",">=",t),f.equalTo("createdAt","<=",n),f.select("goodsId","num","total_money","type"),f.limit(1e3),f.include("goodsId"),f.find().then(function(d){for(var g=0;g<d.length;g++)1==d[g].type?(a+=d[g].num,u+=d[g].num*d[g].goodsId.retailPrice):-1==d[g].type&&(o+=d[g].num,l+=d[g].num*d[g].goodsId.costPrice);v.get_reserve=a.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve=o.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_real_money=u.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_real_money=l.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_num=c.toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_num=_.toFixed(uni.getStorageSync("setting").show_float),v.get_reserve_get_num=(u-c).toFixed(uni.getStorageSync("setting").show_float),v.out_reserve_get_num=(_-l).toFixed(uni.getStorageSync("setting").show_float),e.log(a);var f=0,y=0,m=r.default.Query("order_opreations");m.equalTo("master","==",i),m.equalTo("createdAt",">=",t),m.equalTo("createdAt","<=",n),m.equalTo("type","==",-1),m.find().then(function(e){for(var t=0;t<e.length;t++)f+=e[t].all_money,y+=e[t].real_money;v.should_get_money=f,v.real_get_money=y}),s(v)})})})},loadallGoods:function(){var e=this,t=uni.getStorageSync("uid");return new s.default(function(n,i){var s=0,o=0,u=0,l={};e.querycount().then(function(e){l.total_products=e;var i=r.default.Query("Goods");i.equalTo("userId","==",t),i.equalTo("status","!=",-1),i.select("reserve","costPrice","stocktype"),i.limit(1e3),i.find().then(function(e){var t=!0,i=!1,r=void 0;try{for(var c,_=(0,a.default)(e);!(t=(c=_.next()).done);t=!0){var v=c.value;0==v.stocktype&&(u+=1),s+=v.reserve,o+=v.reserve*v.costPrice,l.total_money=o.toFixed(uni.getStorageSync("print_setting").show_float),l.total_reserve=s.toFixed(uni.getStorageSync("print_setting").show_float),l.warn_num=u,n(l)}}catch(d){i=!0,r=d}finally{try{t||null==_.return||_.return()}finally{if(i)throw r}}})})})}};t.default=o}).call(this,n("5a52")["default"])},"58a8":function(e,t,n){"use strict";(function(e){var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("28a5");i(n("906f"));var a=i(n("93e8")),s=i(n("5293")),r=i(n("c7fb")),o=void 0,u={components:{loading:r.default},data:function(){return{loading:!0,start_date:a.default.getDay(0,!0),end_date:a.default.getDay(1,!0),start_date_desc:a.default.getDay(0,!0).split(" ")[0],end_date_desc:a.default.getDay(1,!0).split(" ")[0],reserve_money:0,all_reserve:0,warn_num:0,today_in:0,today_out:0,get_reserve:0,out_reserve:0,get_reserve_real_money:0,out_reserve_real_money:0,get_reserve_num:0,out_reserve_num:0,get_reserve_get_num:0,out_reserve_get_num:0,should_get_money:0,real_get_money:0}},onLoad:function(){o=this,uni.getStorageSync("uid"),o.get_allCost(),o.gettoday_detail(),e.log(a.default.getDay(1,!0))},methods:{bindDate_startChange:function(e){o.start_date=e.detail.value+" 00:00:00",o.gettoday_detail()},bindDate_endChange:function(e){o.start_date=e.detail.value+" 00:00:00",o.gettoday_detail()},get_allCost:function(){s.default.loadallGoods().then(function(t){e.log(t),o.reserve_money=t.total_money,o.all_reserve=t.total_reserve,o.warn_num=t.warn_num,o.loading=!1})},gettoday_detail:function(){s.default.gettoday_detail(o.start_date,o.end_date).then(function(t){e.log("今日概况",t),o.get_reserve=t.get_reserve,o.out_reserve=t.out_reserve,o.get_reserve_real_money=t.get_reserve_real_money,o.out_reserve_real_money=t.out_reserve_real_money,o.get_reserve_num=t.get_reserve_num,o.out_reserve_num=t.out_reserve_num,o.get_reserve_get_num=t.get_reserve_get_num,o.out_reserve_get_num=t.out_reserve_get_num,o.should_get_money=t.should_get_money,o.real_get_money=t.real_get_money})}},computed:{i18n:function(){return this.$t("operational_status")}}};t.default=u}).call(this,n("5a52")["default"])},"6c08":function(e,t,n){"use strict";n.r(t);var i=n("a70c"),a=n("0ed3");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("2019");var r=n("2877"),o=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"fe9e990c",null);t["default"]=o.exports},"93e8":function(e,t,n){"use strict";(function(t){var i=n("288e");n("6b54"),n("87b3"),n("c5f6");var a=i(n("5d73"));n("7514");var s=i(n("906f"));e.exports={handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,n,i){var a=s.default.Pointer("_User"),r=a.set(uni.getStorageSync("uid")),o=s.default.Query("logs");o.set("parent",r),o.set("log",e),o.set("detail_id",i),o.set("type",n),o.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_shopOut:function(e,n){t.log(e,n);var i=s.default.Query("shops");i.set("id",e),i.set("have_out",n),i.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var n=s.default.Query("staffs");n.set("id",uni.getStorageSync("user").objectId),n.set("have_out",e+uni.getStorageSync("user").have_out),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var n=s.default.Query("Goods");n.equalTo("userId","==",e),n.find().then(function(e){t.log(e);var n=!0,i=!1,s=void 0;try{for(var r,o=(0,a.default)(e);!(n=(r=o.next()).done);n=!0){var u=r.value;t.log(u),Number(u.costPrice)*u.reserve,u.reserve}}catch(l){i=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}})},getDay:function(e,t){var n=this,i=new Date,a=i.getTime()+864e5*e;i.setTime(a);var s=i.getFullYear(),r=i.getMonth(),o=i.getDate();return r=n.handleMonth(r+1),o=n.handleMonth(o),t?s+"-"+r+"-"+o+" 00:00:00":s+"-"+r+"-"+o},js_date_time:function(e,t){var n=new Date(e),i=n.getFullYear(),a=n.getMonth()+1;a=a<10?"0"+a:a;var s=n.getDate();s=s<10?"0"+s:s;var r=n.getHours();r=r<10?"0"+r:r;var o=n.getMinutes(),u=n.getSeconds();return o=o<10?"0"+o:o,u=u<10?"0"+u:u,t?i+"-"+a+"-"+s+" "+r+":"+o:i+"-"+a+"-"+s},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,n("5a52")["default"])},a70c:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.loading?n("loading"):n("v-uni-view",[n("v-uni-view",{staticClass:"select"},[n("v-uni-view",{staticClass:"section",staticStyle:{"border-right":"1rpx solid#DDDDDD"}},[n("v-uni-picker",{attrs:{mode:"date",end:e.start_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_startChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.start_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1),n("v-uni-view",{staticClass:"section"},[n("v-uni-picker",{attrs:{mode:"date",end:e.end_date_desc},on:{change:function(t){t=e.$handleEvent(t),e.bindDate_endChange(t)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.end_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"list"},[n("v-uni-view",{staticClass:"display_flex list_frst"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/chengben.png"}}),n("v-uni-text",{staticClass:"text_notice"},[e._v(e._s(e.i18n.a)+" "+e._s(e.reserve_money))])],1),n("v-uni-view",{staticClass:"display_flex_bet list_second"},[n("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#ddd"}},[n("v-uni-view",[e._v("库存总数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.all_reserve))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-view",[e._v("预警产品数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.warn_num))])],1)],1)],1),n("v-uni-view",{staticClass:"second_list"},[n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段入库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段出库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_num))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库的卖出总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_real_money))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库的成本总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_real_money))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计可获利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_get_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("毛利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_get_num))])],1)],1)],1)],1)],1)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},ab67:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.select[data-v-fe9e990c]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#fff;padding:%?20?% %?30?%;margin-bottom:%?20?%}.select .section[data-v-fe9e990c]{width:50%;text-align:center}.list[data-v-fe9e990c]{background:#fff}.list .list_frst[data-v-fe9e990c]{padding:%?10?% %?20?%;border-bottom:%?1?% solid #ccc}.list .list_frst .icon_img[data-v-fe9e990c]{width:%?60?%;height:%?60?%}.list .list_frst .text_notice[data-v-fe9e990c]{margin-left:%?10?%}.list .list_second[data-v-fe9e990c]{padding:%?10?%;font-size:%?24?%;line-height:%?40?%}.list .list_second .item[data-v-fe9e990c]{width:50%;padding-left:%?20?%}.list .list_second .show_num[data-v-fe9e990c]{color:#3d3d3d;font-weight:700}.second_list[data-v-fe9e990c]{padding:%?20?%;background:#fff;margin-top:%?30?%}.second_list .second_item[data-v-fe9e990c]{width:50%}.second_list .icon_img[data-v-fe9e990c]{width:%?60?%;height:%?60?%;margin-right:%?10?%}.second_list .text_notice[data-v-fe9e990c]{font-weight:%?24?%}.second_list .list_item[data-v-fe9e990c]{padding:%?10?% 0;border-bottom:%?1?% solid #ccc}.second_list .reserve_text[data-v-fe9e990c]{color:#3d3d3d;font-weight:700}.second_list .text_notice[data-v-fe9e990c]{font-size:%?20?%;margin-bottom:%?8?%}',""])},e3f0:function(e,t,n){var i=n("ab67");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("6173106e",i,!0,{sourceMap:!1,shadowMode:!1})}}]);