(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-good_return-good_return"],{"2a3e":function(t,e,n){"use strict";n.r(e);var o=n("fa056"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},"2d31":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"确定",leftIcon:"scan","left-text":"扫码"},on:{"click-right":function(e){e=t.$handleEvent(e),t.confrim_this(e)},"click-left":function(e){e=t.$handleEvent(e),t.scanGoods(e)}}}),n("v-uni-view",{staticClass:"page"},t._l(t.products,function(e,o){return n("v-uni-view",{key:o,staticClass:"margin-b-10"},[n("unicard",{attrs:{title:"品名："+e.goodsName}},[n("v-uni-view",[n("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[t._v("库存："+t._s(e.reserve))]),n("v-uni-view",[t._v("建议零售价格："+t._s(e.retailPrice)+"(元)")]),n("v-uni-view",{staticClass:"margin-t-5"},[t._v("退货量："),n("uninumberbox",{attrs:{min:1},on:{change:function(e){e=t.$handleEvent(e),t.handleNumChange(e,o)}}})],1),n("v-uni-view",{staticClass:"bottom_del"},[n("v-uni-view",{staticClass:"del",on:{click:function(e){e=t.$handleEvent(e),t.handleDel(o)}}},[n("fa-icon",{attrs:{type:"close",size:"15",color:"#fff"}}),t._v("删除")],1)],1)],1)],1)],1)}),1)],1)},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},4156:function(t,e,n){"use strict";n.r(e);var o=n("2d31"),i=n("2a3e");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("69a3");var r=n("2877"),s=Object(r["a"])(i["default"],o["a"],o["b"],!1,null,"7d31d892",null);e["default"]=s.exports},"69a3":function(t,e,n){"use strict";var o=n("d620"),i=n.n(o);i.a},aaa3:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".page[data-v-7d31d892]{font-size:%?28?%;height:calc(100vh - %?88?%);overflow:scroll}.margin-b-10[data-v-7d31d892]{margin-top:%?20?%}.input_withlabel[data-v-7d31d892]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?10?% 0}.bottom_del[data-v-7d31d892]{text-align:right}.del[data-v-7d31d892]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#aa2116;color:#fff;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:%?4?% %?12?%;border-radius:%?8?%}.input_label[data-v-7d31d892]{border:%?1?% solid#ddd;border-radius:%?8?%;padding:0 %?6?%;width:%?140?%;color:#aa2116}.margin-t-5[data-v-7d31d892]{margin:%?10?% 0}",""])},d620:function(t,e,n){var o=n("aaa3");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("f22cf806",o,!0,{sourceMap:!1,shadowMode:!1})},fa056:function(t,e,n){"use strict";(function(t){var o=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6"),n("7514"),n("28a5");var i,a=o(n("5d73")),r=o(n("c74b")),s=o(n("872f")),u=o(n("8fad")),c=o(n("0914")),d=o(n("b92d")),l=o(n("5753")),f={components:{unicard:s.default,faIcon:c.default,uninumberbox:u.default,uniNavBar:d.default,uniIcon:l.default},data:function(){return{products:null}},onLoad:function(){this.products=uni.getStorageSync("products"),i=this,uni.removeStorageSync("is_option");var e=0,n=!0,o=!1,r=void 0;try{for(var s,u=(0,a.default)(uni.getStorageSync("products"));!(n=(s=u.next()).done);n=!0){var c=s.value;t.log(c),c.selectd_model&&this.make_goods(c,c.selectd_model,e),e==uni.getStorageSync("products").length-1&&(this.products=[].concat.apply([],this.products)),e+=1}}catch(d){o=!0,r=d}finally{try{n||null==u.return||u.return()}finally{if(o)throw r}}},methods:{scanGoods:function(){uni.scanCode({success:function(e){uni.showLoading({title:"加载中..."});var n=e.result,o=n.split("-"),s=r.default.Query("Goods");"false"==o[1]?s.equalTo("objectId","==",o[0]):s.equalTo("productCode","==",o[0]),s.equalTo("userId","==",uid),s.equalTo("status","!=",-1),s.find().then(function(e){if(t.log(e),-1==e[0].status)uni.showToast({title:"该产品已删除",icon:"none"});else{var n=!0,o=!1,r=void 0;try{for(var s,u=(0,a.default)(e);!(n=(s=u.next()).done);n=!0){var c=s.value;c.num=1,c.total_money=1*c.retailPrice,c.really_total_money=1*c.retailPrice,c.modify_retailPrice=c.retailPrice}}catch(d){o=!0,r=d}finally{try{n||null==u.return||u.return()}finally{if(o)throw r}}i.products=i.products.concat(e)}uni.hideLoading()})},fail:function(t){uni.showToast({title:"未识别到条形码",icon:"none"})}})},make_goods:function(e,n,o){t.log(e,n,o);var i=[];this.products.splice(o,1);var r=!0,s=!1,u=void 0;try{for(var c,d=(0,a.default)(JSON.parse(n));!(r=(c=d.next()).done);r=!0){var l=c.value,f={};f.reserve=JSON.parse(l).reserve,f.costPrice=e.costPrice,f.createdAt=e.createdAt,f.goodsIcon=e.goodsIcon,f.goodsName=e.goodsName+JSON.parse(l).custom1.value+JSON.parse(l).custom2.value+JSON.parse(l).custom3.value+JSON.parse(l).custom4.value,f.is_selected=e.is_selected,f.key=e.key,f.models=e.models,f.modify_retailPrice=e.modify_retailPrice,f.num=e.num,f.objectId=e.objectId,f.packageContent=e.packageContent,f.packingUnit=e.packingUnit,f.position=e.position,f.producer=e.producer,f.productCode=e.productCode,f.product_info=e.product_info,f.product_state=e.product_state,f.regNumber=e.regNumber,f.retailPrice=e.retailPrice,f.selectd_model=e.selectd_model,f.stocks=e.stocks,f.stocktype=e.stocktype,f.total_money=e.total_money,f.updatedAt=e.updatedAt,f.userId=e.userId,f.warning_num=e.warning_num,i.push(f)}}catch(p){s=!0,u=p}finally{try{r||null==d.return||d.return()}finally{if(s)throw u}}this.products[o]=i},confrim_this:function(){uni.navigateTo({url:"/pages/common/good_return/return_detail/return_detail"})},handleNumChange:function(t,e){this.products[e].num=t,this.products[e].total_money=t*Number(this.products[e].modify_retailPrice),uni.setStorageSync("products",this.products)},handleDel:function(e){t.log(e),1==this.products.length?uni.showToast({title:"最少选择一个产品",icon:"none"}):(this.products.splice(e,1),uni.setStorageSync("products",this.products))},getrealprice:function(t,e){this.products[e].modify_retailPrice=t.target.value,this.products[e].total_money=this.products[e].num*Number(t.target.value),uni.setStorageSync("products",this.products)}}};e.default=f}).call(this,n("5a52")["default"])}}]);