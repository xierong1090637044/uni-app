(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-finance-CPHistory-customInHistoryDet-customInHistoryDet"],{"114b":function(e,t,o){"use strict";(function(e){var n=o("ee27");o("7db0"),o("a9e3"),o("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o("54f8")),a=n(o("9546")),s=uni.getStorageSync("uid"),i={get_customList:function(e,t){return new Promise((function(o,n){var r=uni.getStorageSync("uid"),s=a.default.Query("customs");s.order("num"),s.equalTo("parent","==",r),s.equalTo("disabled","==",e),t&&s.equalTo("name","==",{$regex:t+".*"}),s.find().then((function(e){o(e)}))}))},get_customCount:function(){return new Promise((function(e,t){var o=uni.getStorageSync("uid"),n=a.default.Query("customs");n.equalTo("parent","==",o),n.find().then((function(t){var o,n=t,s=(0,r.default)(n);try{var i=function(){var e=o.value,t=a.default.Query("Bills");t.equalTo("type","==",-1),t.equalTo("custom","==",e.objectId),t.find().then((function(t){e.relations=t}))};for(s.s();!(o=s.n()).done;)i()}catch(u){s.e(u)}finally{s.f()}e(n)}))}))},add_custom:function(t){e.log(t);var o=JSON.parse(localStorage.getItem("bmob")).objectId;return new Promise((function(n,r){var s=a.default.Pointer("_User"),i=s.set(o);if(t.objectId){var u=a.default.Query("customs");u.set("custom_name",t.custom_name),u.set("debt",Number(t.debt)),u.set("custom_address",t.custom_address),u.set("custom_phone",t.custom_phone),u.set("parent",i),u.set("disabled",!t.disabled),u.set("id",t.objectId),u.save().then((function(e){n(e)})).catch((function(t){e.log(t)}))}else{var d=a.default.Query("customs");d.equalTo("parent","==",o),d.equalTo("name","==",t.custom_name),d.find().then((function(o){if(e.log(o),0==o.length){var r=a.default.Query("customs");r.set("custom_name",t.custom_name),r.set("debt",Number(t.debt)),r.set("custom_address",t.custom_address),r.set("custom_phone",t.custom_phone),r.set("have_out",0),r.set("disabled",!t.disabled),r.set("parent",i),r.save().then((function(e){n(e)})).catch((function(t){e.log(t)}))}else n(!1)}))}}))},delete_custom:function(t){return new Promise((function(o,n){var r=a.default.Query("customs");r.destroy(t).then((function(e){o(e)})).catch((function(t){e.log(t)}))}))},custom_detail:function(t){return new Promise((function(o,n){var r=a.default.Query("customs");r.include("customFristClass","customSecondClass"),r.get(t).then((function(e){o(e)})).catch((function(t){e.log(t)}))}))},get_moneyList:function(t){return new Promise((function(o,n){var r=a.default.Query("order_opreations");r.equalTo("custom","==",t),r.include("opreater","account"),r.find().then((function(t){e.log(t),o(t)}))}))},getCustomSellList:function(e){return new Promise((function(t,o){var n=a.default.Query("order_opreations");n.equalTo("master","==",s),n.equalTo("type","==",-1),n.equalTo("extra_type","==",1),n.equalTo("extra_type","==",1),n.equalTo("custom","==",e.customId),n.equalTo("status","==",!0),n.equalTo("createdAt",">=",e.startDate),n.equalTo("createdAt","<=",e.endDate),n.limit(50),n.skip(50*(e.pageNum-1)),n.include("opreater","custom","stock"),n.order("-createdAt"),n.find().then((function(e){t(e)}))}))},getAllCustomSellList:function(e){var t={},o=0,n=0,i=0,u=0,d=0;return new Promise((function(l,c){var f=a.default.Query("order_opreations");f.equalTo("master","==",s),f.equalTo("type","==",e.type),f.equalTo("extra_type","==",e.extra_type),f.equalTo("custom","==",e.customId),f.equalTo("status","==",!0),f.equalTo("createdAt",">=",e.startDate+" 00:00:01"),f.equalTo("createdAt","<=",e.endDate+" 00:00:01"),f.count().then((function(a){i=a;var c=0;if(0==i)t.total=o,t.num=i,t.money=n,t.realMoney=0,t.realCost=0,l(t);else for(var v=0;v<Math.ceil(i/500);v++)f.equalTo("master","==",s),f.equalTo("type","==",e.type),f.equalTo("extra_type","==",e.extra_type),f.equalTo("custom","==",e.customId),f.equalTo("status","==",!0),f.limit(500),f.skip(500*v),f.include("opreater","custom","stock"),f.order("-createdAt"),f.equalTo("createdAt",">=",e.startDate+" 00:00:01"),f.equalTo("createdAt","<=",e.endDate+" 00:00:01"),f.find().then((function(e){var a,s=(0,r.default)(e);try{for(s.s();!(a=s.n()).done;){var f=a.value;o+=f.real_num,n+=f.all_money,u+=f.real_money,d+=f.allCostPrice,c+=1}}catch(v){s.e(v)}finally{s.f()}c==i&&(t.total=o,t.num=i,t.money=n,t.realMoney=u,t.realCost=d,l(t))}))}))}))},getAllCustomInRecord:function(e){var t={},o=0,n=0;return new Promise((function(i,u){var d=a.default.Query("order_opreations");d.equalTo("master","==",s),d.equalTo("type","==",-1),d.equalTo("extra_type","==",5),d.equalTo("custom","==",e.customId),d.equalTo("createdAt",">=",e.startDate+" 00:00:01"),d.equalTo("createdAt","<=",e.endDate+" 00:00:01"),d.count().then((function(a){n=a;var u=0;if(0==n)t.num=n,t.money=o,i(t);else for(var l=0;l<Math.ceil(n/500);l++)d.equalTo("master","==",s),d.equalTo("type","==",-1),d.equalTo("extra_type","==",5),d.equalTo("custom","==",e.customId),d.limit(500),d.skip(500*l),d.order("-createdAt"),d.equalTo("createdAt",">=",e.startDate+" 00:00:01"),d.equalTo("createdAt","<=",e.endDate+" 00:00:01"),d.find().then((function(e){var a,s=(0,r.default)(e);try{for(s.s();!(a=s.n()).done;){var d=a.value;o+=d.real_money,u+=1}}catch(l){s.e(l)}finally{s.f()}u==n&&(t.num=n,t.money=o,i(t))}))}))}))}};t.default=i}).call(this,o("5a52")["default"])},"4c3c":function(e,t,o){var n=o("ded5");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=o("4f06").default;r("5a8416b2",n,!0,{sourceMap:!1,shadowMode:!1})},"4dc7":function(e,t,o){"use strict";o.r(t);var n=o("e4ef"),r=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},"54f8":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return r}));o("a4d3"),o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");var n=o("dde1");function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(n["a"])(e))){var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,s=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(i)throw a}}}}},"6a0b":function(e,t,o){"use strict";var n,r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("v-uni-view",{staticClass:"page"},[o("v-uni-view",{staticClass:"backgroundfff",staticStyle:{padding:"0 20rpx","margin-top":"20rpx"}},[o("v-uni-view",{staticClass:"newOrderTitle borderBot"},[e._v("基础信息")]),o("v-uni-view",[e.orderDet.custom&&e.orderDet.custom.custom_name?o("v-uni-view",{staticClass:"display_flex",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",{staticStyle:{width:"140rpx"}},[e._v("客户"),o("v-uni-text",{staticStyle:{color:"#f30"}},[e._v("*")])],1),o("v-uni-view",{staticClass:"kaidan_rightinput display_flex",staticStyle:{width:"100%","justify-content":"flex-end"}},[o("v-uni-input",{staticStyle:{"text-align":"right","margin-right":"20rpx"},attrs:{placeholder:"选择客户",disabled:"true",value:e.orderDet.custom.custom_name}})],1)],1):e._e(),o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",{staticStyle:{width:"140rpx"}},[e._v("收款日期")]),o("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v(e._s(e.orderDet.createdTime))])],1)],1)],1)],1),o("v-uni-view",{staticClass:"backgroundfff",staticStyle:{padding:"0 20rpx","margin-top":"20rpx"}},[o("v-uni-view",{staticClass:"newOrderTitle borderBot"},[e._v("已收款的单据")]),e.orderDet.customInOrders&&e.orderDet.customInOrders.length>0?o("v-uni-view",e._l(e.orderDet.customInOrders,(function(t,n){return o("v-uni-view",{key:n,staticClass:"borderBot",staticStyle:{padding:"20rpx 0",width:"100%"}},[o("v-uni-view",{staticClass:"color333"},[e._v("单据编号："+e._s(t.objectId))]),o("v-uni-view",{staticClass:"color333"},[e._v("单据日期："+e._s(t.createdAt))]),o("v-uni-view",{staticClass:"display_flex_bet"},[o("v-uni-view",{staticClass:"color333"},[e._v("应收金额："+e._s(t.real_money)+"元")])],1),o("v-uni-view",{staticClass:"display_flex_bet"},[o("v-uni-view",{staticClass:"color333 display_flex"},[e._v("本次收款"),o("v-uni-text",{staticStyle:{color:"#f30","font-size":"20rpx"}},[e._v("*")])],1),o("v-uni-view",{staticClass:"display_flex"},[o("v-uni-input",{staticStyle:{"text-align":"right",color:"#f30","font-weight":"bold"},attrs:{placeholder:"请输入本次收款",type:"digit"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputShouldGetMoney(t,n)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.inputShouldGetMoney(t,n)}},model:{value:t.shouldGetMoney,callback:function(o){e.$set(t,"shouldGetMoney",o)},expression:"item.shouldGetMoney"}}),o("v-uni-text",{staticStyle:{"margin-left":"10rpx"}},[e._v("元")])],1)],1)],1)})),1):o("v-uni-view",{staticStyle:{padding:"10rpx 0"}},[e._v("未关联单据")])],1),o("v-uni-view",{staticClass:"backgroundfff",staticStyle:{padding:"0 20rpx","margin-top":"20rpx"}},[o("v-uni-view",{staticClass:"newOrderTitle borderBot"},[e._v("收款信息")]),o("v-uni-view",[o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",{staticStyle:{width:"140rpx"}},[e._v("收款账户"),o("v-uni-text",{staticStyle:{color:"#f30"}},[e._v("*")])],1),o("v-uni-view",{staticClass:"kaidan_rightinput display_flex",staticStyle:{"justify-content":"flex-end"}},[o("v-uni-view",{staticStyle:{"text-align":"right","margin-right":"20rpx"}},[e._v(e._s(e.orderDet.account?e.orderDet.account.name:""))])],1)],1),e.orderDet.opreater&&e.orderDet.opreater.nickName?o("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0","border-bottom":"1rpx solid#F7F7F7"}},[o("v-uni-view",[e._v("收款人"),o("v-uni-text",{staticStyle:{"font-size":"20rpx",color:"#f30"}},[e._v("*")])],1),o("v-uni-view",{staticClass:"kaidan_rightinput",staticStyle:{"text-align":"right"}},[e._v(e._s(e.orderDet.opreater.nickName))])],1):e._e()],1)],1),o("v-uni-view",{staticClass:"backgroundfff",staticStyle:{padding:"0 20rpx","margin-top":"20rpx"}},[o("v-uni-view",{staticClass:"newOrderTitle borderBot"},[e._v("备注")]),o("v-uni-view",[o("v-uni-view",{staticClass:"beizhu_style"},[e._v(e._s(e.orderDet.beizhu||"未备注"))])],1)],1),o("v-uni-view",{staticClass:"backgroundfff",staticStyle:{padding:"0 20rpx","margin-top":"20rpx"}},[o("v-uni-view",{staticClass:"newOrderTitle borderBot"},[e._v("上传凭证图(会员可用)")]),o("v-uni-view",[o("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0"}},[o("v-uni-view",{staticClass:"upload_image display_flex"},e._l(e.orderDet.Images,(function(t,n){return e.orderDet.Images&&e.orderDet.Images.length>0?o("v-uni-view",{key:n,staticStyle:{position:"relative"}},[o("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx","margin-right":"10rpx"},attrs:{src:t}})],1):e._e()})),1)],1)],1)],1),o("v-uni-view",{staticClass:"bottomEle display_flex_bet",staticStyle:{padding:"0 30rpx","margin-top":"60rpx",height:"90rpx","line-height":"90rpx"}},[o("v-uni-view",[o("v-uni-text",[e._v("总计收款：￥"+e._s(e.orderDet.real_money||0))])],1),o("v-uni-view",{staticClass:"display_flex"})],1)],1)],1)},a=[];o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}))},"7fd5":function(e,t,o){"use strict";(function(t){var n=o("ee27");o("7db0"),o("a9e3"),o("d3b7"),o("25f0");var r=n(o("54f8")),a=n(o("9546"));e.exports={enterAddGoodNum:function(e,o){var n=this;return new Promise((function(s,i){for(var u=function(i){var u=0,d=a.default.Query("Goods");d.get(e[i].objectId).then((function(l){var c=l;if(e[i].selectd_model){var f,v=(0,r.default)(e[i].selected_model);try{for(v.s();!(f=v.n()).done;){var m,g=f.value,y=(0,r.default)(c.models);try{for(y.s();!(m=y.n()).done;){var h=m.value;h.id==g.id&&(h.reserve=Number(h.reserve)+Number(g.num)),delete h.num}}catch(p){y.e(p)}finally{y.f()}}}catch(p){v.e(p)}finally{v.f()}u=Number(c.reserve)+Number(e[i].num),d.set("models",c.models)}else u=Number(c.reserve)+Number(e[i].num);d.set("reserve",u),d.set("id",e[i].objectId),d.save().then((function(t){if(e[i].header){var r=a.default.Query("Goods");r.equalTo("header","==",e[i].header.objectId),r.equalTo("order","==",1),r.statTo("sum","reserve"),r.find().then((function(t){var r=t[0]._sumReserve,u=a.default.Query("Goods");u.set("reserve",r),"purchase"==o&&u.set("costPrice",e[i].modify_retailPrice),u.set("id",e[i].header.objectId),u.save().then((function(t){n.modifyStockType(e[i].header.objectId),i==e.length-1&&s(!0)}))}))}else n.modifyStockType(e[i].objectId),i==e.length-1&&s(!0)})).catch((function(e){t.log(e)}))}))},d=0;d<e.length;d++)u(d)}))},outRedGoodNum:function(e){var o=this;return new Promise((function(n,s){for(var i=function(s){var i=0,u=a.default.Query("Goods");u.get(e[s].objectId).then((function(d){var l=d;if(e[s].selectd_model){var c,f=(0,r.default)(e[s].selected_model);try{for(f.s();!(c=f.n()).done;){var v,m=c.value,g=(0,r.default)(l.models);try{for(g.s();!(v=g.n()).done;){var y=v.value;i+=Number(y.reserve),y.id==m.id&&(y.reserve=Number(y.reserve)-Number(m.num)),delete y.num}}catch(h){g.e(h)}finally{g.f()}}}catch(h){f.e(h)}finally{f.f()}i=Number(l.reserve)-Number(e[s].num),u.set("models",l.models)}else i=Number(l.reserve)-Number(e[s].num);u.set("reserve",i),u.set("id",e[s].objectId),u.save().then((function(t){if(e[s].header){var r=a.default.Query("Goods");r.equalTo("header","==",e[s].header.objectId),r.equalTo("order","==",1),r.statTo("sum","reserve"),r.find().then((function(t){var r=t[0]._sumReserve,i=a.default.Query("Goods");i.set("reserve",r),i.set("id",e[s].header.objectId),i.save().then((function(t){o.modifyStockType(e[s].header.objectId),s==e.length-1&&n(!0)}))}))}else o.modifyStockType(e[s].objectId),s==e.length-1&&n(!0)})).catch((function(e){t.log(e)}))}))},u=0;u<e.length;u++)i(u)}))},enterAddGoodNumNew:function(e,o){var n=this;return new Promise((function(s,i){for(var u=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",d=uni.getStorageSync("uid"),l=function(i){var l=0,c=a.default.Query("Goods");c.equalTo("userId","==",d),c.equalTo("header","==",e[i].objectId),c.equalTo("stocks","==",u.objectId),c.find().then((function(d){if(0==d.length)n.upload_good_withNoCan(e[i],u,Number(e[i].num)).then((function(t){c.equalTo("header","==",e[i].objectId),c.equalTo("order","==",1),c.statTo("sum","reserve"),c.find().then((function(t){var n=t[0]._sumReserve;c.set("reserve",n),c.set("id",e[i].objectId),"purchase"==o&&c.set("costPrice",e[i].modify_retailPrice),c.save().then((function(t){i==e.length-1&&s(!0)}))}))}));else{var f=d[0],v=a.default.Query("Goods");if(e[i].selected_model){var m,g=(0,r.default)(e[i].selected_model);try{for(g.s();!(m=g.n()).done;){var y,h=m.value,p=(0,r.default)(f.models);try{for(p.s();!(y=p.n()).done;){var _=y.value;_.id==h.id&&(_.reserve=Number(_.reserve)+Number(h.num)),delete _.num}}catch(b){p.e(b)}finally{p.f()}}}catch(b){g.e(b)}finally{g.f()}l=Number(f.reserve)+Number(e[i].num),v.set("models",f.models)}else l=Number(f.reserve)+Number(e[i].num);v.set("reserve",l),v.set("id",f.objectId),v.save().then((function(t){v.equalTo("header","==",e[i].objectId),v.equalTo("order","==",1),v.statTo("sum","reserve"),v.find().then((function(t){var n=t[0]._sumReserve;v.set("reserve",n),"purchase"==o&&v.set("costPrice",e[i].modify_retailPrice.toString()),v.set("id",e[i].objectId),v.save().then((function(t){i==e.length-1&&s(!0)}))}))})).catch((function(e){t.log(e)}))}}))},c=0;c<e.length;c++)l(c)}))},outRedGoodNumNew:function(e){var o=this;return new Promise((function(n,s){for(var i=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",u=uni.getStorageSync("uid"),d=function(s){var d=0,l=a.default.Query("Goods");l.equalTo("userId","==",u),l.equalTo("header","==",e[s].objectId),l.equalTo("stocks","==",i.objectId),l.find().then((function(u){if(0==u.length)o.upload_good_withNoCan(e[s],i,Number(e[s].num),"out").then((function(t){l.equalTo("header","==",e[s].objectId),l.equalTo("order","==",1),l.statTo("sum","reserve"),l.find().then((function(t){var o=t[0]._sumReserve;l.set("reserve",o),l.set("id",e[s].objectId),l.save().then((function(t){a.default.functions("warn_GoodNum",{uid:uni.getStorageSync("uid"),goodId:e[s].objectId}).then((function(e){})),s==e.length-1&&n(!0)}))}))}));else{var c=u[0];if(e[s].selected_model){var f,v=(0,r.default)(e[s].selected_model);try{for(v.s();!(f=v.n()).done;){var m,g=f.value,y=(0,r.default)(c.models);try{for(y.s();!(m=y.n()).done;){var h=m.value;h.id==g.id&&(h.reserve=Number(h.reserve)-Number(g.num)),delete h.num}}catch(p){y.e(p)}finally{y.f()}}}catch(p){v.e(p)}finally{v.f()}d=Number(c.reserve)-Number(e[s].num),l.set("models",c.models)}else d=Number(c.reserve)-Number(e[s].num);l.set("reserve",d),l.set("id",c.objectId),l.save().then((function(t){l.equalTo("header","==",e[s].objectId),l.equalTo("order","==",1),l.statTo("sum","reserve"),l.find().then((function(t){var o=t[0]._sumReserve;l.set("reserve",o),l.set("id",e[s].objectId),l.save().then((function(t){a.default.functions("warn_GoodNum",{uid:uni.getStorageSync("uid"),goodId:e[s].objectId}).then((function(e){})),s==e.length-1&&n(!0)}))}))})).catch((function(e){t.log(e)}))}}))},l=0;l<e.length;l++)d(l)}))},upload_good_withNoCan:function(e,o,n,s){return new Promise((function(i,u){var d=uni.getStorageSync("uid"),l=a.default.Pointer("_User"),c=l.set(d),f=a.default.Pointer("stocks"),v=f.set(o.objectId),m=a.default.Pointer("Goods"),g="";g=e.header?m.set(e.header.objectId):m.set(e.objectId);var y=a.default.Query("Goods");if(y.set("goodsName",e.goodsName),y.set("goodsIcon",e.goodsIcon),"out"==s){if(y.set("reserve",0-Number(n)),e.goodsId&&e.goodsId.models){var h,p=(0,r.default)(e.goodsId.models);try{for(p.s();!(h=p.n()).done;){var _=h.value;_.reserve=0-Number(_.num)}}catch(P){p.e(P)}finally{p.f()}y.set("models",e.goodsId.models)}else if(e.models&&e.models.length>0){var b,w=(0,r.default)(e.models);try{for(w.s();!(b=w.n()).done;){var S=b.value;S.reserve=0-Number(S.num)}}catch(P){w.e(P)}finally{w.f()}y.set("models",e.models)}}else if("allocation"==s){if(y.set("reserve",Number(n)),e.selected_model&&e.selected_model.length>0){var x,T=(0,r.default)(e.selected_model);try{for(T.s();!(x=T.n()).done;){var I=x.value;I.reserve=Number(I.num),delete I.num}}catch(P){T.e(P)}finally{T.f()}y.set("models",e.selected_model)}}else if(y.set("reserve",Number(n)),e.goodsId&&e.goodsId.models){var q,N=(0,r.default)(e.goodsId.models);try{for(N.s();!(q=N.n()).done;){var j=q.value;j.reserve=Number(j.num)}}catch(P){N.e(P)}finally{N.f()}y.set("models",e.goodsId.models)}else if(e.models&&e.models.length>0){var k,C=(0,r.default)(e.models);try{for(C.s();!(k=C.n()).done;){var D=k.value;D.reserve=Number(D.num?D.num:0)}}catch(P){C.e(P)}finally{C.f()}y.set("models",e.models)}y.set("stocks",v),y.set("userId",c),y.set("header",g),y.set("costPrice",""+e.costPrice),y.set("retailPrice",""+e.retailPrice),y.set("order",1),y.save().then((function(e){t.log(e),i([!0,e])})).catch((function(e){t.log(e)}))}))},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,o,n){var r=a.default.Pointer("_User"),s=r.set(uni.getStorageSync("uid"));if(-2==o){var i=a.default.Pointer("Goods"),u=i.set(n),d=a.default.Query("logs");d.equalTo("goodId","==",n),d.find().then((function(n){if(0==n.length){var r=a.default.Query("logs");r.set("parent",s),r.set("goodId",u),r.set("log",e),r.set("type",o),r.save().then((function(e){t.log(e)})).catch((function(e){t.log(e)}))}}))}else{var l=a.default.Query("logs");l.set("parent",s),l.set("log",e),l.set("detail_id",n),l.set("type",o),l.save().then((function(e){t.log(e)})).catch((function(e){t.log(e)}))}},modifyStockType:function(e){var o=this,n=a.default.Query("Goods");n.get(e).then((function(e){var t=e;""==t.warning_num&&""==t.max_num?e.set("stocktype",1):void 0==t.warning_num&&void 0==t.max_num?e.set("stocktype",1):null==t.warning_num&&null==t.max_num?e.set("stocktype",1):(""!=t.warning_num&&(t.warning_num>=t.reserve?(e.set("stocktype",0),o.log(t.goodsName+"已经超过设置的最小库存值"+t.warning_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1)),""!=t.max_num&&(t.max_num<=t.reserve?(e.set("stocktype",2),o.log(t.goodsName+"已经超过设置的最大库存值"+t.max_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1))),e.save()})).catch((function(e){t.log(e)}))},record_shopOut:function(e,o){t.log(e,o);var n=a.default.Query("shops");n.set("id",e),n.set("have_out",o),n.save().then((function(e){t.log(e)})).catch((function(e){t.log(e)}))},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var o=a.default.Query("_User");o.set("id",uni.getStorageSync("user").objectId),o.set("have_out",Number(e)+uni.getStorageSync("user").have_out),o.save().then((function(e){t.log(e)})).catch((function(e){t.log(e)}))}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var o=a.default.Query("Goods");o.equalTo("userId","==",e),o.find().then((function(e){t.log(e);var o,n=(0,r.default)(e);try{for(n.s();!(o=n.n()).done;){var a=o.value;t.log(a),Number(a.costPrice)*a.reserve,a.reserve}}catch(s){n.e(s)}finally{n.f()}}))},getDay:function(e,t,o){var n=this,r=new Date,a=r.getTime()+864e5*e;r.setTime(a);var s=r.getFullYear(),i=r.getMonth(),u=r.getDate();return i=n.handleMonth(i+1),u=n.handleMonth(u),t?o?s+"-"+i+"-01 00:00:00":s+"-"+i+"-"+u+" 00:00:00":s+"-"+i+"-"+u},js_date_time:function(e,t){var o=new Date(e),n=o.getFullYear(),r=o.getMonth()+1;r=r<10?"0"+r:r;var a=o.getDate();a=a<10?"0"+a:a;var s=o.getHours();s=s<10?"0"+s:s;var i=o.getMinutes(),u=o.getSeconds();return i=i<10?"0"+i:i,u=u<10?"0"+u:u,t?n+"-"+r+"-"+a+" "+s+":"+i:n+"-"+r+"-"+a},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,o("5a52")["default"])},b7cd:function(e,t,o){"use strict";var n=o("4c3c"),r=o.n(n);r.a},dcce:function(e,t,o){"use strict";o.r(t);var n=o("6a0b"),r=o("4dc7");for(var a in r)"default"!==a&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("b7cd");var s,i=o("f0c5"),u=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"476e198c",null,!1,n["a"],s);t["default"]=u.exports},ded5:function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,".page[data-v-476e198c]{color:#4d4d4d;font-size:%?28?%;height:calc(100vh - %?110?%);overflow:scroll}.bottomEle[data-v-476e198c]{position:fixed;bottom:0;left:0;width:calc(100% - %?30?%);background:#fafafa;padding:%?20?% %?0?% %?20?% %?30?%;font-weight:700}.pro_list[data-v-476e198c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.pro_listitem[data-v-476e198c]{background-color:#fff;padding:%?10?% %?20?%;border-bottom:%?1?% solid#ddd}.pro_allmoney[data-v-476e198c]{background-color:#fff;padding:%?10?% %?20?%;text-align:right;font-size:%?32?%;color:#f30}.beizhu_style[data-v-476e198c]{text-align:left;background-color:#fff;max-height:%?100?%;padding:%?20?% 0}.confrim_button[data-v-476e198c]{background:#1651aa;color:#fff;font-weight:700;font-size:%?32?%;border-radius:unset;padding:0 %?50?%}",""]),e.exports=t},e4ef:function(e,t,o){"use strict";(function(e){var n=o("ee27");o("ac1f"),o("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(o("9546")),s=(n(o("7fd5")),n(o("114b")),{data:function(){return{orderDet:{}}},onLoad:function(t){r=this,uni.getStorageSync("uid"),uni.setNavigationBarTitle({title:"付款单详情"});var o=a.default.Query("order_opreations");o.include("opreater","account","custom","producer","secondClass","fristClass"),o.get(t.id).then((function(e){e.createdTime=e.createdTime.iso.split(" ")[0],r.orderDet=e})).catch((function(t){e.log(t)}))},onShow:function(){},methods:{}});t.default=s}).call(this,o("5a52")["default"])}}]);