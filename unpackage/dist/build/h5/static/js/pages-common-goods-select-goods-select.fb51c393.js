(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-goods-select-goods-select"],{"003d":function(t,e,o){"use strict";o.r(e);var i=o("a83b"),n=o("20b0");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("f101");var c=o("2877"),s=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,"277dacec",null);e["default"]=s.exports},"20b0":function(t,e,o){"use strict";o.r(e);var i=o("a0bc"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},a0bc:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("8899")),n=r(o("c211")),a=r(o("f3ca")),c=r(o("16b7")),s=r(o("e21e"));function r(t){return t&&t.__esModule?t:{default:t}}var u,l,d=[],v="",g=50,p={components:{loading:n.default,uniNavBar:a.default,faIcon:i.default,uniIcon:c.default},data:function(){return{url:null,showOptions:!1,loading:!0,productList:null,checked_option:"createdAt",category:"",stock:""}},onLoad:function(t){l=this,uni.removeStorageSync("category"),uni.removeStorageSync("warehouse"),"entering"==t.type?this.url="../good_confrim/good_confrim":"delivery"==t.type?this.url="../goods_out/goods_out":"returing"==t.type?this.url="../good_return/good_return":"counting"==t.type&&(this.url="../good_count/good_count"),u=uni.getStorageSync("uid"),l.get_productList()},onShow:function(){this.handle_data(),uni.removeStorageSync("products"),uni.getStorageSync("category")&&(l.category=uni.getStorageSync("category")),uni.getStorageSync("warehouse")&&(l.stock=uni.getStorageSync("warehouse")[uni.getStorageSync("warehouse").length-1].stock),uni.getStorageSync("is_option")&&l.get_productList()},onUnload:function(){v="",g=50,uni.removeStorageSync("is_option")},methods:{option_reset:function(){uni.removeStorageSync("category"),uni.removeStorageSync("warehouse"),l.category="",l.stock="",l.showOptions=!1,l.get_productList()},option_confrim:function(){uni.getStorageSync("category")&&(l.category=uni.getStorageSync("category")),uni.getStorageSync("warehouse")&&(l.stock=uni.getStorageSync("warehouse")[uni.getStorageSync("warehouse").length-1].stock),l.showOptions=!1,l.get_productList()},selectd:function(t){g=50,l.checked_option=t,l.get_productList()},load_more:function(){g+=50,l.get_productList()},radioChange:function(t){d=t.detail.value},go_goodsconfrim:function(){if(console.log(d),0==d.length)uni.showToast({title:"请选择产品",icon:"none"});else{for(var t=[],e=0;e<d.length;e++)this.productList[d[e]].num=1,this.productList[d[e]].total_money=1*this.productList[d[e]].retailPrice,this.productList[d[e]].modify_retailPrice=this.productList[d[e]].retailPrice,t.push(this.productList[d[e]]);uni.setStorageSync("products",t),uni.navigateTo({url:this.url})}},get_productList:function(){var t=this,e=s.default.Query("Goods");e.equalTo("userId","==",u),e.equalTo("stocks","==",l.stock.objectId),e.equalTo("status","!=",-1),e.equalTo("second_class","==",l.category.objectId),e.equalTo("goodsName","==",{$regex:v+".*"}),e.limit(g),e.order("-"+l.checked_option),e.include("userId"),e.include("goodsClass"),e.include("stocks"),e.find().then(function(e){t.productList=e,t.loading=!1})},handle_data:function(){v="",g=50}}};e.default=p},a83b:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"page"},[t.loading?o("loading"):o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{staticClass:"display_flex good_option_view"},[o("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("createdAt")}}},[o("v-uni-text",{class:"createdAt"==t.checked_option?"option_selected":""},[t._v("创建时间")]),"createdAt"==t.checked_option?o("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1),o("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("goodsName")}}},[o("v-uni-text",{class:"goodsName"==t.checked_option?"option_selected":""},[t._v("名字")]),"goodsName"==t.checked_option?o("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1),o("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("reserve")}}},[o("v-uni-text",{class:"reserve"==t.checked_option?"option_selected":""},[t._v("库存")]),"reserve"==t.checked_option?o("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1)],1),o("v-uni-scroll-view",{staticClass:"uni-product-list",attrs:{"scroll-y":""},on:{scrolltolower:function(e){e=t.$handleEvent(e),t.load_more(e)}}},[o("v-uni-checkbox-group",{on:{change:function(e){e=t.$handleEvent(e),t.radioChange(e)}}},t._l(t.productList,function(e,i){return o("v-uni-view",{key:i,staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-view",[o("v-uni-checkbox",{staticStyle:{transform:"scale(0.9)"},attrs:{value:i,color:"#426ab3",data:i}})],1),o("v-uni-view",{staticClass:"uni-product"},[o("v-uni-view",[e.goodsIcon?o("v-uni-image",{staticClass:"product_image",attrs:{src:e.goodsIcon,mode:"widthFix","lazy-load":"true"}}):o("v-uni-image",{staticClass:"product_image",attrs:{src:"/static/goods-default.png",mode:"widthFix","lazy-load":"true"}})],1),o("v-uni-view",{staticStyle:{"margin-left":"20rpx",width:"100%","line-height":"40rpx"}},[o("v-uni-view",{staticClass:"product_name",staticStyle:{"font-size":"30rpx"}},[t._v(t._s(e.goodsName))]),e.stocks.stock_name?o("v-uni-view",{staticClass:"product_reserve"},[t._v("所存仓库:"),o("v-uni-text",{staticClass:"text_notice"},[t._v(t._s(e.stocks.stock_name))])],1):t._e(),o("v-uni-view",{staticClass:"product_reserve"},[t._v("库存数量:"),o("v-uni-text",{staticClass:"text_notice"},[t._v(t._s(e.reserve))])],1),o("v-uni-view",{staticClass:"product_reserve"},[t._v("创建时间:"),o("v-uni-text",{staticClass:"text_notice"},[t._v(t._s(e.createdAt))])],1)],1)],1)],1)}),1)],1)],1),t.showOptions?o("v-uni-view",{staticClass:"modal_background",on:{click:function(e){e=t.$handleEvent(e),t.showOptions=!1}}},[o("v-uni-view",{staticClass:"showOptions"},[o("v-uni-navigator",{staticClass:"input_item1",attrs:{"hover-class":"none",url:"/pages/manage/category/category?type=choose"}},[o("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[o("v-uni-view",{staticClass:"left_item"},[t._v("类别")]),o("v-uni-view",{staticClass:"right_input"},[o("v-uni-input",{attrs:{placeholder:"产品类别",value:t.category.class_text,disabled:"true"}})],1)],1),o("v-uni-view",[o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),o("v-uni-navigator",{staticClass:"input_item1",attrs:{"hover-class":"none",url:"/pages/manage/warehouse/warehouse?type=choose"}},[o("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[o("v-uni-view",{staticClass:"left_item"},[t._v("仓库")]),o("v-uni-view",{staticClass:"right_input"},[o("v-uni-input",{attrs:{placeholder:"存放仓库",value:t.stock.stock_name,disabled:"true"}})],1)],1),o("v-uni-view",[o("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),o("v-uni-view",{staticClass:"option_bottom"},[o("v-uni-view",{staticClass:"selection",on:{click:function(e){e=t.$handleEvent(e),t.option_reset(e)}}},[t._v("重置")]),o("v-uni-view",{staticClass:"selection1",on:{click:function(e){e=t.$handleEvent(e),t.option_confrim(e)}}},[t._v("确定")])],1)],1)],1):t._e()],1)},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},e408:function(t,e,o){e=t.exports=o("2350")(!1),e.push([t.i,".text_notice[data-v-277dacec]{margin-left:%?6?%}.content[data-v-277dacec]{height:100%;overflow:hidden}.uni-product-list[data-v-277dacec]{padding:0 %?10?%;width:-webkit-calc(100% - %?20?%);width:calc(100% - %?20?%);height:-webkit-calc(100vh - %?80?%);height:calc(100vh - %?80?%)}.uni-product[data-v-277dacec]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:%?10?% 0;border-bottom:1px solid#ddd;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%;margin-left:%?20?%}.product_image[data-v-277dacec]{width:%?80?%;height:%?80?%}.product_name[data-v-277dacec]{font-weight:700;color:#333}.product_reserve[data-v-277dacec]{color:#6c757d;font-size:%?24?%;font-weight:700}",""])},f101:function(t,e,o){"use strict";var i=o("f6f0"),n=o.n(i);n.a},f6f0:function(t,e,o){var i=o("e408");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=o("4f06").default;n("3f8c7a6b",i,!0,{sourceMap:!1,shadowMode:!1})}}]);