(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-operational_status-operational_status"],{"0307":function(e,t,i){"use strict";var n=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("c5f6");var s=n(i("5d73"));i("7514");var a,o=n(i("df06")),r=n(i("524a")),u=void 0,c={components:{loading:r.default},data:function(){return{loading:!0,reserve_money:0,all_reserve:0,warn_num:0,today_in:0,today_out:0,get_reserve:0,out_reserve:0,get_reserve_real_money:0,out_reserve_real_money:0,get_reserve_num:0,out_reserve_num:0,get_reserve_get_num:0,out_reserve_get_num:0,should_get_money:0,real_get_money:0}},onLoad:function(){u=this,a=uni.getStorageSync("uid"),u.get_allCost(),u.gettoday_detail(),console.log(o.default.getDay(0,!0))},methods:{get_allCost:function(){var e=0,t=0,i=0,n=Bmob.Query("Goods");n.equalTo("userId","==",a),n.limit(500),n.find().then(function(n){var a=!0,o=!1,r=void 0;try{for(var c,l=(0,s.default)(n);!(a=(c=l.next()).done);a=!0){var v=c.value;e+=Number(v.costPrice)*v.reserve,t+=v.reserve,(v.stocktype=0)&&(i+=1)}}catch(_){o=!0,r=_}finally{try{a||null==l.return||l.return()}finally{if(o)throw r}}u.reserve_money=e,u.all_reserve=t,u.warn_num=i,u.loading=!1})},gettoday_detail:function(){var e=0,t=0,i=0,n=0,s=0,r=0,c=Bmob.Query("Bills");c.equalTo("userId","==",a),c.equalTo("createdAt",">=",o.default.getDay(0,!0)),c.include("goodsId"),c.find().then(function(c){for(var l=0;l<c.length;l++)1==c[l].type?(e+=c[l].num,i+=c[l].num*c[l].goodsId.retailPrice,s+=c[l].total_money):-1==c[l].type&&(t+=c[l].num,n+=c[l].num*c[l].goodsId.costPrice,r+=c[l].total_money);u.get_reserve=e.toFixed(uni.getStorageSync("setting").show_float),u.out_reserve=t.toFixed(uni.getStorageSync("setting").show_float),u.get_reserve_real_money=i.toFixed(uni.getStorageSync("setting").show_float),u.out_reserve_real_money=n.toFixed(uni.getStorageSync("setting").show_float),u.get_reserve_num=s.toFixed(uni.getStorageSync("setting").show_float),u.out_reserve_num=r.toFixed(uni.getStorageSync("setting").show_float),u.get_reserve_get_num=(i-s).toFixed(uni.getStorageSync("setting").show_float),u.out_reserve_get_num=(r-n).toFixed(uni.getStorageSync("setting").show_float),console.log(e);var v=0,_=0,d=Bmob.Query("order_opreations");d.equalTo("master","==",a),d.equalTo("createdAt",">=",o.default.getDay(0,!0)),d.equalTo("type","==",-1),d.find().then(function(e){for(var t=0;t<e.length;t++)v+=e[t].all_money,_+=e[t].real_money;u.should_get_money=v,u.real_get_money=_})})}},computed:{i18n:function(){return this.$t("operational_status")}}};t.default=c},"0a39":function(e,t,i){"use strict";i.r(t);var n=i("3212"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},"0bff":function(e,t,i){"use strict";i.r(t);var n=i("4954"),s=i("318f");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("9992");var o=i("2877"),r=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"cffb2a38",null);t["default"]=r.exports},"2b92":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.list[data-v-cffb2a38]{background:#fff}.list .list_frst[data-v-cffb2a38]{padding:%?10?% %?20?%;border-bottom:%?1?% solid #ccc}.list .list_frst .icon_img[data-v-cffb2a38]{width:%?60?%;height:%?60?%}.list .list_frst .text_notice[data-v-cffb2a38]{margin-left:%?10?%}.list .list_second[data-v-cffb2a38]{padding:%?10?%;font-size:%?24?%;line-height:%?40?%}.list .list_second .item[data-v-cffb2a38]{width:50%;padding-left:%?20?%}.list .list_second .show_num[data-v-cffb2a38]{color:#3d3d3d;font-weight:700}.second_list[data-v-cffb2a38]{padding:%?20?%;background:#fff;margin-top:%?30?%}.second_list .second_item[data-v-cffb2a38]{width:50%}.second_list .icon_img[data-v-cffb2a38]{width:%?60?%;height:%?60?%;margin-right:%?10?%}.second_list .text_notice[data-v-cffb2a38]{font-weight:%?24?%}.second_list .list_item[data-v-cffb2a38]{padding:%?10?% 0;border-bottom:%?1?% solid #ccc}.second_list .reserve_text[data-v-cffb2a38]{color:#3d3d3d;font-weight:700}.second_list .text_notice[data-v-cffb2a38]{font-size:%?20?%;margin-bottom:%?8?%}',""])},"318f":function(e,t,i){"use strict";i.r(t);var n=i("0307"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},3212:function(e,t,i){},4954:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[e.loading?i("loading"):i("v-uni-view",[i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"display_flex list_frst"},[i("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/chengben.png"}}),i("v-uni-text",{staticClass:"text_notice"},[e._v(e._s(e.i18n.a)+" "+e._s(e.reserve_money))])],1),i("v-uni-view",{staticClass:"display_flex_bet list_second"},[i("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#CCCCCC"}},[i("v-uni-view",[e._v("库存总数")]),i("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.all_reserve))])],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",[e._v("预警产品数")]),i("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.warn_num))])],1)],1)],1),i("v-uni-view",{staticClass:"second_list"},[i("v-uni-view",{staticClass:"display_flex_bet list_item"},[i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("今日入库")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve))])],1)],1),i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("今日出库")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve))])],1)],1)],1),i("v-uni-view",{staticClass:"display_flex_bet list_item"},[i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("入库成本总额")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_real_money))])],1)],1),i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("出库成本总额")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_real_money))])],1)],1)],1),i("v-uni-view",{staticClass:"display_flex_bet list_item"},[i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("预计卖出总额")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_num))])],1)],1),i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("预计买进总额")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_num))])],1)],1)],1),i("v-uni-view",{staticClass:"display_flex_bet list_item"},[i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("预计可获利润")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_get_num))])],1)],1),i("v-uni-view",{staticClass:"display_flex second_item"},[i("v-uni-view",[i("v-uni-view",{staticClass:"text_notice"},[e._v("毛利润")]),i("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_get_num))])],1)],1)],1)],1)],1)],1)},s=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},"524a":function(e,t,i){"use strict";i.r(t);var n=i("c636"),s=i("0a39");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("f68d");var o=i("2877"),r=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"11ff4219",null);t["default"]=r.exports},9257:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".Loading_view[data-v-11ff4219]{height:100vh;width:100%;text-align:center;background:#fff}.loading_image[data-v-11ff4219]{width:%?200?%;height:%?200?%;margin-top:50%}",""])},9992:function(e,t,i){"use strict";var n=i("ada9"),s=i.n(n);s.a},ada9:function(e,t,i){var n=i("2b92");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("4f06").default;s("475e3fda",n,!0,{sourceMap:!1,shadowMode:!1})},b871:function(e,t,i){var n=i("9257");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("4f06").default;s("0d0cf901",n,!0,{sourceMap:!1,shadowMode:!1})},c636:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"Loading_view"},[i("v-uni-image",{staticClass:"loading_image",attrs:{src:"/static/timg.gif"}}),i("v-uni-view",{staticStyle:{color:"#999","margin-top":"3%"}},[e._v("加载中...")])],1)},s=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},df06:function(e,t,i){"use strict";var n=i("288e");i("6b54"),i("87b3"),i("c5f6");var s=n(i("5d73"));i("7514"),e.exports={handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("now_product"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,t,i){var n=Bmob.Pointer("_User"),s=n.set(uni.getStorageSync("uid")),a=Bmob.Query("logs");a.set("parent",s),a.set("log",e),a.set("detail_id",i),a.set("type",t),a.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_shopOut:function(e,t){console.log(e,t);var i=Bmob.Query("shops");i.set("id",e),i.set("have_out",t),i.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},record_staffOut:function(e){if(console.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var t=Bmob.Query("staffs");t.set("id",uni.getStorageSync("user").objectId),t.set("have_out",e+uni.getStorageSync("user").have_out),t.save().then(function(e){console.log(e)}).catch(function(e){console.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");console.log(e);var t=Bmob.Query("Goods");t.equalTo("userId","==",e),t.find().then(function(e){console.log(e);var t=!0,i=!1,n=void 0;try{for(var a,o=(0,s.default)(e);!(t=(a=o.next()).done);t=!0){var r=a.value;console.log(r),Number(r.costPrice)*r.reserve,r.reserve}}catch(u){i=!0,n=u}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}})},getDay:function(e,t){var i=this,n=new Date,s=n.getTime()+864e5*e;n.setTime(s);var a=n.getFullYear(),o=n.getMonth(),r=n.getDate();return o=i.handleMonth(o+1),r=i.handleMonth(r),t?a+"-"+o+"-"+r+" 00:00:00":a+"-"+o+"-"+r},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}},f68d:function(e,t,i){"use strict";var n=i("b871"),s=i.n(n);s.a}}]);