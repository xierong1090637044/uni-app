(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-custom-add-add"],{"126e":function(t,e,n){"use strict";n.r(e);var i=n("5ff8"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},1840:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"uni-page-body[data-v-e7302834]{background:#fafafa}.item[data-v-e7302834]{padding:%?20?% %?30?%;background:#fff}body.?%PAGE?%[data-v-e7302834]{background:#fafafa}",""])},"5e7e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加"},on:{"click-right":function(e){e=t.$handleEvent(e),t.add_data(e)}}},[n("v-uni-view")],1),n("v-uni-view",[n("v-uni-view",{staticClass:"display_flex item"},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("姓名")]),n("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("v-uni-view",{staticClass:"display_flex item"},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系地址")]),n("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),n("v-uni-view",{staticClass:"display_flex item"},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("联系电话")]),n("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入电话",type:"number",maxlength:"11"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),n("v-uni-view",{staticClass:"display_flex item"},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("折扣率")]),n("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入折扣率",type:"number",maxlength:"3"},on:{input:function(e){e=t.$handleEvent(e),t.getDiscount(e)}},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}}),n("v-uni-text",[t._v("%")])],1),n("v-uni-view",{staticClass:"display_flex item"},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx",width:"160rpx"}},[t._v("欠款金额")]),n("v-uni-input",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{placeholder:"请输入起初欠款金额",type:"digit"},model:{value:t.debt,callback:function(e){t.debt=e},expression:"debt"}})],1)],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"5ff8":function(t,e,n){"use strict";(function(t){var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7f7f"),n("c5f6");var a,s,o,u,r=i(n("c74b")),c=i(n("b92d")),d={components:{uniNavBar:c.default},data:function(){return{name:"",address:"",phone:"",debt:0,discount:100}},onLoad:function(t){a=t.type,s=this,u=uni.getStorageSync("uid"),"customs"==a?uni.setNavigationBarTitle({title:"新增客户"}):uni.setNavigationBarTitle({title:"新增供货商"})},onShow:function(){o=uni.getStorageSync("customs"),o?(a=uni.getStorageSync("custom_type"),"customs"==a?(s.name=o.custom_name,s.address=o.custom_address,s.phone=o.custom_phone,s.debt=o.debt):(s.name=o.producer_name,s.address=o.producer_address,s.phone=o.producer_phone,s.debt=o.debt)):"customs"==a?uni.setNavigationBarTitle({title:"修改客户"}):uni.setNavigationBarTitle({title:"修改供货商"})},onUnload:function(){uni.removeStorageSync("custom_type"),uni.removeStorageSync("customs")},methods:{getDiscount:function(t){var e=Number(t.detail.value);e>=100&&(s.discount=100)},add_data:function(){if(null==this.name)uni.showToast({title:"请输入姓名",icon:"none"});else if("customs"==a){var e=r.default.Query("customs"),n=r.default.Pointer("_User"),i=n.set(u);o&&e.set("id",o.objectId),e.set("custom_name",s.name),e.set("custom_phone",s.phone?s.phone:""),e.set("custom_address",s.address?s.address:""),e.set("debt",Number(s.debt)),e.set("discount",Number(s.discount)),e.set("parent",i),e.save().then(function(e){t.log(e),o?uni.showToast({title:"修改成功"}):uni.showToast({title:"添加成功"})}).catch(function(e){t.log(e)})}else{var c=r.default.Query("producers"),d=r.default.Pointer("_User"),l=d.set(u);o&&c.set("id",o.objectId),c.set("producer_name",s.name),c.set("producer_phone",s.phone?s.phone:""),c.set("producer_address",s.address?s.address:""),c.set("debt",Number(s.debt)),c.set("discount",Number(s.discount)),c.set("parent",l),c.save().then(function(e){t.log(e),o?uni.showToast({title:"修改成功"}):uni.showToast({title:"添加成功"})}).catch(function(e){t.log(e)})}}}};e.default=d}).call(this,n("5a52")["default"])},"60c3":function(t,e,n){"use strict";var i=n("83f8"),a=n.n(i);a.a},"6f4c":function(t,e,n){"use strict";n.r(e);var i=n("5e7e"),a=n("126e");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("60c3");var o=n("2877"),u=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"e7302834",null);e["default"]=u.exports},"83f8":function(t,e,n){var i=n("1840");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("bd498000",i,!0,{sourceMap:!1,shadowMode:!1})}}]);