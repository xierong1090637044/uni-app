(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-goods-goods"],{"02ec":function(t,e,n){"use strict";n.r(e);var o=n("30da"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},"2bef":function(t,e,n){"use strict";var o=n("288e");n("6b54"),n("87b3"),n("c5f6");var i=o(n("5d73"));n("7514"),t.exports={handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(t,e,n){var o=Bmob.Pointer("_User"),i=o.set(uni.getStorageSync("uid")),a=Bmob.Query("logs");a.set("parent",i),a.set("log",t),a.set("detail_id",n),a.set("type",e),a.save().then(function(t){console.log(t)}).catch(function(t){console.log(t)})},record_shopOut:function(t,e){console.log(t,e);var n=Bmob.Query("shops");n.set("id",t),n.set("have_out",e),n.save().then(function(t){console.log(t)}).catch(function(t){console.log(t)})},record_staffOut:function(t){if(console.log(t,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var e=Bmob.Query("staffs");e.set("id",uni.getStorageSync("user").objectId),e.set("have_out",t+uni.getStorageSync("user").have_out),e.save().then(function(t){console.log(t)}).catch(function(t){console.log(t)})}},get_allCost:function(){var t=uni.getStorageSync("uid");console.log(t);var e=Bmob.Query("Goods");e.equalTo("userId","==",t),e.find().then(function(t){console.log(t);var e=!0,n=!1,o=void 0;try{for(var a,c=(0,i.default)(t);!(e=(a=c.next()).done);e=!0){var s=a.value;console.log(s),Number(s.costPrice)*s.reserve,s.reserve}}catch(r){n=!0,o=r}finally{try{e||null==c.return||c.return()}finally{if(n)throw o}}})},getDay:function(t,e){var n=this,o=new Date,i=o.getTime()+864e5*t;o.setTime(i);var a=o.getFullYear(),c=o.getMonth(),s=o.getDate();return c=n.handleMonth(c+1),s=n.handleMonth(s),e?a+"-"+c+"-"+s+" 00:00:00":a+"-"+c+"-"+s},handleMonth:function(t){var e=t;return 1==t.toString().length&&(e="0"+t),e}}},"30da":function(t,e,n){"use strict";var o=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7514");var i,a,c=o(n("00eb")),s=o(n("b841")),r=o(n("e081")),u=o(n("c8e0")),l=o(n("11b1")),d=o(n("2bef")),g="",v=30,p=1,f={components:{loading:s.default,uniNavBar:r.default,faIcon:c.default,uniPagination:l.default,uniIcon:u.default},data:function(){return{page_num:1,showOptions:!1,loading:!0,productList:null,checked_option:"createdAt",category:"",stock:"",checked:!1,stock_checked:!1}},onLoad:function(){a=this,uni.removeStorageSync("category"),uni.removeStorageSync("warehouse"),i=uni.getStorageSync("uid"),a.get_productList()},onShow:function(){this.page_num=p,uni.removeStorageSync("now_product"),uni.getStorageSync("category")&&(a.showOptions=!0,a.category=uni.getStorageSync("category")),uni.getStorageSync("warehouse")&&(a.showOptions=!0,a.stock=uni.getStorageSync("warehouse")[uni.getStorageSync("warehouse").length-1].stock),uni.getStorageSync("is_add")&&a.get_productList()},onUnload:function(){d.default.handleData(),g="",v=50,uni.removeStorageSync("is_add")},methods:{change_page:function(t){p=t.current,a.get_productList()},change_timestatus:function(t){console.log(t),a.checked=t.detail.value},change_stocktatus:function(t){console.log(t),a.stock_checked=t.detail.value},input_confirm:function(t){console.log(t),g=t.detail.value,a.get_productList()},shaixuan:function(){a.showOptions=!0},goto_add:function(){uni.showActionSheet({itemList:["单产品上传","多仓库产品上传","多规格产品上传"],success:function(t){0==t.tapIndex?uni.navigateTo({url:"../good_add/good_add"}):1==t.tapIndex?uni.navigateTo({url:"../goods_add/goods_add"}):2==t.tapIndex&&uni.navigateTo({url:"../goods_add_MoreG/goods_add_MoreG"})},fail:function(t){console.log(t.errMsg)}})},option_reset:function(){uni.removeStorageSync("category"),uni.removeStorageSync("warehouse"),a.stock_checked=!1,a.category="",a.stock="",a.showOptions=!1,a.get_productList()},option_confrim:function(){uni.getStorageSync("category")&&(a.category=uni.getStorageSync("category")),uni.getStorageSync("warehouse")&&(a.stock=uni.getStorageSync("warehouse")[uni.getStorageSync("warehouse").length-1].stock),a.showOptions=!1,a.get_productList()},selectd:function(t){v=50,a.checked_option=t,a.get_productList()},goDetail:function(t){console.log(t),uni.setStorageSync("now_product",t),uni.navigateTo({url:"../good_det/good_det"})},get_productList:function(){var t=this,e=Bmob.Query("Goods");e.equalTo("userId","==",i),e.equalTo("stocks","==",a.stock.objectId),e.equalTo("status","!=",-1),a.stock||e.equalTo("accessory","!=",!0),e.equalTo("second_class","==",a.category.objectId);var n=e.equalTo("goodsName","==",{$regex:g+".*"}),o=e.equalTo("packageContent","==",{$regex:g+".*"});if(e.or(n,o),a.checked){var c=Date.parse(new Date);e.equalTo("bad_time","<=",c)}a.stock_checked&&e.equalTo("stocktype","==",0),e.limit(v),e.skip(v*(p-1)),e.order("-"+a.checked_option),e.include("goodsClass","stocks","second_class"),e.find().then(function(e){t.productList=e,t.loading=!1})}}};e.default=f},"3ab5":function(t,e,n){"use strict";var o=n("52c9"),i=n.n(o);i.a},"433a":function(t,e,n){"use strict";n.r(e);var o=n("d7ec"),i=n("02ec");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("3ab5");var c=n("2877"),s=Object(c["a"])(i["default"],o["a"],o["b"],!1,null,"4a7b1ad4",null);e["default"]=s.exports},"52c9":function(t,e,n){var o=n("5378");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("04b79544",o,!0,{sourceMap:!1,shadowMode:!1})},5378:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-4a7b1ad4]{background:#fff}.text_notice[data-v-4a7b1ad4]{margin-left:%?6?%}.content[data-v-4a7b1ad4]{height:100%;overflow:hidden}.uni-product-list[data-v-4a7b1ad4]{padding:0 %?10?%;width:calc(100% - %?20?%);height:calc(100vh - %?236?%)}.uni-product[data-v-4a7b1ad4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:%?10?% 0;border-bottom:1px solid #ddd;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.product_image[data-v-4a7b1ad4]{width:%?80?%;height:%?80?%}.product_name[data-v-4a7b1ad4]{font-weight:700;color:#333}.product_reserve[data-v-4a7b1ad4]{color:#6c757d;font-size:%?24?%;font-weight:700}.title[data-v-4a7b1ad4]{font-size:15px;line-height:20px;color:#333;padding:15px}.city[data-v-4a7b1ad4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;margin-left:8px;white-space:nowrap}.input-view[data-v-4a7b1ad4]{width:92%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:#e7e7e7;height:30px;border-radius:15px;padding:0 4%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;margin:%?8?% 0;line-height:30px}.input-view .uni-icon[data-v-4a7b1ad4]{line-height:30px!important}.input-view .input[data-v-4a7b1ad4]{height:30px;line-height:30px;width:94%;padding:0 3%}body.?%PAGE?%[data-v-4a7b1ad4]{background:#fff}',""])},d7ec:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[t.loading?n("loading"):n("v-uni-view",{staticClass:"content"},[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加","left-text":"筛选"},on:{"click-left":function(e){e=t.$handleEvent(e),t.shaixuan(e)},"click-right":function(e){e=t.$handleEvent(e),t.goto_add(e)}}},[n("v-uni-view",{staticClass:"input-view"},[n("uni-icon",{attrs:{type:"search",size:"22",color:"#666666"}}),n("v-uni-input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词"},on:{confirm:function(e){e=t.$handleEvent(e),t.input_confirm(e)}}})],1)],1),n("v-uni-view",{staticClass:"display_flex good_option_view"},[n("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("createdAt")}}},[n("v-uni-text",{class:"createdAt"==t.checked_option?"option_selected":""},[t._v("创建时间")]),"createdAt"==t.checked_option?n("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1),n("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("goodsName")}}},[n("v-uni-text",{class:"goodsName"==t.checked_option?"option_selected":""},[t._v("名字")]),"goodsName"==t.checked_option?n("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1),n("v-uni-view",{staticClass:"good_option",on:{click:function(e){e=t.$handleEvent(e),t.selectd("reserve")}}},[n("v-uni-text",{class:"reserve"==t.checked_option?"option_selected":""},[t._v("库存")]),"reserve"==t.checked_option?n("fa-icon",{attrs:{type:"check",size:"20",color:"#1d953f"}}):t._e()],1)],1),n("v-uni-scroll-view",{staticClass:"uni-product-list",attrs:{"scroll-y":""}},[t.productList.length>0?n("v-uni-view",t._l(t.productList,function(e,o){return n("v-uni-view",{key:o,staticClass:"uni-product"},[n("v-uni-view",[e.goodsIcon?n("v-uni-image",{staticClass:"product_image",attrs:{src:e.goodsIcon,mode:"widthFix"}}):n("v-uni-image",{staticClass:"product_image",attrs:{src:"/static/goods-default.png",mode:"widthFix"}})],1),n("v-uni-view",{staticStyle:{"margin-left":"20rpx",width:"100%","line-height":"40rpx"},on:{click:function(n){n=t.$handleEvent(n),t.goDetail(e)}}},[n("v-uni-view",{staticClass:"product_name",staticStyle:{"font-size":"30rpx"}},[t._v(t._s(e.goodsName))]),e.packageContent&&e.packingUnit?n("v-uni-view",{staticClass:"product_reserve"},[t._v("规格:"),n("v-uni-text",{staticClass:"text_notice"},[t._v(t._s(e.packageContent)+"*"+t._s(e.packingUnit))])],1):t._e(),n("v-uni-view",{staticClass:"product_reserve"},[t._v("创建时间:"),n("v-uni-text",{staticClass:"text_notice"},[t._v(t._s(e.createdAt))])],1)],1),n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#426ab3"}})],1)}),1):n("v-uni-view",[n("v-uni-view",{staticStyle:{"margin-top":"100rpx",color:"#333","font-weight":"bold","text-align":"center","font-size":"36rpx"}},[t._v("没有商品啦!")])],1)],1),n("v-uni-view",{staticStyle:{padding:"6rpx 0","border-top":"1rpx solid#ddd"}},[n("uni-pagination",{attrs:{"show-icon":!0,total:"100000",current:t.page_num},on:{change:function(e){e=t.$handleEvent(e),t.change_page(e)}}})],1)],1),t.showOptions?n("v-uni-view",{staticClass:"modal_background"},[n("v-uni-view",{staticClass:"showOptions"},[n("v-uni-navigator",{staticClass:"input_item1",attrs:{"hover-class":"none",url:"/pages/manage/category/category?type=choose"}},[n("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[n("v-uni-view",{staticClass:"left_item"},[t._v("类别")]),n("v-uni-view",{staticClass:"right_input"},[n("v-uni-input",{attrs:{placeholder:"产品类别",value:t.category.class_text,disabled:"true"}})],1)],1),n("v-uni-view",[n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),n("v-uni-navigator",{staticClass:"input_item1",attrs:{"hover-class":"none",url:"/pages/manage/warehouse/warehouse?type=choose"}},[n("v-uni-view",{staticStyle:{display:"flex","align-items":"center",width:"100%"}},[n("v-uni-view",{staticClass:"left_item"},[t._v("仓库")]),n("v-uni-view",{staticClass:"right_input"},[n("v-uni-input",{attrs:{placeholder:"存放仓库",value:t.stock.stock_name,disabled:"true"}})],1)],1),n("v-uni-view",[n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1),n("v-uni-view",{staticClass:"display_flex",staticStyle:{padding:"0 30rpx","margin-top":"10rpx"}},[n("v-uni-view",[t._v("是否已预警")]),n("v-uni-view",{staticStyle:{"margin-left":"30rpx"},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e)}}},[n("v-uni-switch",{attrs:{checked:t.stock_checked},on:{change:function(e){e=t.$handleEvent(e),t.change_stocktatus(e)}}})],1)],1),n("v-uni-view",{staticClass:"display_flex",staticStyle:{padding:"0 30rpx","margin-top":"10rpx"}},[n("v-uni-view",[t._v("是否失效")]),n("v-uni-view",{staticStyle:{"margin-left":"30rpx"},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e)}}},[n("v-uni-switch",{attrs:{checked:t.checked},on:{change:function(e){e=t.$handleEvent(e),t.change_timestatus(e)}}})],1)],1),n("v-uni-view",{staticClass:"option_bottom"},[n("v-uni-view",{staticClass:"selection",on:{click:function(e){e=t.$handleEvent(e),t.option_reset(e)}}},[t._v("重置")]),n("v-uni-view",{staticClass:"selection1",on:{click:function(e){e=t.$handleEvent(e),t.option_confrim(e)}}},[t._v("确定")])],1)],1)],1):t._e()],1)},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})}}]);