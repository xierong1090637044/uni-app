(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-good_det-custom_detail-custom_detail"],{"59c9":function(t,e,n){"use strict";(function(t){var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a=i(n("5d73"));n("7514");var o=i(n("795b")),s=i(n("906f")),c={get_customList:function(t,e){return new o.default(function(n,i){var a=uni.getStorageSync("uid"),o=s.default.Query("customs");o.order("num"),o.equalTo("parent","==",a),o.equalTo("disabled","==",t),e&&o.equalTo("name","==",{$regex:e+".*"}),o.find().then(function(t){n(t)})})},get_customCount:function(){return new o.default(function(t,e){var n=uni.getStorageSync("uid"),i=s.default.Query("customs");i.equalTo("parent","==",n),i.find().then(function(e){var n=e,i=!0,o=!1,c=void 0;try{for(var u,l=function(){var t=u.value,e=s.default.Query("Bills");e.equalTo("type","==",-1),e.equalTo("custom","==",t.objectId),e.find().then(function(e){t.relations=e})},r=(0,a.default)(n);!(i=(u=r.next()).done);i=!0)l()}catch(d){o=!0,c=d}finally{try{i||null==r.return||r.return()}finally{if(o)throw c}}t(n)})})},add_custom:function(e){t.log(e);var n=JSON.parse(localStorage.getItem("bmob")).objectId;return new o.default(function(i,a){var o=s.default.Pointer("_User"),c=o.set(n);if(e.objectId){var u=s.default.Query("customs");u.set("custom_name",e.custom_name),u.set("debt",Number(e.debt)),u.set("custom_address",e.custom_address),u.set("custom_phone",e.custom_phone),u.set("parent",c),u.set("disabled",!e.disabled),u.set("id",e.objectId),u.save().then(function(t){i(t)}).catch(function(e){t.log(e)})}else{var l=s.default.Query("customs");l.equalTo("parent","==",n),l.equalTo("name","==",e.custom_name),l.find().then(function(n){if(t.log(n),0==n.length){var a=s.default.Query("customs");a.set("custom_name",e.custom_name),a.set("debt",Number(e.debt)),a.set("custom_address",e.custom_address),a.set("custom_phone",e.custom_phone),a.set("have_out",0),a.set("disabled",!e.disabled),a.set("parent",c),a.save().then(function(t){i(t)}).catch(function(e){t.log(e)})}else i(!1)})}})},delete_custom:function(e){return new o.default(function(n,i){var a=s.default.Query("customs");a.destroy(e).then(function(t){n(t)}).catch(function(e){t.log(e)})})},custom_detail:function(e){return new o.default(function(n,i){var a=s.default.Query("customs");a.get(e).then(function(t){n(t)}).catch(function(e){t.log(e)})})},get_moneyList:function(e){return new o.default(function(n,i){var a=s.default.Query("debt_history");a.equalTo("custom","==",e),a.include("operater"),a.find().then(function(e){t.log(e),n(e)})})}};e.default=c}).call(this,n("5a52")["default"])},7771:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"page-body"},[n("v-uni-scroll-view",{staticClass:"nav-left",style:"height:"+t.height+"px",attrs:{"scroll-y":""}},t._l(t.custom_list,function(e,i){return n("v-uni-view",{key:i,staticClass:"nav-left-item",class:i==t.categoryActive?"active":"",on:{click:function(n){n=t.$handleEvent(n),t.categoryClickMain(e.objectId,i)}}},[t._v(t._s(e.custom_name))])}),1),n("v-uni-scroll-view",{staticClass:"nav-right",style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.scrollTop,"scroll-with-animation":""},on:{scroll:function(e){e=t.$handleEvent(e),t.scroll(e)}}},t._l(t.subCategoryList,function(e,i){return n("v-uni-view",{key:i,staticClass:"nav-right-item",attrs:{id:0===i?"first":""}},[n("v-uni-view",{staticStyle:{"text-align":"left","border-bottom":"solid 1rpx #E0E0E0",padding:"20rpx 0"}},[n("v-uni-view",[t._v("销售商品："+t._s(e.goodsName))]),n("v-uni-view",{staticClass:"display_flex_bet"},[n("v-uni-view",[t._v("实际单价："+t._s(e.goodsId.retailPrice))]),n("v-uni-view",[t._v("卖出单价："+t._s(e.retailPrice))])],1),n("v-uni-view",{staticClass:"display_flex_bet"},[n("v-uni-view",[t._v("数量："+t._s(e.num))])],1),n("v-uni-view",[t._v("操作者："+t._s(e.operater.nickName))]),n("v-uni-view",[t._v(t._s(e.createdAt))])],1)],1)}),1)],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"94bf":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".page-body[data-v-cec81ed8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.nav[data-v-cec81ed8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%}.nav-left[data-v-cec81ed8]{width:30%;background:#fff;border-right:solid %?1?% #e0e0e0}.nav-left-item[data-v-cec81ed8]{height:%?100?%;border-bottom:solid %?1?% #e0e0e0;font-size:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#3d3d3d;font-weight:700}.nav-right[data-v-cec81ed8]{width:70%;background:#fff}.nav-right-item[data-v-cec81ed8]{width:calc(100% - %?44?%);float:left;text-align:center;padding:0 %?20?%;font-size:%?24?%}.active[data-v-cec81ed8]{color:#007aff}",""])},"99f2":function(t,e,n){"use strict";n.r(e);var i=n("7771"),a=n("c5d2");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("bc96");var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"cec81ed8",null);e["default"]=c.exports},"9a6f":function(t,e,n){var i=n("94bf");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("3a73f880",i,!0,{sourceMap:!1,shadowMode:!1})},bc96:function(t,e,n){"use strict";var i=n("9a6f"),a=n.n(i);a.a},c5d2:function(t,e,n){"use strict";n.r(e);var i=n("f651"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},f651:function(t,e,n){"use strict";(function(t){var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7514");var a,o,s=i(n("906f")),c=i(n("59c9")),u=i(n("eaf0")),l=i(n("c7fb")),r=(uni.getStorageSync("uid"),{components:{faIcon:u.default,loading:l.default},data:function(){return{custom_list:[],categoryList:[],subCategoryList:[],height:0,categoryActive:0,scrollTop:0,scrollHeight:0}},methods:{scroll:function(t){this.scrollHeight=t.detail.scrollHeight},categoryClickMain:function(t,e){this.categoryActive=e,this.scrollTop=-this.scrollHeight*e,this.get_detail(t)},get_detail:function(e){var n=this,i=s.default.Query("Bills");i.equalTo("type","==",-1),i.equalTo("goodsId","==",o),i.equalTo("custom","==",e),i.include("operater","goodsId"),i.find().then(function(e){t.log(e),n.subCategoryList=e})}},onLoad:function(t){o=t.id,a=this,c.default.get_customList().then(function(t){a.custom_list=t,a.get_detail(t[0].objectId)}),this.height=uni.getSystemInfoSync().windowHeight}});e.default=r}).call(this,n("5a52")["default"])}}]);