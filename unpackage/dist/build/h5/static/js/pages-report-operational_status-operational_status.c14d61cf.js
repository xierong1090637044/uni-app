(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-operational_status-operational_status"],{1362:function(e,t,n){var r=n("6cd2");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("4f06").default;o("d8ce6252",r,!0,{sourceMap:!1,shadowMode:!1})},"691d":function(e,t,n){"use strict";n.r(t);var r=n("afb9"),o=n("e89d");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("e63d");var i=n("f0c5"),s=Object(i["a"])(o["default"],r["a"],r["b"],!1,null,"35ed3820",null);t["default"]=s.exports},"6cd2":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.select[data-v-35ed3820]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background:#fff;padding:%?20?% %?30?%;margin-bottom:%?20?%}.select .section[data-v-35ed3820]{width:50%;text-align:center}.list[data-v-35ed3820]{background:#fff}.list .list_frst[data-v-35ed3820]{padding:%?10?% %?20?%;border-bottom:%?1?% solid #ccc}.list .list_frst .icon_img[data-v-35ed3820]{width:%?60?%;height:%?60?%}.list .list_frst .text_notice[data-v-35ed3820]{margin-left:%?10?%}.list .list_second[data-v-35ed3820]{padding:%?10?%;font-size:%?24?%;line-height:%?40?%}.list .list_second .item[data-v-35ed3820]{width:50%;padding-left:%?20?%}.list .list_second .show_num[data-v-35ed3820]{color:#3d3d3d;font-weight:700}.second_list[data-v-35ed3820]{padding:%?20?%;background:#fff;margin-top:%?30?%}.second_list .second_item[data-v-35ed3820]{width:50%}.second_list .icon_img[data-v-35ed3820]{width:%?60?%;height:%?60?%;margin-right:%?10?%}.second_list .text_notice[data-v-35ed3820]{font-weight:%?24?%}.second_list .list_item[data-v-35ed3820]{padding:%?10?% 0;border-bottom:%?1?% solid #ccc}.second_list .reserve_text[data-v-35ed3820]{color:#3d3d3d;font-weight:700}.second_list .text_notice[data-v-35ed3820]{font-size:%?20?%;margin-bottom:%?8?%}',""])},"7a82":function(e,t,n){"use strict";(function(e){var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var o=r(n("5d73"));n("7514");var a=r(n("795b")),i=r(n("9546")),s={querycount:function(){var t=uni.getStorageSync("uid");return new a.default(function(n,r){var o=i.default.Query("Goods");o.equalTo("userId","==",t),o.equalTo("status","!=",-1),o.equalTo("order","!=",1),o.count().then(function(t){n(t),e.log("共有".concat(t,"条记录"))})})},getAllCustom:function(){var e={},t=0,n=uni.getStorageSync("uid");return new a.default(function(r,a){var s=i.default.Query("customs");s.order("num"),s.equalTo("parent","==",n),s.equalTo("disabled","!=",!0),s.limit(500),s.find().then(function(a){var s=a.length;e.number=a.length;var u=!0,l=!1,d=void 0;try{for(var c,v=(0,o.default)(a);!(u=(c=v.next()).done);u=!0){var f=c.value;t+=f.debt?f.debt:0}}catch(m){l=!0,d=m}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}1e4>t&&t>=1e3?t=(t/1e3).toFixed(2)+"千":1e5>t&&t>=1e4?t=(t/1e4).toFixed(2)+"万":1e6>t&&t>=1e5&&(t=(t/1e4).toFixed(2)+"十万"),e.debt=t;var _=i.default.Query("order_opreations");_.equalTo("master","==",n),_.equalTo("type","==",-1),_.equalTo("custom","!=",null),_.count().then(function(t){e.historyNum=t;var o=i.default.Query("order_opreations");o.equalTo("master","==",n),o.equalTo("type","==",-1),o.equalTo("custom","!=",null),o.statTo("groupby","custom"),o.find().then(function(t){e.usedNum=t.length,e.noUsedNum=s-t.length,r(e)})})})})},getAllProducer:function(){var e={},t=0,n=uni.getStorageSync("uid");return new a.default(function(r,a){var s=i.default.Query("producers");s.equalTo("parent","==",n),s.equalTo("disabled","!=",!0),s.limit(500),s.find().then(function(a){var s=a.length;e.number=a.length;var u=!0,l=!1,d=void 0;try{for(var c,v=(0,o.default)(a);!(u=(c=v.next()).done);u=!0){var f=c.value;t+=f.debt?f.debt:0}}catch(m){l=!0,d=m}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}1e4>Number(t)&&Number(t)>1e3?t=(Number(t)/1e3).toFixed(2)+"千":1e5>Number(t)&&Number(t)>=1e4?t=(Number(t)/1e4).toFixed(2)+"万":1e6>Number(t)&&Number(t)>=1e5&&(t=(Number(t)/1e4).toFixed(2)+"十万"),e.debt=t;var _=i.default.Query("order_opreations");_.equalTo("master","==",n),_.equalTo("type","==",1),_.equalTo("producer","!=",null),_.count().then(function(t){e.historyNum=t;var o=i.default.Query("order_opreations");o.equalTo("master","==",n),o.equalTo("type","==",1),o.equalTo("producer","!=",null),o.statTo("groupby","producer"),o.find().then(function(t){e.usedNum=t.length,e.noUsedNum=s-t.length,r(e)})})})})},getAllAccounts:function(){var t={},n=0,r=uni.getStorageSync("uid");return new a.default(function(a,s){var u=i.default.Query("accounts");u.equalTo("parent","==",r),u.limit(500),u.find().then(function(s){s.length;t.number=s.length;var u=!0,l=!1,d=void 0;try{for(var c,v=(0,o.default)(s);!(u=(c=v.next()).done);u=!0){var f=c.value;n+=f.money?f.money:0}}catch(m){l=!0,d=m}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}1e4>Number(n)>1e3?n=(Number(n)/1e3).toFixed(2)+"千":Number(n)>1e4&&(n=(Number(n)/1e4).toFixed(2)+"万"),t.money=n;var _=i.default.Query("order_opreations");_.include("accounts"),_.equalTo("master","==",r),_.statTo("sum","real_money"),_.statTo("groupby","accounts"),_.find().then(function(n){e.log("账户",n),a(t)})})})},gettoday_detail:function(t,n){var r=uni.getStorageSync("uid"),o=0,s=0,u=0,l=0,d=0,c=0,v=0,f=0,_={};return new a.default(function(a,m){var g=i.default.Query("order_opreations");g.equalTo("master","==",r),g.equalTo("createdAt",">=",t),g.equalTo("createdAt","<=",n),g.select("real_money","type"),g.limit(1e3),g.find().then(function(m){for(var g=0;g<m.length;g++)1==m[g].type?d+=m[g].real_money:-1==m[g].type&&(c+=m[g].real_money);var y=i.default.Query("Bills");y.equalTo("userId","==",r),y.equalTo("createdAt",">=",t),y.equalTo("createdAt","<=",n),y.select("goodsId","num","total_money","type","extra_type"),y.limit(1e3),y.include("goodsId"),y.find().then(function(m){for(var g=0;g<m.length;g++)1==m[g].type?(o+=m[g].num,m[g].goodsId?u+=m[g].num*m[g].goodsId.retailPrice:u+=0,1==m[g].extra_type&&(f+=m[g].num)):-1==m[g].type&&(s+=m[g].num,m[g].goodsId?l+=m[g].num*m[g].goodsId.costPrice:l+=0,1==m[g].extra_type&&(v+=m[g].num));_.get_reserve=o.toFixed(uni.getStorageSync("setting").show_float),_.out_reserve=s.toFixed(uni.getStorageSync("setting").show_float),_.get_reserve_real_money=u.toFixed(uni.getStorageSync("setting").show_float),_.out_reserve_real_money=l.toFixed(uni.getStorageSync("setting").show_float),_.get_reserve_num=d.toFixed(uni.getStorageSync("setting").show_float),_.out_reserve_num=c.toFixed(uni.getStorageSync("setting").show_float),_.get_reserve_get_num=(u-d).toFixed(uni.getStorageSync("setting").show_float),_.out_reserve_get_num=(c-l).toFixed(uni.getStorageSync("setting").show_float),_.purchaseNum=f.toFixed(uni.getStorageSync("setting").show_float),_.sellNum=v.toFixed(uni.getStorageSync("setting").show_float),e.log(o);var y=0,h=0,w=i.default.Query("order_opreations");w.equalTo("master","==",r),w.equalTo("createdAt",">=",t),w.equalTo("createdAt","<=",n),w.equalTo("type","==",-1),w.find().then(function(e){for(var t=0;t<e.length;t++)y+=e[t].all_money,h+=e[t].real_money;_.should_get_money=y,_.real_get_money=h}),a(_)})})})},loadallGoods:function(){var t=this,n=uni.getStorageSync("uid"),r=uni.getStorageSync("user");uni.getStorageSync("setting");return new a.default(function(a,s){var u=0,l=0,d=0,c=0,v=0,f={};t.querycount().then(function(t){f.total_products=t;for(var s=0;s<Math.ceil(t/500);s++){e.log(s);var _=i.default.Query("Goods");_.equalTo("userId","==",n),_.equalTo("status","!=",-1),_.equalTo("order","!=",1),_.select("reserve","costPrice","stocktype"),_.limit(500),_.skip(500*s),_.find().then(function(e){var n=!0,i=!1,s=void 0;try{for(var _,m=(0,o.default)(e);!(n=(_=m.next()).done);n=!0){var g=_.value;0==g.stocktype?d+=1:2==g.stocktype&&(c+=1),u+=g.reserve,l+=g.reserve*g.costPrice}}catch(y){i=!0,s=y}finally{try{n||null==m.return||m.return()}finally{if(i)throw s}}v+=1,v==Math.ceil(t/500)&&(1!=r.identity&&r.rights&&"0"!=r.rights.othercurrent[0]&&(l=0),Number(u)>1e3&&Number(u)<1e4?u=Number(u)/1e3+"千":Number(u)>=1e4&&Number(l)<1e5?u=Number(u)/1e4+"万":Number(u)>=1e5&&(u=Number(u)/1e4+"十万"),Number(l)>1e3&&Number(l)<1e4?l=(Number(l)/1e3).toFixed(2)+"千":Number(l)>=1e4&&Number(l)<1e5?l=(Number(l)/1e4).toFixed(4)+"万":Number(l)>=1e5&&(l=(Number(l)/1e5).toFixed(4)+"十万"),f.total_money=l,f.total_reserve=u,f.warn_num=d,f.over_num=c,a(f))})}})})}};t.default=s}).call(this,n("5a52")["default"])},"7e12":function(e,t,n){"use strict";(function(e){var r=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("28a5");r(n("9546"));var o=r(n("7fd5")),a=r(n("7a82")),i=r(n("120a")),s=void 0,u={components:{loading:i.default},data:function(){return{loading:!0,start_date:o.default.getDay(0,!0),end_date:o.default.getDay(1,!0),start_date_desc:o.default.getDay(0,!0).split(" ")[0],end_date_desc:o.default.getDay(1,!0).split(" ")[0],reserve_money:0,all_reserve:0,warn_num:0,today_in:0,today_out:0,get_reserve:0,out_reserve:0,get_reserve_real_money:0,out_reserve_real_money:0,get_reserve_num:0,out_reserve_num:0,get_reserve_get_num:0,out_reserve_get_num:0,should_get_money:0,real_get_money:0,sellNum:0,purchaseNum:0}},onLoad:function(){s=this,uni.getStorageSync("uid"),s.get_allCost(),s.gettoday_detail(),e.log(o.default.getDay(1,!0))},methods:{bindDate_startChange:function(e){s.start_date=e.detail.value+" 00:00:00",s.gettoday_detail()},bindDate_endChange:function(e){s.end_date=e.detail.value+" 00:00:00",s.gettoday_detail()},get_allCost:function(){a.default.loadallGoods().then(function(t){e.log(t),s.reserve_money=t.total_money,s.all_reserve=t.total_reserve,s.warn_num=t.warn_num,s.loading=!1})},gettoday_detail:function(){a.default.gettoday_detail(s.start_date,s.end_date).then(function(t){e.log("今日概况",t),s.get_reserve=t.get_reserve,s.out_reserve=t.out_reserve,s.get_reserve_real_money=t.get_reserve_real_money,s.out_reserve_real_money=t.out_reserve_real_money,s.get_reserve_num=t.get_reserve_num,s.out_reserve_num=t.out_reserve_num,s.get_reserve_get_num=t.get_reserve_get_num,s.out_reserve_get_num=t.out_reserve_get_num,s.should_get_money=t.should_get_money,s.real_get_money=t.real_get_money,s.purchaseNum=t.purchaseNum,s.sellNum=t.sellNum})}},computed:{i18n:function(){return this.$t("operational_status")}}};t.default=u}).call(this,n("5a52")["default"])},"7fd5":function(e,t,n){"use strict";(function(t){var r=n("288e");n("6b54"),n("7514");var o=r(n("5d73"));n("c5f6");var a=r(n("795b")),i=r(n("9546"));e.exports={enterAddGoodNum:function(e){var n=this;return new a.default(function(r,a){for(var s=function(a){var s=0,u=i.default.Query("Goods");u.get(e[a].objectId).then(function(l){var d=l;if(e[a].selectd_model){var c=!0,v=!1,f=void 0;try{for(var _,m=(0,o.default)(e[a].selected_model);!(c=(_=m.next()).done);c=!0){var g=_.value,y=!0,h=!1,w=void 0;try{for(var b,p=(0,o.default)(d.models);!(y=(b=p.next()).done);y=!0){var x=b.value;x.id==g.id&&(x.reserve=Number(x.reserve)+Number(g.num)),delete x.num}}catch(N){h=!0,w=N}finally{try{y||null==p.return||p.return()}finally{if(h)throw w}}}}catch(N){v=!0,f=N}finally{try{c||null==m.return||m.return()}finally{if(v)throw f}}s=Number(d.reserve)+Number(e[a].num),u.set("models",d.models)}else s=Number(d.reserve)+Number(e[a].num);u.set("reserve",s),u.set("id",e[a].objectId),u.save().then(function(o){if(e[a].header){var s=i.default.Query("Goods");s.equalTo("header","==",e[a].header.objectId),s.equalTo("order","==",1),s.statTo("sum","reserve"),s.find().then(function(o){t.log("dasds",o);var s=o[0]._sumReserve,u=i.default.Query("Goods");u.set("reserve",s),u.set("id",e[a].header.objectId),u.save().then(function(t){n.modifyStockType(e[a].header.objectId),a==e.length-1&&r(!0)})})}else n.modifyStockType(e[a].objectId),a==e.length-1&&r(!0)}).catch(function(e){t.log(e)})})},u=0;u<e.length;u++)s(u)})},outRedGoodNum:function(e){var n=this;return new a.default(function(r,a){for(var s=function(a){var s=0,u=i.default.Query("Goods");u.get(e[a].objectId).then(function(l){var d=l;if(e[a].selectd_model){var c=!0,v=!1,f=void 0;try{for(var _,m=(0,o.default)(e[a].selected_model);!(c=(_=m.next()).done);c=!0){var g=_.value,y=!0,h=!1,w=void 0;try{for(var b,p=(0,o.default)(d.models);!(y=(b=p.next()).done);y=!0){var x=b.value;s+=Number(x.reserve),x.id==g.id&&(x.reserve=Number(x.reserve)-Number(g.num)),delete x.num}}catch(N){h=!0,w=N}finally{try{y||null==p.return||p.return()}finally{if(h)throw w}}}}catch(N){v=!0,f=N}finally{try{c||null==m.return||m.return()}finally{if(v)throw f}}s=Number(d.reserve)-Number(e[a].num),u.set("models",d.models)}else s=Number(d.reserve)-Number(e[a].num);u.set("reserve",s),u.set("id",e[a].objectId),u.save().then(function(t){if(e[a].header){var o=i.default.Query("Goods");o.equalTo("header","==",e[a].header.objectId),o.equalTo("order","==",1),o.statTo("sum","reserve"),o.find().then(function(t){var o=t[0]._sumReserve,s=i.default.Query("Goods");s.set("reserve",o),s.set("id",e[a].header.objectId),s.save().then(function(t){n.modifyStockType(e[a].header.objectId),a==e.length-1&&r(!0)})})}else n.modifyStockType(e[a].objectId),a==e.length-1&&r(!0)}).catch(function(e){t.log(e)})})},u=0;u<e.length;u++)s(u)})},enterAddGoodNumNew:function(e){var n=this;return new a.default(function(r,a){for(var s=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",u=uni.getStorageSync("uid"),l=function(a){var l=0,d=i.default.Query("Goods");d.get(e[a].objectId).then(function(d){if(e[a].selectd_model){var c=!0,v=!1,f=void 0;try{for(var _,m=(0,o.default)(e[a].selected_model);!(c=(_=m.next()).done);c=!0){var g=_.value,y=!0,h=!1,w=void 0;try{for(var b,p=(0,o.default)(e[a].models);!(y=(b=p.next()).done);y=!0){var x=b.value;x.id==g.id&&(x.reserve=Number(x.reserve)+Number(g.num)),delete x.num}}catch(S){h=!0,w=S}finally{try{y||null==p.return||p.return()}finally{if(h)throw w}}}}catch(S){v=!0,f=S}finally{try{c||null==m.return||m.return()}finally{if(v)throw f}}l=Number(e[a].reserve)+Number(e[a].num),d.set("models",e[a].models)}else l=Number(e[a].reserve)+Number(e[a].num);d.set("reserve",l),d.save();var N=i.default.Query("Goods");N.equalTo("userId","==",u),N.equalTo("header","==",e[a].objectId),N.equalTo("stocks","==",s.objectId),N.find().then(function(o){if(0==o.length)n.upload_good_withNoCan(e[a],s,Number(e[a].num)).then(function(n){t.log(n),a==e.length-1&&r(!0)});else{var u=i.default.Query("Goods");u.set("id",o[0].objectId),u.set("reserve",o[0].reserve+Number(e[a].num)),u.save().then(function(n){t.log(n),a==e.length-1&&r(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},d=0;d<e.length;d++)l(d)})},outRedGoodNumNew:function(e){var n=this;return new a.default(function(r,a){for(var s=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",u=uni.getStorageSync("uid"),l=function(a){var l=0,d=i.default.Query("Goods");d.get(e[a].objectId).then(function(d){if(e[a].selectd_model){var c=!0,v=!1,f=void 0;try{for(var _,m=(0,o.default)(e[a].selected_model);!(c=(_=m.next()).done);c=!0){var g=_.value,y=!0,h=!1,w=void 0;try{for(var b,p=(0,o.default)(e[a].models);!(y=(b=p.next()).done);y=!0){var x=b.value;x.id==g.id&&(x.reserve=Number(x.reserve)-Number(g.num)),delete x.num}}catch(S){h=!0,w=S}finally{try{y||null==p.return||p.return()}finally{if(h)throw w}}}}catch(S){v=!0,f=S}finally{try{c||null==m.return||m.return()}finally{if(v)throw f}}l=Number(e[a].reserve)-Number(e[a].num),d.set("models",e[a].models)}else l=Number(e[a].reserve)-Number(e[a].num);d.set("reserve",l),d.save();var N=i.default.Query("Goods");N.equalTo("userId","==",u),N.equalTo("header","==",e[a].objectId),N.equalTo("stocks","==",s.objectId),N.find().then(function(o){if(0==o.length)n.upload_good_withNoCan(e[a],s,Number(e[a].num),"out").then(function(n){t.log(n),a==e.length-1&&r(!0)});else{var u=i.default.Query("Goods");u.set("id",o[0].objectId),u.set("reserve",o[0].reserve-Number(e[a].num)),u.save().then(function(n){t.log(n),a==e.length-1&&r(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},d=0;d<e.length;d++)l(d)})},upload_good_withNoCan:function(e,n,r,s){return new a.default(function(a,u){t.log(e);var l=uni.getStorageSync("uid"),d=i.default.Pointer("_User"),c=d.set(l),v=i.default.Pointer("stocks"),f=v.set(n.objectId),_=i.default.Pointer("Goods"),m="";m=e.header?_.set(e.header.objectId):_.set(e.objectId);var g=i.default.Query("Goods");if(g.set("goodsName",e.goodsName),g.set("goodsIcon",e.goodsIcon),"out"==s){if(g.set("reserve",0-Number(r)),e.goodsId&&e.goodsId.models){var y=!0,h=!1,w=void 0;try{for(var b,p=(0,o.default)(e.goodsId.models);!(y=(b=p.next()).done);y=!0){var x=b.value;x.reserve=0-Number(x.num)}}catch(P){h=!0,w=P}finally{try{y||null==p.return||p.return()}finally{if(h)throw w}}g.set("models",e.goodsId.models)}}else if("allocation"==s){if(g.set("reserve",Number(r)),e.selected_model&&e.selected_model.length>0){var N=!0,S=!1,C=void 0;try{for(var T,I=(0,o.default)(e.selected_model);!(N=(T=I.next()).done);N=!0){var q=T.value;q.reserve=Number(q.num),delete q.num}}catch(P){S=!0,C=P}finally{try{N||null==I.return||I.return()}finally{if(S)throw C}}g.set("models",e.selected_model)}}else if(g.set("reserve",Number(r)),e.goodsId&&e.goodsId.models){var k=!0,j=!1,Q=void 0;try{for(var G,F=(0,o.default)(e.goodsId.models);!(k=(G=F.next()).done);k=!0){var D=G.value;D.reserve=Number(D.num)}}catch(P){j=!0,Q=P}finally{try{k||null==F.return||F.return()}finally{if(j)throw Q}}g.set("models",e.goodsId.models)}g.set("stocks",f),g.set("userId",c),g.set("header",m),g.set("costPrice",""+e.costPrice),g.set("retailPrice",""+e.retailPrice),g.set("order",1),g.save().then(function(e){t.log(e),a([!0,e])}).catch(function(e){t.log(e)})})},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,n,r){var o=i.default.Pointer("_User"),a=o.set(uni.getStorageSync("uid"));if(-2==n){var s=i.default.Pointer("Goods"),u=s.set(r),l=i.default.Query("logs");l.equalTo("goodId","==",r),l.find().then(function(r){if(0==r.length){var o=i.default.Query("logs");o.set("parent",a),o.set("goodId",u),o.set("log",e),o.set("type",n),o.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}})}else{var d=i.default.Query("logs");d.set("parent",a),d.set("log",e),d.set("detail_id",r),d.set("type",n),d.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},modifyStockType:function(e){var n=this,r=i.default.Query("Goods");r.get(e).then(function(e){var t=e;""==t.warning_num&&""==t.max_num?e.set("stocktype",1):void 0==t.warning_num&&void 0==t.max_num?e.set("stocktype",1):null==t.warning_num&&null==t.max_num?e.set("stocktype",1):(""!=t.warning_num&&(t.warning_num>=t.reserve?(e.set("stocktype",0),n.log(t.goodsName+"已经超过设置的最小库存值"+t.warning_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1)),""!=t.max_num&&(t.max_num<=t.reserve?(e.set("stocktype",2),n.log(t.goodsName+"已经超过设置的最大库存值"+t.max_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1))),e.save()}).catch(function(e){t.log(e)})},record_shopOut:function(e,n){t.log(e,n);var r=i.default.Query("shops");r.set("id",e),r.set("have_out",n),r.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var n=i.default.Query("_User");n.set("id",uni.getStorageSync("user").objectId),n.set("have_out",Number(e)+uni.getStorageSync("user").have_out),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var n=i.default.Query("Goods");n.equalTo("userId","==",e),n.find().then(function(e){t.log(e);var n=!0,r=!1,a=void 0;try{for(var i,s=(0,o.default)(e);!(n=(i=s.next()).done);n=!0){var u=i.value;t.log(u),Number(u.costPrice)*u.reserve,u.reserve}}catch(l){r=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}})},getDay:function(e,t){var n=this,r=new Date,o=r.getTime()+864e5*e;r.setTime(o);var a=r.getFullYear(),i=r.getMonth(),s=r.getDate();return i=n.handleMonth(i+1),s=n.handleMonth(s),t?a+"-"+i+"-"+s+" 00:00:00":a+"-"+i+"-"+s},js_date_time:function(e,t){var n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1;o=o<10?"0"+o:o;var a=n.getDate();a=a<10?"0"+a:a;var i=n.getHours();i=i<10?"0"+i:i;var s=n.getMinutes(),u=n.getSeconds();return s=s<10?"0"+s:s,u=u<10?"0"+u:u,t?r+"-"+o+"-"+a+" "+i+":"+s:r+"-"+o+"-"+a},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,n("5a52")["default"])},afb9:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.loading?n("loading"):n("v-uni-view",[n("v-uni-view",{staticClass:"select"},[n("v-uni-view",{staticClass:"section",staticStyle:{"border-right":"1rpx solid#DDDDDD"}},[n("v-uni-picker",{attrs:{mode:"date",end:e.start_date_desc},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDate_startChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.start_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1),n("v-uni-view",{staticClass:"section"},[n("v-uni-picker",{attrs:{mode:"date",end:e.end_date_desc},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDate_endChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[n("v-uni-text",{staticStyle:{"margin-right":"6rpx"}},[e._v(e._s(e.end_date.split(" ")[0]))]),n("fa-icon",{attrs:{type:"angle-down",size:"20",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"list"},[n("v-uni-view",{staticClass:"display_flex list_frst"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/chengben.png"}}),n("v-uni-text",{staticClass:"text_notice"},[e._v(e._s(e.i18n.a)+" "+e._s(e.reserve_money))])],1),n("v-uni-view",{staticClass:"display_flex_bet list_second"},[n("v-uni-view",{staticClass:"item",staticStyle:{"border-right":"1rpx solid#ddd"}},[n("v-uni-view",[e._v("库存总数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.all_reserve))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-view",[e._v("预警产品数")]),n("v-uni-view",{staticClass:"show_num"},[e._v(e._s(e.warn_num))])],1)],1)],1),n("v-uni-view",{staticClass:"second_list"},[n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段入库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段出库数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_in.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段采购数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.purchaseNum))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/reserve_out.png"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("此时间段销售数")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.sellNum))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库实际总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_num))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("入库的卖出总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_real_money))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("出库的成本总额")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_real_money))])],1)],1)],1),n("v-uni-view",{staticClass:"display_flex_bet list_item"},[n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("预计可获利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.get_reserve_get_num))])],1)],1),n("v-uni-view",{staticClass:"display_flex second_item"},[n("v-uni-view",[n("v-uni-view",{staticClass:"text_notice"},[e._v("毛利润")]),n("v-uni-view",{staticClass:"reserve_text"},[e._v(e._s(e.out_reserve_get_num))])],1)],1)],1)],1)],1)],1)},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},e63d:function(e,t,n){"use strict";var r=n("1362"),o=n.n(r);o.a},e89d:function(e,t,n){"use strict";n.r(t);var r=n("7e12"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t["default"]=o.a}}]);