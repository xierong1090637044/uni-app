(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-warehouse-warehouse"],{"0a94":function(t,e,n){"use strict";var a=n("b8ba"),i=n.n(a);i.a},"164f":function(t,e,n){"use strict";var a={"uni-nav-bar":n("96bd").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{height:"100vh"}},[n("v-uni-view",[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"添加",shadow:!1},on:{"click-right":function(e){arguments[0]=e=t.$handleEvent(e),t.goto_add.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"input-view display_flex"},[n("fa-icon",{attrs:{type:"search",size:"16",color:"#999"}}),n("v-uni-input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.input_confirm.apply(void 0,arguments)}}})],1)],1),n("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 30rpx",background:"#FAFAFA",color:"#999"}},[n("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[t._v("仓库总数："+t._s(t.header.userNum))]),n("v-uni-view",{staticStyle:{"font-size":"24rpx","font-weight":"500"}},[t._v("停用仓库："+t._s(t.header.noUserNum))])],1),t.stocks&&t.stocks.length>0?n("v-uni-scroll-view",{staticClass:"indexes",staticStyle:{height:"calc(100vh - 142rpx)"},attrs:{"scroll-y":!0,"scroll-with-animation":"true","enable-back-to-top":"true"}},[n("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.select_this.apply(void 0,arguments)}}},t._l(t.stocks,(function(e,a){return n("v-uni-label",{key:a,staticClass:"display_flex content",attrs:{for:e.objectId}},[n("v-uni-view",{staticStyle:{width:"100%"}},[n("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"10rpx 0"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.goto_detail(e)}}},[n("v-uni-view",{staticClass:"display_flex",staticStyle:{width:"100%","margin-right":"30rpx"}},[e.Image&&e.Image.length>0?n("v-uni-image",{staticClass:"stock_avatar",attrs:{src:e.Image[0],mode:"aspectFit"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.priviewImg(e.Image[0])}}}):n("v-uni-image",{staticClass:"stock_avatar",attrs:{src:"/static/warehouse.png"}}),n("v-uni-view",{staticStyle:{width:"100%"}},[n("v-uni-view",{staticClass:"stock_name"},[t._v(t._s(e.stock_name))]),e.charge&&e.charge.nickName?n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人："+t._s(e.charge.nickName))]):e.Ncharge&&e.Ncharge.nickName?n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人："+t._s(e.Ncharge.nickName))]):n("v-uni-view",{staticClass:"stock_mobile"},[t._v("负责人：未填写")]),n("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{width:"100%"}},[n("v-uni-view",{staticClass:"stock_mobile"},[t._v("地址："+t._s(e.address||"未填写"))]),n("v-uni-view",{staticClass:"display_flex",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.makePhoneCall(e.phoneNumber)}}},[n("fa-icon",{attrs:{type:"phone",size:"14",color:"#999"}}),n("v-uni-text",{staticStyle:{"margin-left":"10rpx","font-size":"24rpx"}},[t._v("打电话")])],1)],1)],1)],1),t.is_choose?n("v-uni-view",[n("v-uni-radio",{staticStyle:{transform:"scale(0.9)"},attrs:{value:JSON.stringify(e),id:e.objectId}})],1):n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1),n("v-uni-view",{staticClass:"right_item normalBorder"})],1)],1)})),1)],1):n("nocontent",{attrs:{type:1}})],1)],1)},o=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}))},"26bb":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}};e.default=a},"44d0":function(t,e,n){"use strict";(function(t){var a=n("ee27");n("7db0"),n("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o,r,s=a(n("54f8")),c=a(n("9546")),u=a(n("8d57")),l=a(n("c952")),d=a(n("120a")),f=a(n("96bd")),v={components:{uniSegmentedControl:l.default,loading:d.default,uniNavBar:f.default},data:function(){return{is_choose:!1,loading:!0,stocks:[],items:["已启用","未启用"],current:0,disabled:!1,type:"",header:{userNum:0,noUserNum:0}}},onLoad:function(t){i=this,r=uni.getStorageSync("uid"),"choose"!=t.type&&"out_choose"!=t.type&&"choose_more"!=t.type&&"in_choose"!=t.type||(i.is_choose=!0,i.type=t.type)},onShow:function(){i.getstock_list()},onUnload:function(){o=""},methods:{makePhoneCall:function(t){t?uni.makePhoneCall({phoneNumber:t}):uni.showToast({icon:"none",title:"未填写联系电话"})},priviewImg:function(t){uni.previewImage({current:t,urls:[t]})},onClickItem:function(t){this.current!==t&&(this.current=t,0==t?(i.disabled=!1,i.getstock_list()):1==t&&(i.disabled=!0,i.getstock_list()))},goto_detail:function(t){i.is_choose||(uni.setStorageSync("stock",t),uni.navigateTo({url:"detail/detail"}))},select_this:function(e){t.log(e);var n,a=JSON.parse(e.detail.value);n="choose_more"==i.type&&uni.getStorageSync("warehouse")||[];var o={};o.stock=a,o.reserve=0,o.warning_num=0,-1==JSON.stringify(n).indexOf(JSON.stringify(o))?(n.push(o),"out_choose"==i.type?uni.setStorageSync("out_warehouse",n):"in_choose"==i.type?uni.setStorageSync("in_warehouse",n):uni.setStorageSync("warehouse",n),uni.navigateBack({delta:1})):uni.showToast({title:"已选择此仓库",icon:"none"})},goto_add:function(){var e=uni.getStorageSync("user"),n=uni.getStorageSync("identity");e.is_vip||i.stocks.length<2?uni.navigateTo({url:"add/add"}):uni.showModal({title:"提示",content:"非会员最多上传2个仓库",confirmText:"充值会员",success:function(e){e.confirm?1==n?uni.navigateTo({url:"/pages/mine/vip/vip"}):uni.showToast({title:"员工不能充值",icon:"none"}):e.cancel&&t.log("用户点击取消")}})},input_confirm:function(t){o=t.detail.value,i.getstock_list()},getstock_list:function(){uni.showLoading({title:"加载中..."});var e=c.default.Query("stocks");e.order("-num"),e.include("charge","shop","Ncharge"),e.equalTo("parent","==",r),o&&e.equalTo("stock_name","==",{$regex:o+".*"}),e.limit(500),e.find().then((function(e){uni.hideLoading();var n=e;i.header.userNum=e.length;var a,o=[],r=(0,s.default)(n);try{for(r.s();!(a=r.n()).done;){var c=a.value;c.disabled&&(i.header.noUserNum+=1);var l={};l.name=c.stock_name,l.objectId=c.objectId,o.push(l)}}catch(d){r.e(d)}finally{r.f()}uni.setStorageSync("_warehouse",o),uni.getStorage({key:"identity",success:function(e){"2"==e.data?u.default.get_satffAuth().then((function(e){t.log(e);var a,o=[],r=(0,s.default)(e.stocks);try{for(r.s();!(a=r.n()).done;){var c,u=a.value,l=(0,s.default)(n);try{for(l.s();!(c=l.n()).done;){var f=c.value;f.objectId==u&&o.push(f)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){r.e(d)}finally{r.f()}i.stocks=o})):"1"==e.data&&(i.stocks=n)}})}))}}};e.default=v}).call(this,n("5a52")["default"])},"54f8":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("dde1");function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(a["a"])(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==i["return"]||i["return"]()}finally{if(s)throw o}}}}},5958:function(t,e,n){"use strict";n.r(e);var a=n("164f"),i=n("9462");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("0a94");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"4a7fc254",null,!1,a["a"],r);e["default"]=c.exports},6916:function(t,e,n){"use strict";var a=n("e3ec"),i=n.n(a);i.a},"7c0b":function(t,e,n){"use strict";n.r(e);var a=n("26bb"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"8d57":function(t,e,n){"use strict";(function(t){var a=n("ee27");n("7db0"),n("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("9546")),o={get_satffAuth:function(){return new Promise((function(t,e){var n=uni.getStorageSync("user").objectId,a=i.default.Query("_User");a.include("masterId"),a.get(n).then((function(e){e.masterId.is_vip?(e.is_vip=!0,e.vip_time=e.masterId.vip_time):(e.is_vip=!1,e.vip_time=0),uni.setStorageSync("user",e),t(e)})).catch((function(e){t()}))}))},get_stafflist:function(t,e){return new Promise((function(n,a){var o=JSON.parse(localStorage.getItem("bmob")).objectId,r=i.default.Query("_User");r.order("num"),r.equalTo("masterId","==",o),r.equalTo("disabled","==",t),r.include("shop"),e&&r.equalTo("name","==",{$regex:e+".*"}),r.find().then((function(t){localStorage.setItem("_User",JSON.stringify(t)),n(t)}))}))},add_staff:function(e){var n=JSON.parse(localStorage.getItem("bmob")).objectId;return new Promise((function(a,o){var r=i.default.Pointer("_User"),s=r.set(n),c=i.default.Pointer("shops"),u=c.set(e.shop);if(e.objectId){var l=i.default.Pointer("_User"),d=l.set(n),f=i.default.Query("_User");f.set("username",e.name),f.set("nickName",e.name),f.set("password",e.password),f.set("mobilePhoneNumber",e.mobilePhoneNumber),f.set("rights",e.rights),f.set("address",e.address),f.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),f.set("masterId",d),f.set("disabled",!e.disabled),f.set("shop",u),f.set("id",e.objectId),f.save().then((function(e){t.log(e),a(e)})).catch((function(e){t.log(e)}))}else{var v=i.default.Query("_User");v.equalTo("masterId","==",n),v.equalTo("mobilePhoneNumber","==",e.mobilePhoneNumber),v.find().then((function(n){if(t.log(n),0==n.length){var o=i.default.Query("_User");o.set("username",e.name),o.set("shop",u),o.set("nickName",e.name),o.set("password",e.password),o.set("mobilePhoneNumber",e.mobilePhoneNumber),o.set("rights",e.rights),o.set("address",e.address),o.set("avatarUrl","http://bmob-cdn-23134.b0.upaiyun.com/2019/04/29/4705b31340bfff8080c068f52fd17e2c.png"),o.set("masterId",s),o.set("have_out",0),o.set("disabled",!e.disabled),o.save().then((function(e){t.log(e),a(e)})).catch((function(e){t.log(e)}))}else a(!1,"已存在此账号")}))}}))},delete_staff:function(e){return new Promise((function(n,a){var o=i.default.Query("_User");o.destroy(e).then((function(t){n(t)})).catch((function(e){t.log(e)}))}))}};e.default=o}).call(this,n("5a52")["default"])},9462:function(t,e,n){"use strict";n.r(e);var a=n("44d0"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},b8ba:function(t,e,n){var a=n("d79e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("33462b9a",a,!0,{sourceMap:!1,shadowMode:!1})},c952:function(t,e,n){"use strict";n.r(e);var a=n("ca58"),i=n("7c0b");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("6916");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"917140dc",null,!1,a["a"],r);e["default"]=c.exports},ca58:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===t.styleType},style:{borderColor:"text"===t.styleType?"":t.activeColor}},t._l(t.values,(function(e,a){return n("v-uni-view",{key:a,staticClass:"segmented-control-item",class:[{text:"text"===t.styleType},{active:a===t.currentIndex}],style:{color:a===t.currentIndex?"text"===t.styleType?t.activeColor:"#fff":"text"===t.styleType?"#000":t.activeColor,backgroundColor:a===t.currentIndex&&"button"===t.styleType?t.activeColor:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._onClick(a)}}},[t._v(t._s(e))])})),1)},o=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}))},d79e:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-4a7fc254]{height:100vh;background:#fafafa}.uni-common-mt[data-v-4a7fc254]{background:#fff;padding:%?20?% 0}.stock_name[data-v-4a7fc254]{font-weight:700;font-size:%?30?%;color:#3d3d3d;margin-bottom:%?4?%;line-height:%?36?%}.stock_mobile[data-v-4a7fc254]{color:#999;line-height:%?36?%;font-size:%?24?%}.right_item[data-v-4a7fc254]{width:100%;padding-bottom:0 %?10?%}.stock_avatar[data-v-4a7fc254]{width:%?82?%;height:%?70?%;margin-right:%?20?%}.content[data-v-4a7fc254]{padding:%?0?% %?30?%;background:#fff}body.?%PAGE?%[data-v-4a7fc254]{background:#fafafa}",""]),t.exports=e},e3ec:function(t,e,n){var a=n("fa11");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("573bb508",a,!0,{sourceMap:!1,shadowMode:!1})},fa11:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".segmented-control[data-v-917140dc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:75%;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden;border:1px solid;border-radius:%?10?%}.segmented-control.text[data-v-917140dc]{border:0;border-radius:0}.segmented-control-item[data-v-917140dc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;line-height:%?60?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:1px solid}.segmented-control-item.active[data-v-917140dc]{color:#fff}.segmented-control-item.text[data-v-917140dc]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-917140dc]{border-bottom-style:solid}.segmented-control-item[data-v-917140dc]:first-child{border-left-width:0}",""]),t.exports=e}}]);