(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-good_count-good_count"],{"343c":function(e,t,o){"use strict";var n=o("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("c5f6");var a=n(o("5d73"));o("7514");var i,r=n(o("fe34")),c=n(o("6eba")),s=n(o("00eb")),u=n(o("e081")),d=n(o("c8e0")),l={components:{unicard:r.default,faIcon:s.default,uninumberbox:c.default,uniNavBar:u.default,uniIcon:d.default},data:function(){return{products:null}},onLoad:function(e){var t=this;if(i=uni.getStorageSync("uid"),e.id){var o=Bmob.Query("Goods");"false"==e.type?o.equalTo("objectId","==",e.id):o.equalTo("productCode","==",e.id),o.equalTo("userId","==",i),o.find().then(function(e){console.log(e),e[0].num=1,e[0].total_money=1*e[0].retailPrice,e[0].modify_retailPrice=e[0].retailPrice,t.products=e})}else{this.products=uni.getStorageSync("products");var n=0,r=!0,c=!1,s=void 0;try{for(var u,d=(0,a.default)(uni.getStorageSync("products"));!(r=(u=d.next()).done);r=!0){var l=u.value;console.log(l),l.selectd_model&&this.make_goods(l,l.selectd_model,n),n+=1}}catch(f){c=!0,s=f}finally{try{r||null==d.return||d.return()}finally{if(c)throw s}}}},onUnload:function(){uni.removeStorageSync("products")},methods:{make_goods:function(e,t,o){console.log(e,t,o);var n=[];this.products.splice(o,1);var i=!0,r=!1,c=void 0;try{for(var s,u=(0,a.default)(JSON.parse(t));!(i=(s=u.next()).done);i=!0){var d=s.value,l={};l.reserve=JSON.parse(d).reserve,l.costPrice=e.costPrice,l.createdAt=e.createdAt,l.goodsIcon=e.goodsIcon,l.goodsName=e.goodsName+JSON.parse(d).custom1.value+JSON.parse(d).custom2.value+JSON.parse(d).custom3.value+JSON.parse(d).custom4.value,l.is_selected=e.is_selected,l.key=e.key,l.models=e.models,l.modify_retailPrice=e.modify_retailPrice,l.num=e.num,l.objectId=e.objectId,l.packageContent=e.packageContent,l.packingUnit=e.packingUnit,l.position=e.position,l.producer=e.producer,l.productCode=e.productCode,l.product_info=e.product_info,l.product_state=e.product_state,l.regNumber=e.regNumber,l.retailPrice=e.retailPrice,l.selectd_model=e.selectd_model,l.stocks=e.stocks,l.stocktype=e.stocktype,l.total_money=e.total_money,l.updatedAt=e.updatedAt,l.userId=e.userId,l.warning_num=e.warning_num,n.push(l)}}catch(f){r=!0,c=f}finally{try{i||null==u.return||u.return()}finally{if(r)throw c}}this.products=this.products.concat(n)},confrim_this:function(){uni.navigateTo({url:"/pages/common/good_count/count_detail/count_detail"})},handleNumChange:function(e,t){this.products[t].num=e||0,this.products[t].total_money=e*Number(this.products[t].modify_retailPrice),uni.setStorageSync("products",this.products)},handleDel:function(e){console.log(e),1==this.products.length?uni.showToast({title:"最少选择一个产品",icon:"none"}):(this.products.splice(e,1),uni.setStorageSync("products",this.products))},getrealprice:function(e,t){this.products[t].modify_retailPrice=e.target.value,this.products[t].total_money=this.products[t].num*Number(e.target.value),uni.setStorageSync("products",this.products)}}};t.default=l},5817:function(e,t,o){"use strict";var n=o("d579"),a=o.n(n);a.a},"7e20":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"确定"},on:{"click-right":function(t){t=e.$handleEvent(t),e.confrim_this(t)}}}),o("v-uni-view",{staticClass:"page"},e._l(e.products,function(t,n){return o("v-uni-view",{key:n,staticClass:"margin-b-10"},[o("unicard",{attrs:{title:"品名："+t.goodsName,extra:"当前库存："+t.reserve}},[o("v-uni-view",[o("v-uni-view",{staticClass:"margin-t-5"},[e._v("盘点后库存："),o("uninumberbox",{attrs:{min:0},on:{change:function(t){t=e.$handleEvent(t),e.handleNumChange(t,n)}}})],1),o("v-uni-view",{staticClass:"bottom_del"},[o("v-uni-view",{staticClass:"del",on:{click:function(t){t=e.$handleEvent(t),e.handleDel(n)}}},[o("fa-icon",{attrs:{type:"close",size:"15",color:"#fff"}}),e._v("删除")],1)],1)],1)],1)],1)}),1)],1)},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},8679:function(e,t,o){"use strict";o.r(t);var n=o("343c"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},ae91:function(e,t,o){"use strict";o.r(t);var n=o("7e20"),a=o("8679");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("5817");var r=o("2877"),c=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"70f4ae69",null);t["default"]=c.exports},d579:function(e,t,o){var n=o("e3f8");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("023a18a2",n,!0,{sourceMap:!1,shadowMode:!1})},e3f8:function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,".page[data-v-70f4ae69]{font-size:%?28?%;height:calc(100vh - %?88?%);overflow:scroll}.margin-b-10[data-v-70f4ae69]{margin-top:%?20?%}.margin-t-5[data-v-70f4ae69]{margin:%?10?% 0}.input_withlabel[data-v-70f4ae69]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?10?% 0}.bottom_del[data-v-70f4ae69]{text-align:right}.del[data-v-70f4ae69]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#aa2116;color:#fff;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:%?4?% %?12?%;border-radius:%?8?%}.input_label[data-v-70f4ae69]{border:%?1?% solid#ddd;border-radius:%?8?%;padding:0 %?6?%;width:%?140?%;color:#aa2116}",""])}}]);