(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-staff-history-history"],{"0a52":function(e,t,n){var a=n("b782");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("8e650e7e",a,!0,{sourceMap:!1,shadowMode:!1})},"32e8":function(e,t,n){"use strict";var a=n("3514"),o=n.n(a);o.a},3514:function(e,t,n){var a=n("db97");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("4a8c2d85",a,!0,{sourceMap:!1,shadowMode:!1})},5261:function(e,t,n){"use strict";n.r(t);var a=n("9ccd"),o=n("d18f");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("32e8");var i=n("f0c5"),l=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,"ca561c1a",null);t["default"]=l.exports},6916:function(e,t,n){"use strict";var a=n("0a52"),o=n.n(a);o.a},"6edb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var a={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(e){e!==this.currentIndex&&(this.currentIndex=e)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(e){this.currentIndex!==e&&(this.currentIndex=e,this.$emit("clickItem",e))}}};t.default=a},"7c0b":function(e,t,n){"use strict";n.r(t);var a=n("6edb"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},"7fd5":function(e,t,n){"use strict";(function(t){var a=n("288e");n("6b54"),n("7514");var o=a(n("5d73"));n("c5f6");var r=a(n("795b")),i=a(n("9546"));e.exports={enterAddGoodNum:function(e){var n=this;return new r.default(function(a,r){for(var l=function(r){var l=0,u=i.default.Query("Goods");u.get(e[r].objectId).then(function(s){var d=s;if(e[r].selectd_model){var c=!0,v=!1,f=void 0;try{for(var y,g=(0,o.default)(e[r].selected_model);!(c=(y=g.next()).done);c=!0){var m=y.value,p=!0,h=!1,_=void 0;try{for(var b,w=(0,o.default)(d.models);!(p=(b=w.next()).done);p=!0){var x=b.value;x.id==m.id&&(x.reserve=Number(x.reserve)+Number(m.num)),delete x.num}}catch(k){h=!0,_=k}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}}}catch(k){v=!0,f=k}finally{try{c||null==g.return||g.return()}finally{if(v)throw f}}l=Number(d.reserve)+Number(e[r].num),u.set("models",d.models)}else l=Number(d.reserve)+Number(e[r].num);u.set("reserve",l),u.set("id",e[r].objectId),u.save().then(function(o){if(e[r].header){var l=i.default.Query("Goods");l.equalTo("header","==",e[r].header.objectId),l.equalTo("order","==",1),l.statTo("sum","reserve"),l.find().then(function(o){t.log("dasds",o);var l=o[0]._sumReserve,u=i.default.Query("Goods");u.set("reserve",l),u.set("id",e[r].header.objectId),u.save().then(function(t){n.modifyStockType(e[r].header.objectId),r==e.length-1&&a(!0)})})}else n.modifyStockType(e[r].objectId),r==e.length-1&&a(!0)}).catch(function(e){t.log(e)})})},u=0;u<e.length;u++)l(u)})},outRedGoodNum:function(e){var n=this;return new r.default(function(a,r){for(var l=function(r){var l=0,u=i.default.Query("Goods");u.get(e[r].objectId).then(function(s){var d=s;if(e[r].selectd_model){var c=!0,v=!1,f=void 0;try{for(var y,g=(0,o.default)(e[r].selected_model);!(c=(y=g.next()).done);c=!0){var m=y.value,p=!0,h=!1,_=void 0;try{for(var b,w=(0,o.default)(d.models);!(p=(b=w.next()).done);p=!0){var x=b.value;l+=Number(x.reserve),x.id==m.id&&(x.reserve=Number(x.reserve)-Number(m.num)),delete x.num}}catch(k){h=!0,_=k}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}}}catch(k){v=!0,f=k}finally{try{c||null==g.return||g.return()}finally{if(v)throw f}}l=Number(d.reserve)-Number(e[r].num),u.set("models",d.models)}else l=Number(d.reserve)-Number(e[r].num);u.set("reserve",l),u.set("id",e[r].objectId),u.save().then(function(t){if(e[r].header){var o=i.default.Query("Goods");o.equalTo("header","==",e[r].header.objectId),o.equalTo("order","==",1),o.statTo("sum","reserve"),o.find().then(function(t){var o=t[0]._sumReserve,l=i.default.Query("Goods");l.set("reserve",o),l.set("id",e[r].header.objectId),l.save().then(function(t){n.modifyStockType(e[r].header.objectId),r==e.length-1&&a(!0)})})}else n.modifyStockType(e[r].objectId),r==e.length-1&&a(!0)}).catch(function(e){t.log(e)})})},u=0;u<e.length;u++)l(u)})},enterAddGoodNumNew:function(e){var n=this;return new r.default(function(a,r){for(var l=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",u=uni.getStorageSync("uid"),s=function(r){var s=0,d=i.default.Query("Goods");d.get(e[r].objectId).then(function(d){if(e[r].selectd_model){var c=!0,v=!1,f=void 0;try{for(var y,g=(0,o.default)(e[r].selected_model);!(c=(y=g.next()).done);c=!0){var m=y.value,p=!0,h=!1,_=void 0;try{for(var b,w=(0,o.default)(e[r].models);!(p=(b=w.next()).done);p=!0){var x=b.value;x.id==m.id&&(x.reserve=Number(x.reserve)+Number(m.num)),delete x.num}}catch(S){h=!0,_=S}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}}}catch(S){v=!0,f=S}finally{try{c||null==g.return||g.return()}finally{if(v)throw f}}s=Number(e[r].reserve)+Number(e[r].num),d.set("models",e[r].models)}else s=Number(e[r].reserve)+Number(e[r].num);d.set("reserve",s),d.save();var k=i.default.Query("Goods");k.equalTo("userId","==",u),k.equalTo("header","==",e[r].objectId),k.equalTo("stocks","==",l.objectId),k.find().then(function(o){if(0==o.length)n.upload_good_withNoCan(e[r],l,Number(e[r].num)).then(function(n){t.log(n),r==e.length-1&&a(!0)});else{var u=i.default.Query("Goods");u.set("id",o[0].objectId),u.set("reserve",o[0].reserve+Number(e[r].num)),u.save().then(function(n){t.log(n),r==e.length-1&&a(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},d=0;d<e.length;d++)s(d)})},outRedGoodNumNew:function(e){var n=this;return new r.default(function(a,r){for(var l=uni.getStorageSync("warehouse")?uni.getStorageSync("warehouse")[0].stock:"",u=uni.getStorageSync("uid"),s=function(r){var s=0,d=i.default.Query("Goods");d.get(e[r].objectId).then(function(d){if(e[r].selectd_model){var c=!0,v=!1,f=void 0;try{for(var y,g=(0,o.default)(e[r].selected_model);!(c=(y=g.next()).done);c=!0){var m=y.value,p=!0,h=!1,_=void 0;try{for(var b,w=(0,o.default)(e[r].models);!(p=(b=w.next()).done);p=!0){var x=b.value;x.id==m.id&&(x.reserve=Number(x.reserve)-Number(m.num)),delete x.num}}catch(S){h=!0,_=S}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}}}catch(S){v=!0,f=S}finally{try{c||null==g.return||g.return()}finally{if(v)throw f}}s=Number(e[r].reserve)-Number(e[r].num),d.set("models",e[r].models)}else s=Number(e[r].reserve)-Number(e[r].num);d.set("reserve",s),d.save();var k=i.default.Query("Goods");k.equalTo("userId","==",u),k.equalTo("header","==",e[r].objectId),k.equalTo("stocks","==",l.objectId),k.find().then(function(o){if(0==o.length)n.upload_good_withNoCan(e[r],l,Number(e[r].num),"out").then(function(n){t.log(n),r==e.length-1&&a(!0)});else{var u=i.default.Query("Goods");u.set("id",o[0].objectId),u.set("reserve",o[0].reserve-Number(e[r].num)),u.save().then(function(n){t.log(n),r==e.length-1&&a(!0)}).catch(function(e){t.log(e)})}})}).catch(function(e){t.log(e)})},d=0;d<e.length;d++)s(d)})},upload_good_withNoCan:function(e,n,a,l){return new r.default(function(r,u){t.log(e);var s=uni.getStorageSync("uid"),d=i.default.Pointer("_User"),c=d.set(s),v=i.default.Pointer("stocks"),f=v.set(n.objectId),y=i.default.Pointer("Goods"),g="";g=e.header?y.set(e.header.objectId):y.set(e.objectId);var m=i.default.Query("Goods");if(m.set("goodsName",e.goodsName),m.set("goodsIcon",e.goodsIcon),"out"==l){if(m.set("reserve",0-Number(a)),e.goodsId&&e.goodsId.models){var p=!0,h=!1,_=void 0;try{for(var b,w=(0,o.default)(e.goodsId.models);!(p=(b=w.next()).done);p=!0){var x=b.value;x.reserve=0-Number(x.num)}}catch(Q){h=!0,_=Q}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}m.set("models",e.goodsId.models)}}else if("allocation"==l){if(m.set("reserve",Number(a)),e.selected_model&&e.selected_model.length>0){var k=!0,S=!1,N=void 0;try{for(var I,j=(0,o.default)(e.selected_model);!(k=(I=j.next()).done);k=!0){var C=I.value;C.reserve=Number(C.num),delete C.num}}catch(Q){S=!0,N=Q}finally{try{k||null==j.return||j.return()}finally{if(S)throw N}}m.set("models",e.selected_model)}}else if(m.set("reserve",Number(a)),e.goodsId&&e.goodsId.models){var T=!0,z=!1,D=void 0;try{for(var P,E=(0,o.default)(e.goodsId.models);!(T=(P=E.next()).done);T=!0){var G=P.value;G.reserve=Number(G.num)}}catch(Q){z=!0,D=Q}finally{try{T||null==E.return||E.return()}finally{if(z)throw D}}m.set("models",e.goodsId.models)}m.set("stocks",f),m.set("userId",c),m.set("header",g),m.set("costPrice",""+e.costPrice),m.set("retailPrice",""+e.retailPrice),m.set("order",1),m.save().then(function(e){t.log(e),r([!0,e])}).catch(function(e){t.log(e)})})},handleData:function(){uni.removeStorageSync("warehouse"),uni.removeStorageSync("stock"),uni.removeStorageSync("custom"),uni.removeStorageSync("category"),uni.removeStorageSync("class_user"),uni.removeStorageSync("second_class")},log:function(e,n,a){var o=i.default.Pointer("_User"),r=o.set(uni.getStorageSync("uid"));if(-2==n){var l=i.default.Pointer("Goods"),u=l.set(a),s=i.default.Query("logs");s.equalTo("goodId","==",a),s.find().then(function(a){if(0==a.length){var o=i.default.Query("logs");o.set("parent",r),o.set("goodId",u),o.set("log",e),o.set("type",n),o.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}})}else{var d=i.default.Query("logs");d.set("parent",r),d.set("log",e),d.set("detail_id",a),d.set("type",n),d.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},modifyStockType:function(e){var n=this,a=i.default.Query("Goods");a.get(e).then(function(e){var t=e;""==t.warning_num&&""==t.max_num?e.set("stocktype",1):void 0==t.warning_num&&void 0==t.max_num?e.set("stocktype",1):null==t.warning_num&&null==t.max_num?e.set("stocktype",1):(""!=t.warning_num&&(t.warning_num>=t.reserve?(e.set("stocktype",0),n.log(t.goodsName+"已经超过设置的最小库存值"+t.warning_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1)),""!=t.max_num&&(t.max_num<=t.reserve?(e.set("stocktype",2),n.log(t.goodsName+"已经超过设置的最大库存值"+t.max_num,-2,t.objectId)):t.warning_num<t.reserve&&t.reserve<t.max_num&&e.set("stocktype",1))),e.save()}).catch(function(e){t.log(e)})},record_shopOut:function(e,n){t.log(e,n);var a=i.default.Query("shops");a.set("id",e),a.set("have_out",n),a.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})},record_staffOut:function(e){if(t.log(e,uni.getStorageSync("user").have_out),1==uni.getStorageSync("identity"));else{var n=i.default.Query("_User");n.set("id",uni.getStorageSync("user").objectId),n.set("have_out",Number(e)+uni.getStorageSync("user").have_out),n.save().then(function(e){t.log(e)}).catch(function(e){t.log(e)})}},get_allCost:function(){var e=uni.getStorageSync("uid");t.log(e);var n=i.default.Query("Goods");n.equalTo("userId","==",e),n.find().then(function(e){t.log(e);var n=!0,a=!1,r=void 0;try{for(var i,l=(0,o.default)(e);!(n=(i=l.next()).done);n=!0){var u=i.value;t.log(u),Number(u.costPrice)*u.reserve,u.reserve}}catch(s){a=!0,r=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}})},getDay:function(e,t){var n=this,a=new Date,o=a.getTime()+864e5*e;a.setTime(o);var r=a.getFullYear(),i=a.getMonth(),l=a.getDate();return i=n.handleMonth(i+1),l=n.handleMonth(l),t?r+"-"+i+"-"+l+" 00:00:00":r+"-"+i+"-"+l},js_date_time:function(e,t){var n=new Date(e),a=n.getFullYear(),o=n.getMonth()+1;o=o<10?"0"+o:o;var r=n.getDate();r=r<10?"0"+r:r;var i=n.getHours();i=i<10?"0"+i:i;var l=n.getMinutes(),u=n.getSeconds();return l=l<10?"0"+l:l,u=u<10?"0"+u:u,t?a+"-"+o+"-"+r+" "+i+":"+l:a+"-"+o+"-"+r},handleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t}}}).call(this,n("5a52")["default"])},"9ccd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-tab-bar"},[e.loading?n("loading"):n("v-uni-view",[n("uni-nav-bar",{attrs:{fixed:!1,color:"#333333","background-color":"#FFFFFF","right-text":"筛选"},on:{"click-right":function(t){arguments[0]=t=e.$handleEvent(t),e.showOptions=!0}}}),n("v-uni-view",[n("v-uni-view",{staticStyle:{background:"#FFFFFF","margin-top":"10rpx"}},[n("uni-segmented-control",{attrs:{current:e.current,values:e.items,"style-type":"text","active-color":"#426ab3"},on:{clickItem:function(t){arguments[0]=t=e.$handleEvent(t),e.onClickItem.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"display_flex_bet",staticStyle:{padding:"0rpx 30rpx","border-bottom":"10rpx solid#ddd","text-align":"center"}},[n("v-uni-view",[n("v-uni-view",[e._v(e._s(e.header.total))]),n("v-uni-view",{staticStyle:{color:"#999","font-size":"24rpx"}},[e._v("单品数")])],1),n("v-uni-view",[n("v-uni-view",[e._v("¥"+e._s(e.header.total_money))]),n("v-uni-view",{staticStyle:{color:"#999","font-size":"24rpx"}},[e._v("总额")])],1),-1==e.seleted_tab?n("v-uni-view",[n("v-uni-view",[e._v("¥"+e._s(e.header.get_money))]),n("v-uni-view",{staticStyle:{color:"#999","font-size":"24rpx"}},[e._v("毛利润")])],1):e._e()],1)],1)],1),n("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":"true"}},e._l(e.list,function(t,a){return n("v-uni-navigator",{key:a,attrs:{"hover-class":"none",url:"/pages/report/EnteringHistory/detail/detail?id="+t.objectId}},[1==t.type?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticStyle:{display:"flex",width:"calc(100% - 120rpx)"}},[n("v-uni-view",{staticStyle:{"line-height":"80rpx"}},[n("fa-icon",{attrs:{type:"sign-in",size:"20",color:"#2ca879"}})],1),n("v-uni-view",{staticStyle:{"margin-left":"20rpx"}},[t.opreater?n("v-uni-view",[t.opreater.nickName?n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作者：")]),t.opreater.nickName?n("v-uni-text",[e._v(e._s(t.opreater.nickName))]):e._e()],1):e._e()],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作商品：")]),e._v(e._s(t.goodsName)+" 等...")],1),n("v-uni-view",[2==t.extra_type?n("v-uni-text",[e._v("入库数量：")]):1==t.extra_type?n("v-uni-text",[e._v("采购数量：")]):e._e(),e._v(e._s(t.num))],1),t.beizhu?n("v-uni-view",{staticClass:"item_beizhu"},[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("备注：")]),e._v(e._s(t.beizhu))],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作时间：")]),e._v(e._s(t.createdAt))],1)],1)],1),2==t.extra_type?n("v-uni-view",{staticClass:"order_get"},[e._v("入库")]):1==t.extra_type?n("v-uni-view",{staticClass:"order_get"},[e._v("采购")]):e._e()],1):2==t.type?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticStyle:{display:"flex",width:"calc(100% - 120rpx)"}},[n("v-uni-view",{staticStyle:{"line-height":"80rpx"}},[n("fa-icon",{attrs:{type:"sign-out",size:"20",color:"#b3b242"}})],1),n("v-uni-view",{staticStyle:{"margin-left":"20rpx"}},[t.opreater?n("v-uni-view",[t.opreater.nickName?n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作者：")]),t.opreater.nickName?n("v-uni-text",[e._v(e._s(t.opreater.nickName))]):e._e()],1):e._e()],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作商品：")]),e._v(e._s(t.goodsName)+" 等...")],1),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("退货数量：")]),e._v(e._s(t.num))],1),t.beizhu?n("v-uni-view",{staticClass:"item_beizhu"},[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("备注：")]),e._v(e._s(t.beizhu))],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作时间：")]),e._v(e._s(t.createdAt))],1)],1)],1),n("v-uni-view",{staticClass:"order_returning"},[e._v("退货")])],1):-1==t.type?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticStyle:{display:"flex",width:"calc(100% - 120rpx)"}},[n("v-uni-view",{staticStyle:{"line-height":"80rpx"}},[n("fa-icon",{attrs:{type:"sign-out",size:"20",color:"#f30"}})],1),n("v-uni-view",{staticStyle:{"margin-left":"20rpx"}},[t.opreater?n("v-uni-view",[t.opreater.nickName?n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作者：")]),t.opreater.nickName?n("v-uni-text",[e._v(e._s(t.opreater.nickName))]):e._e()],1):e._e()],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作商品：")]),e._v(e._s(t.goodsName)+" 等...")],1),n("v-uni-view",[2==t.extra_type?n("v-uni-text",[e._v("出库数量：")]):1==t.extra_type?n("v-uni-text",[e._v("销售数量：")]):e._e(),e._v(e._s(t.num))],1),t.beizhu?n("v-uni-view",{staticClass:"item_beizhu"},[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("备注：")]),e._v(e._s(t.beizhu))],1):e._e(),n("v-uni-view",[n("v-uni-text",{staticStyle:{color:"#999"}},[e._v("操作时间：")]),e._v(e._s(t.createdAt))],1)],1)],1),2==t.extra_type?n("v-uni-view",{staticClass:"order_out"},[e._v("出库")]):1==t.extra_type?n("v-uni-view",{staticClass:"order_out"},[e._v("销售")]):e._e()],1):e._e()],1)}),1)],1),e.showOptions?n("v-uni-view",{staticClass:"modal_background",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.showOptions=!1}}},[n("v-uni-view",{staticClass:"showOptions"},[n("v-uni-view",{staticClass:"input_item"},[n("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[n("v-uni-view",{staticStyle:{"margin-right":"10px"}},[e._v("类型")]),n("v-uni-picker",{staticClass:"select_type",staticStyle:{width:"500rpx"},attrs:{range:e.types,"range-key":"name"},on:{change:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.bindtypechange.apply(void 0,arguments)},click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t)}}},[e._v(e._s(e.selected_text))])],1),n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1),n("v-uni-view",{staticClass:"input_item1"},[n("v-uni-view",[n("v-uni-picker",{attrs:{mode:"date",value:e.now_day,end:e.max_day},on:{change:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.bindDateChange1.apply(void 0,arguments)},click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t)}}},[n("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v(e._s(e.now_day))]),n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1),n("v-uni-view",[e._v("至")]),n("v-uni-view",[n("v-uni-picker",{attrs:{mode:"date",value:e.end_day,end:e.max_day},on:{change:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.bindDateChange2.apply(void 0,arguments)},click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t)}}},[n("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[n("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v(e._s(e.end_day))]),n("fa-icon",{attrs:{type:"angle-right",size:"20",color:"#999"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"option_bottom"},[n("v-uni-view",{staticClass:"selection",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.option_reset.apply(void 0,arguments)}}},[e._v("重置")]),n("v-uni-view",{staticClass:"selection1",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.option_confrim.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)],1):e._e()],1)},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},b782:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".segmented-control[data-v-917140dc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:75%;font-size:%?28?%;box-sizing:border-box;margin:0 auto;overflow:hidden;border:1px solid;border-radius:%?10?%}.segmented-control.text[data-v-917140dc]{border:0;border-radius:0}.segmented-control-item[data-v-917140dc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;line-height:%?60?%;box-sizing:border-box;border-left:1px solid}.segmented-control-item.active[data-v-917140dc]{color:#fff}.segmented-control-item.text[data-v-917140dc]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-917140dc]{border-bottom-style:solid}.segmented-control-item[data-v-917140dc]:first-child{border-left-width:0}",""])},c952:function(e,t,n){"use strict";n.r(t);var a=n("ca58"),o=n("7c0b");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("6916");var i=n("f0c5"),l=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,"917140dc",null);t["default"]=l.exports},ca58:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===e.styleType},style:{borderColor:"text"===e.styleType?"":e.activeColor}},e._l(e.values,function(t,a){return n("v-uni-view",{key:a,staticClass:"segmented-control-item",class:[{text:"text"===e.styleType},{active:a===e.currentIndex}],style:{color:a===e.currentIndex?"text"===e.styleType?e.activeColor:"#fff":"text"===e.styleType?"#000":e.activeColor,backgroundColor:a===e.currentIndex&&"button"===e.styleType?e.activeColor:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._onClick(a)}}},[e._v(e._s(t))])}),1)},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},d18f:function(e,t,n){"use strict";n.r(t);var a=n("ebe6"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},db97:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".page[data-v-ca561c1a]{overflow:hidden;height:calc(100vh - %?260?%);font-size:%?28?%;color:#3d3d3d;background:#fafafa}.input_item[data-v-ca561c1a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:%?80?%;padding:0 %?30?%}.pro_list[data-v-ca561c1a]{font-size:%?20?%!important;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.pro_listitem[data-v-ca561c1a]{background-color:#fff;padding:%?10?% %?20?%;border-bottom:%?1?% solid#ddd}.item[data-v-ca561c1a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background-color:#fff;padding:%?20?%;border-bottom:%?1?% solid#EEEEEE}.icon-order[data-v-ca561c1a]{font-size:%?44?%;color:#426ab3}.list-item[data-v-ca561c1a]{height:100%;overflow:scroll}.select_time[data-v-ca561c1a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:%?80?%;color:#999;padding:0 %?30?%}.item_beizhu[data-v-ca561c1a]{max-width:calc(100% - %?120?%);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.order_get[data-v-ca561c1a]{padding:%?0?% %?30?%;color:#2ca879;border:%?0.5?% solid#2ca879;height:%?52?%;line-height:%?52?%;border-radius:%?8?%}.order_out[data-v-ca561c1a]{padding:0 15px;color:#f30;border:1px solid#f30;height:26px;line-height:26px;margin-top:7px;border-radius:4px}.order_counting[data-v-ca561c1a]{padding:0 15px;color:#000;border:1px solid#000;height:26px;line-height:26px;margin-top:7px;border-radius:4px}.order_returning[data-v-ca561c1a]{padding:0 15px;color:#b3b242;border:1px solid#b3b242;height:26px;line-height:26px;margin-top:7px;border-radius:4px}",""])},ebe6:function(e,t,n){"use strict";(function(e){var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var o=a(n("5d73"));n("7514");var r,i,l,u,s=a(n("7fd5")),d=a(n("9546")),c=a(n("4d52")),v=a(n("120a")),f=a(n("c952")),y=a(n("96bd")),g={components:{faIcon:c.default,loading:v.default,uniNavBar:y.default,uniSegmentedControl:f.default},data:function(){return{showOptions:!1,header:{total:0,total_money:0,get_money:0},loading:!0,items:["今天","昨天","近七天","近一个月"],list:[],current:0,now_day:s.default.getDay(0,!1),end_day:s.default.getDay(1,!1),max_day:s.default.getDay(0,!1),seleted_tab:"",selected_text:"操作类型",extra_type:"",types:[{name:"入库",type:1,extra_type:2},{name:"采购",type:1,extra_type:1},{name:"出库",type:-1,extra_type:2},{name:"销售",type:-1,extra_type:1},{name:"盘点",type:3,extra_type:""},{name:"退货",type:2,extra_type:""}]}},onLoad:function(e){r=this,i=wx.getStorageSync("uid"),l=e.id,r.getdetail()},methods:{bindtypechange:function(t){e.log(t),u=t.detail.value,r.selected_text=r.types[u].name},option_confrim:function(){r.header={total:0,total_money:0,get_money:0},r.seleted_tab=r.types[u].type,r.extra_type=r.types[u].extra_type,r.showOptions=!1,r.getdetail()},option_reset:function(){r.header={total:0,total_money:0,get_money:0},r.seleted_tab=-1,r.extra_type=1,r.selected_text="销售",r.now_day=s.default.getDay(0,!1),r.end_day=s.default.getDay(1,!1),r.max_day=s.default.getDay(0,!1),r.showOptions=!1,r.getdetail()},bindDateChange1:function(e){r.now_day=e.detail.value},bindDateChange2:function(e){r.end_day=e.detail.value},onClickItem:function(e){this.current!==e&&(this.current=e,r.header={total:0,total_money:0,get_money:0},0==e?(r.now_day=s.default.getDay(0,!1),r.end_day=s.default.getDay(1,!1)):1==e?(r.now_day=s.default.getDay(-1,!1),r.end_day=s.default.getDay(0,!1)):2==e?(r.now_day=s.default.getDay(-7,!1),r.end_day=s.default.getDay(1,!1)):3==e&&(r.now_day=s.default.getDay(-30,!1),r.end_day=s.default.getDay(1,!1)),r.getdetail())},getdetail:function(){var t=d.default.Query("order_opreations");t.equalTo("master","==",i),r.seleted_tab&&(t.equalTo("type","==",r.seleted_tab),t.equalTo("extra_type","==",r.extra_type)),t.equalTo("status","!=",!1),t.equalTo("opreater","==",l),t.include("opreater"),t.equalTo("createdAt",">=",r.now_day+" 00:00:00"),t.equalTo("createdAt","<=",r.end_day+" 00:00:00"),t.order("-createdAt"),t.find().then(function(t){e.log(t);var n=t,a=!0,i=!1,l=void 0;try{for(var u,s=(0,o.default)(n);!(a=(u=s.next()).done);a=!0){var d=u.value;d.num=0,d.relations=d.detail;var c=!0,v=!1,f=void 0;try{for(var y,g=(0,o.default)(d.detail);!(c=(y=g.next()).done);c=!0){var m=y.value;e.log(m),d.num+=Number(m.num),r.header.total+=m.num,r.header.total_money+=Number(m.goodsId.retailPrice)*m.num,r.header.get_money+=m.total_money-Number(m.goodsId.costPrice)*m.num}}catch(p){v=!0,f=p}finally{try{c||null==g.return||g.return()}finally{if(v)throw f}}}}catch(p){i=!0,l=p}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}r.list=n,r.loading=!1})}}};t.default=g}).call(this,n("5a52")["default"])}}]);