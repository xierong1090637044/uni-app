(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/productSell"],{"335f":function(t,e,n){"use strict";n.r(e);var a=n("d258"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=o.a},4503:function(t,e,n){},"8eae":function(t,e,n){"use strict";var a=n("4503"),o=n.n(a);o.a},a6f7:function(t,e,n){"use strict";n.r(e);var a=n("ac08"),o=n("335f");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("8eae");var u,c=n("f0c5"),l=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);e["default"]=l.exports},ac08:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a})},d258:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("9546")),o=r(n("7fd5"));function r(t){return t&&t.__esModule?t:{default:t}}var u,c=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"ef70"))},l=function(){return Promise.all([n.e("common/vendor"),n.e("components/z-table/z-table")]).then(n.bind(null,"8c9b"))},i={components:{zTable:l,uniCalendar:c},props:{productId:{type:String,default:{}},stock:{type:Object,default:{}}},data:function(){return{start_date:o.default.getDay(0,!1),end_date:o.default.getDay(1,!1),info:{date:o.default.getDay(0,!0).split(" ")[0],lunar:!0,range:!0,insert:!1,selected:[]},purcharseList:[],purcharseList1:[],purcharseNotice:{num:0,money:0},alignColumns:[{title:"客户",key:"name",width:"300"},{title:"实际销售数",key:"num",width:"200"},{title:"实际销售金额",key:"really_total_money",width:"200"}],alignColumns1:[{title:"操作人",key:"nickName",width:"300"},{title:"实际销售数",key:"num",width:"200"},{title:"实际销售金额",key:"really_total_money",width:"200"}]}},watch:{stock:function(t,e){t.objectId!=e.objectId&&this.getdetail()}},mounted:function(){u=this,u.getdetail()},methods:{open:function(){u.$refs.calendar.open()},confirm:function(t){console.log(t),0==t.range.data.length?u.start_date=t.fulldate:(u.start_date=t.range.data[0],u.end_date=t.range.data[t.range.data.length-1]),u.getdetail()},getdetail:function(){t.removeStorageSync("productPurchase"),u.purcharseNotice.num=0,u.purcharseNotice.money=0,u.purcharseList1=[],u.purcharseList=[];var e=a.default.Query("Bills");e.equalTo("userId","==",t.getStorageSync("uid")),e.equalTo("type","==",-1),e.equalTo("extra_type","==",1),e.equalTo("createdAt",">=",u.start_date+" 00:00:00"),e.equalTo("createdAt","<=",u.end_date+" 23:59:59"),e.equalTo("goodsId","==",u.productId),u.stock&&u.stock.objectId&&e.equalTo("stock","==",u.stock.objectId),e.count().then(function(n){var a=n,o=[];if(0!=a)for(var r=0;r<Math.ceil(a/500);r++)u.stock&&u.stock.objectId&&e.equalTo("stock","==",u.stock.objectId),e.include("custom","opreater"),e.limit(500),e.skip(500*r),e.find().then(function(e){var n=!0,a=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var i=c.value;i.custom&&i.custom.objectId&&(u.purcharseNotice.num+=i.num,u.purcharseNotice.money+=i.total_money,i.name=i.custom.custom_name,i.nickName=i.opreater.nickName,o.push(i))}}catch(d){a=!0,r=d}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}t.setStorageSync("productPurchase",o),u.purcharseList=t.getStorageSync("productPurchase").reduce(function(t,e){var n=t.find(function(t){return t.custom.objectId===e.custom.objectId});return n?(n.num+=e.num,n.really_total_money+=e.total_money):t.push(e),t},[]),u.purcharseList1=t.getStorageSync("productPurchase").reduce(function(t,e){var n=t.find(function(t){return t.opreater.objectId===e.opreater.objectId});return n?(n.num+=e.num,n.really_total_money+=e.total_money):t.push(e),t},[])})})}}};e.default=i}).call(this,n("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/productSell-create-component',
    {
        'components/productSell-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("a6f7"))
        })
    },
    [['components/productSell-create-component']]
]);
