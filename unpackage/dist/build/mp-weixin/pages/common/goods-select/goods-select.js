(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/goods-select/goods-select"],{"10b1":function(o,t,e){"use strict";e.r(t);var n=e("3879"),r=e("bfcd");for(var c in r)"default"!==c&&function(o){e.d(t,o,function(){return r[o]})}(c);e("d431");var i=e("2877"),a=Object(i["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=a.exports},3879:function(o,t,e){"use strict";var n=function(){var o=this,t=o.$createElement,e=(o._self._c,o.__map(o.productList,function(t,e){var n=t.goodsName.indexOf(o.search_text),r=JSON.stringify(t);return{$orig:o.__get_orig(t),g0:n,g1:r}}));o._isMounted||(o.e0=function(t){o.showOptions=!1}),o.$mp.data=Object.assign({},{$root:{l0:e}})},r=[];e.d(t,"a",function(){return n}),e.d(t,"b",function(){return r})},"6c0b":function(o,t,e){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(e("ee11"));function r(o){return o&&o.__esModule?o:{default:o}}var c,i,a=function(){return e.e("components/kilvn-fa-icon/fa-icon").then(e.bind(null,"0914"))},u=function(){return e.e("components/Loading/index").then(e.bind(null,"524a"))},s=function(){return e.e("components/uni-nav-bar/uni-nav-bar").then(e.bind(null,"b92d"))},d=function(){return e.e("components/uni-icon/uni-icon").then(e.bind(null,"5753"))},l=[],g="",f=50,h={components:{loading:u,uniNavBar:s,faIcon:a,uniIcon:d},data:function(){return{search_text:"",url:null,showOptions:!1,loading:!0,productList:null,checked_option:"createdAt",category:"",stock:""}},onLoad:function(t){i=this,this.handle_data(),"entering"==t.type?this.url="../good_confrim/good_confrim":"delivery"==t.type?this.url="../goods_out/goods_out":"returing"==t.type?this.url="../good_return/good_return":"counting"==t.type&&(this.url="../good_count/good_count"),c=o.getStorageSync("uid"),i.get_productList()},onShow:function(){o.removeStorageSync("products"),o.getStorageSync("category")&&(i.showOptions=!0,i.category=o.getStorageSync("category")),o.getStorageSync("warehouse")&&(i.showOptions=!0,i.stock=o.getStorageSync("warehouse")[o.getStorageSync("warehouse").length-1].stock),o.getStorageSync("is_option")&&i.get_productList()},onUnload:function(){g="",f=50,o.removeStorageSync("is_option")},methods:{shaixuan:function(){i.showOptions=!0},confirm:function(o){i.search_text=o.detail.value},confrim_this:function(){this.go_goodsconfrim()},option_reset:function(){o.removeStorageSync("category"),o.removeStorageSync("warehouse"),i.category="",i.stock="",i.showOptions=!1,i.get_productList()},option_confrim:function(){o.getStorageSync("category")&&(i.category=o.getStorageSync("category")),o.getStorageSync("warehouse")&&(i.stock=o.getStorageSync("warehouse")[o.getStorageSync("warehouse").length-1].stock),i.showOptions=!1,i.get_productList()},selectd:function(o){f=50,i.checked_option=o,i.get_productList()},load_more:function(){f+=50,i.get_productList()},radioChange:function(o){l=o.detail.value},go_goodsconfrim:function(){if(console.log(l),0==l.length)o.showToast({title:"请选择产品",icon:"none"});else{var t=0,e=!0,n=!1,r=void 0;try{for(var c,i=l[Symbol.iterator]();!(e=(c=i.next()).done);e=!0){var a=c.value;l[t]=JSON.parse(a),l[t].num=1,l[t].total_money=1*l[t].retailPrice,l[t].modify_retailPrice=l[t].retailPrice,t+=1}}catch(u){n=!0,r=u}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}o.setStorageSync("products",l),o.navigateTo({url:this.url})}},get_productList:function(){var o=this,t=n.default.Query("Goods");t.equalTo("userId","==",c),t.equalTo("stocks","==",i.stock.objectId),t.equalTo("status","!=",-1),t.equalTo("second_class","==",i.category.objectId),t.equalTo("goodsName","==",{$regex:g+".*"}),t.limit(f),t.order("-"+i.checked_option),t.include("userId"),t.include("goodsClass"),t.include("stocks"),t.find().then(function(t){o.productList=t,o.loading=!1})},handle_data:function(){o.removeStorageSync("category"),o.removeStorageSync("warehouse"),o.removeStorageSync("shop"),g="",f=50}}};t.default=h}).call(this,e("543d")["default"])},bfcd:function(o,t,e){"use strict";e.r(t);var n=e("6c0b"),r=e.n(n);for(var c in n)"default"!==c&&function(o){e.d(t,o,function(){return n[o]})}(c);t["default"]=r.a},d431:function(o,t,e){"use strict";var n=e("f64d"),r=e.n(n);r.a},f64d:function(o,t,e){}},[["b5e1","common/runtime","common/vendor"]]]);