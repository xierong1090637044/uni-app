(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/good_count/count_detail/count_detail"],{"0b12":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s,u=a(o("c74b")),r=a(o("df06"));function a(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{products:null,button_disabled:!1,beizhu_text:"",real_money:0,all_money:0,producer:null}},onLoad:function(){s=this,n=t.getStorageSync("uid"),this.products=t.getStorageSync("products")},methods:{formSubmit:function(e){console.log(e),this.button_disabled=!0,t.showLoading({title:"上传中..."});for(var o=new Array,a=[],c=0;c<this.products.length;c++){var i=u.default.Query("Bills"),d={},l=u.default.Pointer("_User"),f=l.set(n),p=u.default.Pointer("Goods"),g=p.set(this.products[c].objectId);i.set("goodsName",this.products[c].goodsName),i.set("retailPrice",this.products[c].modify_retailPrice.toString()),i.set("num",Number(this.products[c].num)),i.set("reserve",this.products[c].reserve),i.set("now_reserve",this.products[c].num.toString()),i.set("total_money",this.products[c].total_money),i.set("goodsId",g),i.set("userId",f),i.set("type",3);d.goodsName=this.products[c].goodsName,d.reserve=this.products[c].reserve,d.now_reserve=this.products[c].num.toString(),o.push(i),a.push(d)}u.default.Query("Bills").saveAll(o).then(function(o){var c=u.default.Pointer("_User"),i=c.set(n),d=t.getStorageSync("masterId"),l=u.default.Pointer("_User"),f=l.set(d),p=u.default.Query("order_opreations");p.set("beizhu",e.detail.value.input_beizhu),p.set("detail",a),p.set("type",3),p.set("opreater",f),p.set("master",i),p.set("goodsName",s.products[0].goodsName),p.save().then(function(e){console.log("添加操作历史记录成功",e),t.hideLoading(),t.showToast({title:"产品盘点成功",icon:"success",success:function(){for(var o=function(t){var e=u.default.Query("Goods");e.get(s.products[t].objectId).then(function(e){e.set("reserve",Number(s.products[t].num)),e.set("stocktype",Number(s.products[t].num)>s.products[t].warning_num?1:0),e.save()}).catch(function(t){console.log(t)})},n=0;n<s.products.length;n++)o(n);s.button_disabled=!1,t.setStorageSync("is_option",!0),setTimeout(function(){r.default.log(t.getStorageSync("user").nickName+"盘点了'"+s.products[0].goodsName+"'等"+s.products.length+"商品",3,e.objectId),t.navigateBack({delta:2})},500)}})})},function(t){console.log("异常处理")})}}};e.default=c}).call(this,o("543d")["default"])},"276f":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return s})},"9a54":function(t,e,o){"use strict";o.r(e);var n=o("0b12"),s=o.n(n);for(var u in n)"default"!==u&&function(t){o.d(e,t,function(){return n[t]})}(u);e["default"]=s.a},"9fb9":function(t,e,o){"use strict";o.r(e);var n=o("276f"),s=o("9a54");for(var u in s)"default"!==u&&function(t){o.d(e,t,function(){return s[t]})}(u);o("fc44");var r=o("2877"),a=Object(r["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},cfbd:function(t,e,o){},f163:function(t,e,o){"use strict";(function(t){o("a961"),o("921b");n(o("66fd"));var e=n(o("9fb9"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},fc44:function(t,e,o){"use strict";var n=o("cfbd"),s=o.n(n);s.a}},[["f163","common/runtime","common/vendor"]]]);