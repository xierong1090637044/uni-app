(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tarBar/report"],{"211d":function(t,e,n){"use strict";n.r(e);var o=n("9bea"),a=n("6afd");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("87a6");var u=n("2877"),i=Object(u["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=i.exports},"6afd":function(t,e,n){"use strict";n.r(e);var o=n("e432"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},"87a6":function(t,e,n){"use strict";var o=n("a62d"),a=n.n(o);a.a},"8a4a":function(t,e,n){"use strict";(function(t){n("a961"),n("921b");o(n("66fd"));var e=o(n("211d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"9bea":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},a62d:function(t,e,n){},e432:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=l(n("df06")),a=l(n("0082")),r=l(n("2dc1")),u=l(n("a739")),i=l(n("c74b"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d,s,f=function(){return n.e("components/kilvn-fa-icon/fa-icon").then(n.bind(null,"0914"))},g=function(){return n.e("components/uni-notice-bar/uni-notice-bar").then(n.bind(null,"7fee"))},_=function(){return n.e("components/uni-search-bar/uni-search-bar").then(n.bind(null,"4fee"))},p={components:{faIcon:f,uniNoticeBar:g,uniSearchBar:_},data:function(){return c({user:t.getStorageSync("user"),othercurrent:"",noticeText:"",logsList:[],get_reserve:0,out_reserve:0,sellNum:0,purchaseNum:0,total_reserve:0,total_money:0,total_products:0,openid:""},"user",t.getStorageSync("user"))},onLoad:function(e){d=this,s=t.getStorageSync("uid")},onShow:function(){t.getStorageSync("user")&&(d.gettoday_detail(),d.loadallGoods(),u.default.getNoticeList(1).then(function(t){d.noticeText=t[0].content}),a.default.getMineInfo().then(function(e){console.log(e),e.disabled&&(setTimeout(function(){t.showToast({title:"该账户已禁用",icon:"none"})},1e3),t.reLaunch({url:"/pages/landing/landing"}))}))},methods:{gettoday_detail:function(){var e=0,n=0,a=0,r=0,u=i.default.Query("Bills");u.equalTo("userId","==",s),u.equalTo("createdAt",">=",o.default.getDay(0,!0)),u.equalTo("createdAt","<=",o.default.getDay(1,!0)),u.equalTo("status","!=",!1),u.include("goodsId"),u.find().then(function(o){for(var u=0;u<o.length;u++)1==o[u].type?(e+=o[u].num,o[u].num*o[u].goodsId.retailPrice,o[u].total_money,1==o[u].extra_type&&(a+=o[u].num)):-1==o[u].type&&(n+=o[u].num,o[u].num*o[u].goodsId.costPrice,o[u].total_money,1==o[u].extra_type&&(r+=o[u].num));console.log(a,r),d.purchaseNum=a.toFixed(t.getStorageSync("print_setting").show_float),d.sellNum=r.toFixed(t.getStorageSync("print_setting").show_float),d.get_reserve=e.toFixed(t.getStorageSync("print_setting").show_float),d.out_reserve=n.toFixed(t.getStorageSync("print_setting").show_float)})},loadallGoods:function(){r.default.loadallGoods().then(function(t){d.user.rights&&"0"!=d.user.rights.othercurrent[0]?d.total_money=0:d.total_money=t.total_money,d.total_reserve=t.total_reserve,d.total_products=t.total_products})},get_logsList:function(){var t=i.default.Query("logs");t.equalTo("parent","==",s),t.equalTo("type","!=",-2),t.order("-createdAt"),t.limit(20),t.find().then(function(t){var e=!0,n=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var u=a.value;5==u.type?u.link="/pages/manage/good_det/good_det?id="+u.detail_id+"&type=false":-1!=u.type&&1!=u.type&&2!=u.type&&3!=u.type||(u.link="/pages/report/EnteringHistory/detail/detail?id="+u.detail_id)}}catch(i){n=!0,o=i}finally{try{e||null==r.return||r.return()}finally{if(n)throw o}}d.logsList=t})}}};e.default=p}).call(this,n("543d")["default"])}},[["8a4a","common/runtime","common/vendor"]]]);