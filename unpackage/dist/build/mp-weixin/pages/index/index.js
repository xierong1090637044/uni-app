(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"185a":function(e,o,t){},"2ea9":function(e,o,t){"use strict";var n=t("185a"),a=t.n(n);a.a},"3aa4":function(e,o,t){"use strict";(function(e){t("a961"),t("921b");n(t("66fd"));var o=n(t("6115"));function n(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])},"429c":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=l(t("086e")),a=l(t("df06")),c=(l(t("0082")),l(t("2dc1"))),i=l(t("c74b"));function l(e){return e&&e.__esModule?e:{default:e}}var s,r,u=function(){return t.e("components/kilvn-fa-icon/fa-icon").then(t.bind(null,"0914"))},d=function(){return t.e("components/uni-notice-bar/uni-notice-bar").then(t.bind(null,"7fee"))},g={components:{faIcon:u,uniNoticeBar:d},data:function(){return{welcome:{text:"",icon:""},weather:"",logsList:[],optionsLists:[{name:"产品入库",icon:"/static/entering.png",url:"/pages/common/goods-select/goods-select?type=entering"},{name:"产品出库",icon:"/static/delivery.png",url:"/pages/common/goods-select/goods-select?type=delivery"},{name:"产品调拨",icon:"/static/allocation.png",url:"/pages/common/goods-select/goods-select?type=allocation"},{name:"退货入库",icon:"/static/return_goods.png",url:"/pages/common/goods-select/goods-select?type=returing"},{name:"库存盘点",icon:"/static/stocking.png",url:"/pages/common/goods-select/goods-select?type=counting"}],get_reserve:0,out_reserve:0,total_reserve:0,total_money:0,total_products:0,openid:""}},onLoad:function(o){s=this,r=e.getStorageSync("uid"),console.log(o),o.openid&&e.setStorageSync("openid",o.openid);var t=new Date,a=t.getHours(),c=new n.default.AMapWX({key:"ddf21583182190befcf92c027b97f8ab"});c.getWeather({success:function(e){console.log(e),s.weather=e,a<6?(console.log(a),s.welcome.text="凌晨注意休息！好的身体才能高效的工作",s.welcome.icon="moon-o"):a<9?(s.welcome.text="早上好，又是开心快乐的一天！",s.welcome.icon="sun-o"):a<11?(s.welcome.text="上午好，请努力加油哦，会成功的！",s.welcome.icon="sun-o"):a<14?(s.welcome.text="中午好，辛勤劳动的你是最可爱的！",s.welcome.icon="sun-o"):a<18?(s.welcome.text="下午好，没有什么会阻挡你的，相信自己！",s.welcome.icon="sun-o"):(s.welcome.text="晚上好，更深露重，适当工作，适当休息！",s.welcome.icon="sun-o")},fail:function(e){console.log(e)}})},onShow:function(){s.gettoday_detail(),s.loadallGoods(),s.get_logsList()},onShareAppMessage:function(e){return"button"===e.from&&console.log(e.target),{title:"库存表，欢迎您的加入",path:"/pages/index/index"}},methods:{scan_code:function(){e.showActionSheet({itemList:["扫码出库","扫码入库","扫码盘点","查看详情","扫码添加商品"],success:function(e){s.scan(e.tapIndex)},fail:function(e){console.log(e.errMsg)}})},scan:function(o){e.scanCode({success:function(t){var n=t.result,a=n.split("-");0==o?e.navigateTo({url:"/pages/common/goods_out/goods_out?id="+a[0]+"&type="+a[1]}):1==o?e.navigateTo({url:"/pages/common/good_confrim/good_confrim?id="+a[0]+"&type="+a[1]}):2==o?e.navigateTo({url:"/pages/common/good_count/good_count?id="+a[0]+"&type="+a[1]}):3==o?e.navigateTo({url:"/pages/manage/good_det/good_det?id="+a[0]+"&type="+a[1]}):4==o&&e.navigateTo({url:"/pages/manage/good_add/good_add?id="+n})},fail:function(o){e.showToast({title:"未识别到条形码",icon:"none"})}})},gettoday_detail:function(){var o=0,t=0,n=i.default.Query("Bills");n.equalTo("userId","==",r),n.equalTo("createdAt",">=",a.default.getDay(0,!0)),n.equalTo("createdAt","<=",a.default.getDay(1,!0)),n.include("goodsId"),n.find().then(function(n){for(var a=0;a<n.length;a++)1==n[a].type?(o+=n[a].num,n[a].num*n[a].goodsId.retailPrice,n[a].total_money):-1==n[a].type&&(t+=n[a].num,n[a].num*n[a].goodsId.costPrice,n[a].total_money);s.get_reserve=o.toFixed(e.getStorageSync("print_setting").show_float),s.out_reserve=t.toFixed(e.getStorageSync("print_setting").show_float)})},loadallGoods:function(){c.default.loadallGoods().then(function(e){s.total_money=e.total_money,s.total_reserve=e.total_reserve,s.total_products=e.total_products})},get_logsList:function(){var e=i.default.Query("logs");e.equalTo("parent","==",r),e.equalTo("type","!=",-2),e.order("-createdAt"),e.limit(20),e.find().then(function(e){var o=!0,t=!1,n=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var i=a.value;5==i.type?i.link="/pages/manage/good_det/good_det?id="+i.detail_id+"&type=false":-1!=i.type&&1!=i.type&&2!=i.type&&3!=i.type||(i.link="/pages/report/EnteringHistory/detail/detail?id="+i.detail_id)}}catch(l){t=!0,n=l}finally{try{o||null==c.return||c.return()}finally{if(t)throw n}}s.logsList=e})}}};o.default=g}).call(this,t("543d")["default"])},"5e86":function(e,o,t){"use strict";var n=function(){var e=this,o=e.$createElement;e._self._c},a=[];t.d(o,"a",function(){return n}),t.d(o,"b",function(){return a})},6115:function(e,o,t){"use strict";t.r(o);var n=t("5e86"),a=t("ce78");for(var c in a)"default"!==c&&function(e){t.d(o,e,function(){return a[e]})}(c);t("2ea9");var i=t("2877"),l=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);o["default"]=l.exports},ce78:function(e,o,t){"use strict";t.r(o);var n=t("429c"),a=t.n(n);for(var c in n)"default"!==c&&function(e){t.d(o,e,function(){return n[e]})}(c);o["default"]=a.a}},[["3aa4","common/runtime","common/vendor"]]]);