(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/manage/goods/goods"],{4404:function(e,o,t){"use strict";t.r(o);var n=t("d06e"),r=t("50fc");for(var c in r)"default"!==c&&function(e){t.d(o,e,(function(){return r[e]}))}(c);t("64af");var a,i=t("f0c5"),s=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);o["default"]=s.exports},"4f42":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=c(t("c74b")),r=c(t("df06"));function c(e){return e&&e.__esModule?e:{default:e}}var a,i,s=function(){t.e("components/kilvn-fa-icon/fa-icon").then(function(){return resolve(t("0914"))}.bind(null,t)).catch(t.oe)},d=function(){t.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(t("b92d"))}.bind(null,t)).catch(t.oe)},u=function(){t.e("components/uni-icon/uni-icon").then(function(){return resolve(t("5753"))}.bind(null,t)).catch(t.oe)},l=function(){t.e("components/uni-pagination/uni-pagination").then(function(){return resolve(t("2bfc"))}.bind(null,t)).catch(t.oe)},g={components:{uniNavBar:d,faIcon:s,uniPagination:l,uniIcon:u},data:function(){return{page_num:1,page_size:30,showOrder:!1,showOptions:!1,isPriviewImg:!1,productList:null,search_text:"",user:e.getStorageSync("user"),headerSelection:{goodsClass:"",stocks:"",order:{order:"-createdAt"},options:""},orders:[{desc:"库存数量",notice:"从高到低",order:"-reserve",checked:!1},{desc:"库存数量",notice:"从低到高",order:"reserve",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}]}},onLoad:function(o){i=this,e.removeStorageSync("category"),e.removeStorageSync("warehouse"),a=e.getStorageSync("uid"),o.search_text&&(i.search_text=o.search_text),i.get_productList()},onShow:function(){e.removeStorageSync("now_product"),e.getStorageSync("isClickShaiXuan")&&(i.page_num=1,i.headerSelection.goodsClass=e.getStorageSync("category")||"",i.headerSelection.stocks=e.getStorageSync("warehouse")?e.getStorageSync("warehouse")[0].stock:"",i.get_productList())},onShareAppMessage:function(e){return"button"===e.from&&console.log(e.target),{title:i.user.nickName+"的商品列表",path:"/pages/shop/index/index?userId="+a+"&nickName="+i.user.nickName}},onUnload:function(){r.default.handleData(),e.removeStorageSync("is_add"),i.option_reset()},methods:{selectOrder:function(e){var o=!0,t=!1,n=void 0;try{for(var r,c=i.orders[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var a=r.value;a.checked=!1}}catch(s){t=!0,n=s}finally{try{o||null==c.return||c.return()}finally{if(t)throw n}}e.checked=!0,i.headerSelection.order=e,i.get_productList()},priviewImg:function(o){i.isPriviewImg=!0,e.previewImage({current:o,urls:[o]})},change_page:function(e){i.page_num=e.current,i.get_productList()},change_timestatus:function(e){i.checked=e.detail.value},change_stocktatus:function(e){i.stock_checked=e.detail.value},input_confirm:function(e){i.search_text=e.detail.value,i.get_productList()},shaixuan:function(){i.showOptions=!0},goto_add:function(){var o=e.getStorageSync("user"),t=e.getStorageSync("identity"),r=n.default.Query("Goods");r.equalTo("userId","==",a),r.equalTo("order","==",0),r.find().then((function(n){var r=n;o.is_vip||r.length<30?wx.showActionSheet({itemList:["多店仓添加","单店仓添加"],success:function(o){0==o.tapIndex?e.navigateTo({url:"../good_add/good_add?type=more"}):1==o.tapIndex&&e.navigateTo({url:"../good_add/good_add?type=single"})},fail:function(e){console.log(e.errMsg)}}):e.showModal({title:"提示",content:"非会员最多上传30件产品",confirmText:"充值会员",success:function(o){o.confirm?1==t?e.navigateTo({url:"/pages/mine/vip/vip"}):e.showToast({title:"员工不能充值",icon:"none"}):o.cancel&&console.log("用户点击取消")}})}))},option_reset:function(){e.removeStorageSync("category"),e.removeStorageSync("warehouse"),i.headerSelection={goodsClass:"",stocks:"",order:{order:"-createdAt"},options:""},i.orders=[{desc:"库存数量",notice:"从高到低",order:"-reserve",checked:!1},{desc:"库存数量",notice:"从低到高",order:"reserve",checked:!1},{desc:"创建日期",notice:"最新",order:"-createdAt",checked:!0},{desc:"创建日期",notice:"最晚",order:"createdAt",checked:!1},{desc:"名字",notice:"正序",order:"goodsName",checked:!1}],i.page_num=1,i.search_text="",i.get_productList()},option_confrim:function(){e.getStorageSync("category")&&(i.category=e.getStorageSync("category")),e.getStorageSync("warehouse")&&(i.stock=e.getStorageSync("warehouse")[e.getStorageSync("warehouse").length-1].stock),i.showOptions=!1,i.get_productList()},selectd:function(o){console.log(o),"goodsClass"==o?e.navigateTo({url:"/pages/manage/category/category?type=choose"}):"stocks"==o?e.navigateTo({url:"/pages/manage/warehouse/warehouse?type=choose"}):"order"==o?i.showOrder=!0:"options"==o&&(i.showOptions=!0),e.setStorageSync("isClickShaiXuan",!0)},goDetail:function(o){console.log(o),e.setStorageSync("now_product",o),0==o.order?e.navigateTo({url:"../good_det/Ngood_det?id="+o.objectId+"&type=false"}):1==o.order?e.navigateTo({url:"../good_det/Ngood_det?id="+o.header.objectId+"&type=false"}):e.navigateTo({url:"../good_det/good_det"})},get_productList:function(){var o=this;e.showLoading({title:"加载中..."});var t=n.default.Query("Goods");t.equalTo("userId","==",a),t.equalTo("status","!=",-1),i.headerSelection.stocks&&i.headerSelection.stocks.objectId?t.equalTo("stocks","==",i.headerSelection.stocks.objectId):t.equalTo("order","!=",1),1==i.headerSelection.goodsClass.type?t.equalTo("goodsClass","==",i.headerSelection.goodsClass.objectId):t.equalTo("second_class","==",i.headerSelection.goodsClass.objectId);var r=t.equalTo("goodsName","==",{$regex:i.search_text+".*"}),c=t.equalTo("packageContent","==",{$regex:i.search_text+".*"}),s=t.equalTo("position","==",{$regex:i.search_text+".*"});t.or(r,c,s),t.limit(i.page_size),t.skip(i.page_size*(i.page_num-1)),t.order(i.headerSelection.order.order),t.include("goodsClass","stocks","second_class"),t.find().then((function(t){var n=!0,r=!1,c=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var d=a.value;d.reserve=d.reserve.toFixed(e.getStorageSync("setting")?e.getStorageSync("setting").show_float:0),2==i.user.identity&&i.user.rights&&-1!=i.user.rights.othercurrent.indexOf("0")&&(d.costPrice=0)}}catch(u){r=!0,c=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}o.productList=t,e.hideLoading(),e.removeStorageSync("isClickShaiXuan")}))}}};o.default=g}).call(this,t("543d")["default"])},"50fc":function(e,o,t){"use strict";t.r(o);var n=t("4f42"),r=t.n(n);for(var c in n)"default"!==c&&function(e){t.d(o,e,(function(){return n[e]}))}(c);o["default"]=r.a},"64af":function(e,o,t){"use strict";var n=t("6dd4"),r=t.n(n);r.a},"6dd4":function(e,o,t){},d06e:function(e,o,t){"use strict";var n={"uni-nav-bar":()=>t.e("components/uni-nav-bar/uni-nav-bar").then(t.bind(null,"b92d")),"uni-pagination":()=>t.e("components/uni-pagination/uni-pagination").then(t.bind(null,"2bfc"))},r=function(){var e=this,o=e.$createElement;e._self._c;e._isMounted||(e.e0=function(o){e.showOptions=!1},e.e1=function(o){e.showOrder=!1})},c=[];t.d(o,"b",(function(){return r})),t.d(o,"c",(function(){return c})),t.d(o,"a",(function(){return n}))},d1e1:function(e,o,t){"use strict";(function(e){t("a961"),t("921b");n(t("66fd"));var o=n(t("4404"));function n(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])}},[["d1e1","common/runtime","common/vendor"]]]);