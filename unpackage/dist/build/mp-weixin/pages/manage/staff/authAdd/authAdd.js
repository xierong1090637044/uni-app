(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/manage/staff/authAdd/authAdd"],{"0cac":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("4515"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,c=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function o(e,n){if(e){if("string"===typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var i,l,s,f=function(){t.e("components/uni-collapse/uni-collapse").then(function(){return resolve(t("c8f2"))}.bind(null,t)).catch(t.oe)},d=function(){t.e("components/uni-collapse-item/uni-collapse-item").then(function(){return resolve(t("2af1"))}.bind(null,t)).catch(t.oe)},h={},v={components:{uniCollapse:f,uniCollapseItem:d},data:function(){return{manage:[{id:0,name:"产品管理"},{id:1,name:"员工管理"},{id:2,name:"店仓管理",notice:"(勾选了下面的仓库，子账户将会自动加载勾选仓库里的产品，如不勾选，则列表为空)"},{id:3,name:"客户管理"},{id:4,name:"供货商管理"},{id:5,name:"产品类别管理"},{id:6,name:"库存管理（出库、入库、调拨、盘点操作）"},{id:7,name:"采购（采购，采购退货操作）"},{id:8,name:"销售（销售，销售退货操作）"}],moneyAuth:[{id:0,name:"财务管理模块查看"}],analysisAuth:[{id:0,name:"分析模块查看"}],recode:[{id:0,name:"入库记录"},{id:1,name:"出库记录"},{id:2,name:"调拨记录"},{id:3,name:"盘点记录"}],others:[{id:0,name:"进价隐藏"},{id:1,name:"审核"},{id:2,name:"看板查看"}],stocks:[],current:[],analysisCurrent:[],moneyCurrent:[],recodecurrent:[],othercurrent:[],select_stocks:[]}},onLoad:function(){i=this,s=e.getStorageSync("staff"),l=e.getStorageSync("uid")},onShow:function(){if(i.current=[],i.analysisCurrent=[],i.moneyCurrent=[],i.recodecurrent=[],i.othercurrent=[],i.select_stocks=[],e.getStorageSync("staffRights")){if(h=e.getStorageSync("staffRights"),h.current){var n,t=c(h.current);try{for(t.s();!(n=t.n()).done;){var a,o=n.value,u=c(i.manage);try{for(u.s();!(a=u.n()).done;){var s=a.value;o==s.id&&(s.checked=!0,i.current.push(o))}}catch(J){u.e(J)}finally{u.f()}}}catch(J){t.e(J)}finally{t.f()}}if(h.recodecurrent){var f,d=c(h.recodecurrent);try{for(d.s();!(f=d.n()).done;){var v,y=f.value,m=c(i.recode);try{for(m.s();!(v=m.n()).done;){var p=v.value;y==p.id&&(p.checked=!0,i.recodecurrent.push(y))}}catch(J){m.e(J)}finally{m.f()}}}catch(J){d.e(J)}finally{d.f()}}if(h.othercurrent){var b,g=c(h.othercurrent);try{for(g.s();!(b=g.n()).done;){var k,C=b.value,_=c(i.others);try{for(_.s();!(k=_.n()).done;){var S=k.value;C==S.id&&(S.checked=!0,i.othercurrent.push(C))}}catch(J){_.e(J)}finally{_.f()}}}catch(J){g.e(J)}finally{g.f()}}if(h.analysisCurrent){var A,j=c(h.analysisCurrent);try{for(j.s();!(A=j.n()).done;){var w,x=A.value,I=c(i.analysisAuth);try{for(I.s();!(w=I.n()).done;){var O=w.value;x==O.id&&(O.checked=!0,i.analysisCurrent.push(x))}}catch(J){I.e(J)}finally{I.f()}}}catch(J){j.e(J)}finally{j.f()}}if(h.moneyCurrent){var M,T=c(h.moneyCurrent);try{for(T.s();!(M=T.n()).done;){var $,R=M.value,q=c(i.moneyAuth);try{for(q.s();!($=q.n()).done;){var B=$.value;R==B.id&&(B.checked=!0,i.moneyCurrent.push(R))}}catch(J){q.e(J)}finally{q.f()}}}catch(J){T.e(J)}finally{T.f()}}h.current=i.current,h.recodecurrent=i.recodecurrent,h.othercurrent=i.othercurrent,h.analysisCurrent=i.analysisCurrent,h.moneyCurrent=i.moneyCurrent}var E=r.default.Query("stocks");E.order("-num"),E.include("charge","shop","Ncharge"),E.equalTo("parent","==",l),E.equalTo("disabled","!=",!0),E.limit(500),E.find().then((function(e){var n,t=e,r=[],a=c(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u={};u.name=o.stock_name,u.objectId=o.objectId,h.select_stocks&&-1!=h.select_stocks.indexOf(o.objectId)&&(u.checked=!0),r.push(u)}}catch(J){a.e(J)}finally{a.f()}i.stocks=r}))},methods:{confrim:function(){if(e.setStorageSync("staffRights",h),s){var n=r.default.Query("_User");n.set("rights",h),n.set("stocks",h.select_stocks||[]),n.set("id",s.objectId),n.save().then((function(n){setTimeout((function(){e.showToast({title:"修改成功"})}),1e3),e.navigateBack({delta:3})})).catch((function(e){console.log(e)}))}else e.navigateBack({delta:1})},checkstockChange:function(e){i.select_stocks=e.detail.value,h.select_stocks=e.detail.value},checkboxChange:function(e){i.current=e.detail.value,h.current=e.detail.value},checkboxChangeAnalysis:function(e){i.analysisCurrent=e.detail.value,h.analysisCurrent=e.detail.value},checkboxChangeMoney:function(e){i.moneyCurrent=e.detail.value,h.moneyCurrent=e.detail.value},checkboxChange_record:function(e){i.recodecurrent=e.detail.value,h.recodecurrent=e.detail.value},checkboxChange_other:function(e){i.othercurrent=e.detail.value,h.othercurrent=e.detail.value}}};n.default=v}).call(this,t("543d")["default"])},"1c9d":function(e,n,t){"use strict";t.r(n);var r=t("0cac"),a=t.n(r);for(var c in r)"default"!==c&&function(e){t.d(n,e,(function(){return r[e]}))}(c);n["default"]=a.a},"39f5":function(e,n,t){"use strict";var r=t("e69c"),a=t.n(r);a.a},"904d":function(e,n,t){"use strict";t.r(n);var r=t("f26e"),a=t("1c9d");for(var c in a)"default"!==c&&function(e){t.d(n,e,(function(){return a[e]}))}(c);t("39f5");var o,u=t("f0c5"),i=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);n["default"]=i.exports},ab20:function(e,n,t){"use strict";(function(e){t("d34b"),t("921b");r(t("66fd"));var n=r(t("904d"));function r(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},e69c:function(e,n,t){},f26e:function(e,n,t){"use strict";var r={"uni-nav-bar":function(){return t.e("components/uni-nav-bar/uni-nav-bar").then(t.bind(null,"8157"))},"uni-collapse":function(){return t.e("components/uni-collapse/uni-collapse").then(t.bind(null,"c8f2"))},"uni-collapse-item":function(){return t.e("components/uni-collapse-item/uni-collapse-item").then(t.bind(null,"2af1"))}},a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.current.indexOf("2"));e.$mp.data=Object.assign({},{$root:{g0:t}})},c=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return r}))}},[["ab20","common/runtime","common/vendor"]]]);