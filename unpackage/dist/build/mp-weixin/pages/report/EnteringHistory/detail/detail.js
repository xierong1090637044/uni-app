(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/detail/detail"],{"0aa2":function(t,e,n){"use strict";(function(t){n("d510"),n("921b");o(n("66fd"));var e=o(n("fdc4"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"166e":function(t,e,n){"use strict";var o=n("7c57"),r=n.n(o);r.a},"4d3c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("9546"));r(n("856d")),r(n("7fd5"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,i=!0,c=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw r}}}}function a(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var u,s,l=function(){n.e("components/Loading/index").then(function(){return resolve(n("120a"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("96bd"))}.bind(null,n)).catch(n.oe)},f={components:{loading:l,uniNavBar:d},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:null,detail:null}},onLoad:function(t){console.log(t),u=this,s=t.id,u.user.rights&&u.user.rights.othercurrent&&(u.othercurrent=u.user.rights.othercurrent),u.getdetail(s)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/detail/detail?id="+s}},methods:{gotoexpressDet:function(){u.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+u.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:u.detail.Images})},show_options:function(){var e=[];e=["撤销","打印","审核"],t.showActionSheet({itemList:e,success:function(e){0==e.tapIndex?(u.revoke(),t.setStorageSync("is_option",!0)):1==e.tapIndex?u.$http.Post("stock_printInfo",{sn:t.getStorageSync("setting").sn,type:"opreations",id:u.detail.objectId}).then((function(t){console.log(t)})):2==e.tapIndex&&u.confrimOrder()},fail:function(t){console.log(t.errMsg)}})},getdetail:function(t){var e=o.default.Query("order_opreations");e.include("opreater","custom","producer","stock","shop","account"),e.get(t).then((function(t){console.log(t),u.detail=t;var e,n=i(t.detail);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.packingUnit&&"undefined"!=o.packingUnit?o.packingUnit=o.packingUnit:o.packingUnit=""}}catch(r){n.e(r)}finally{n.f()}u.products=t.detail,u.bills=t.bills,u.loading=!1})).catch((function(t){console.log(t)}))},revoke:function(){wx.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){e.confirm&&u.$http.Post("order_opreationSellPurchaseRevoke",{orderId:u.detail.objectId,negativeOut:getApp().globalData.setting.negativeOut}).then((function(e){1==e.code&&(t.setStorageSync("is_option",!0),t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"撤销成功"})}),1e3))}))}})},confrimOrder:function(){wx.showModal({title:"提示",content:"是否审核该笔操作单！",success:function(e){if(e.confirm){if(u.detail.status)return t.showToast({title:"已经审核过了...",icon:"none"}),t.hideLoading(),!1;u.$http.Post("confrim_orderStatus",{orderId:u.detail.objectId,stockId:u.detail.stock.objectId,stockName:u.detail.stock.stock_name}).then((function(e){1==e.code&&(u.getdetail(s),t.showToast({icon:"none",title:"审核成功"}))}))}}})}}};e.default=f}).call(this,n("543d")["default"])},6336:function(t,e,n){"use strict";var o={"uni-nav-bar":function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"96bd"))}},r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.detail.createdTime.iso.split(" ")),o=t.detail.createdTime.iso.split(" "),r=t.detail.createdTime.iso.split(" "),i=t.detail.createdTime.iso.split(" "),a=t.detail.createdTime.iso.split(" ");t.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:r,g3:i,g4:a}})},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},"7c57":function(t,e,n){},d09e:function(t,e,n){"use strict";n.r(e);var o=n("4d3c"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},fdc4:function(t,e,n){"use strict";n.r(e);var o=n("6336"),r=n("d09e");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("166e");var a,c=n("f0c5"),u=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=u.exports}},[["0aa2","common/runtime","common/vendor"]]]);