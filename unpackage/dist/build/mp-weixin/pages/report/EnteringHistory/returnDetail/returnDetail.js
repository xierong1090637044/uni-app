(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/returnDetail/returnDetail"],{2762:function(t,e,n){"use strict";var o={"uni-nav-bar":function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"96bd"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"484f":function(t,e,n){"use strict";(function(t){n("d510"),n("921b");o(n("66fd"));var e=o(n("62bc"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"62bc":function(t,e,n){"use strict";n.r(e);var o=n("2762"),i=n("cfa9");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("ef9b");var a,c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},"91a6":function(t,e,n){},cfa9:function(t,e,n){"use strict";n.r(e);var o=n("f564"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},ef9b:function(t,e,n){"use strict";var o=n("91a6"),i=n.n(o);i.a},f564:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("9546"));i(n("856d")),i(n("7fd5"));function i(t){return t&&t.__esModule?t:{default:t}}var r,a,c=function(){n.e("components/Loading/index").then(function(){return resolve(n("120a"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("96bd"))}.bind(null,n)).catch(n.oe)},u=(t.getStorageSync("uid"),{components:{loading:c,uniNavBar:s},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:null,detail:null,stock:""}},onLoad:function(t){console.log(t),r=this,a=t.id,r.user.rights&&r.user.rights.othercurrent&&(r.othercurrent=r.user.rights.othercurrent),r.getdetail(a)},onShow:function(){r.stock=t.getStorageSync("warehouse")?t.getStorageSync("warehouse")[0].stock:""},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-销售退货单详情",path:"/pages/report/EnteringHistory/detail/detail?id="+a}},methods:{gotoexpressDet:function(){r.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+r.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:r.detail.Images})},show_options:function(){var e=["审核","撤销","打印","修改"];t.showActionSheet({itemList:e,success:function(e){if(0==e.tapIndex)1==r.detail.type?r.detail.status?t.showToast({title:"该笔销售退货单已审核",icon:"none"}):r.confrimOrder():-1==r.detail.type&&(r.detail.status?t.showToast({title:"该笔采购退货单已审核",icon:"none"}):r.confrimOrder()),t.setStorageSync("is_option",!0);else if(1==e.tapIndex)t.showModal({title:"是否确定撤销",content:"撤销后数据无法恢复",success:function(e){e.confirm&&r.$http.Post("order_opreationSellPurchaseRevoke",{orderId:r.detail.objectId,negativeOut:getApp().globalData.setting.negativeOut}).then((function(e){1==e.code&&(t.setStorageSync("is_option",!0),t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"撤销成功"})}),1e3))}))}});else if(2==e.tapIndex)r.$http.Post("stock_printInfo",{sn:t.getStorageSync("setting").sn,type:"opreations",id:r.detail.objectId}).then((function(t){console.log(t)}));else if(3==e.tapIndex){var n={};n.stock=r.detail.stock,t.setStorageSync("account",r.detail.account),t.setStorageSync("warehouse",[n]),t.setStorageSync("products",r.detail.opreatGood),t.setStorageSync("orderId",r.detail.objectId),t.setStorageSync("beizhu_text",r.detail.beizhu),t.setStorageSync("Images",r.detail.Images),-1==r.detail.type?(t.setStorageSync("custom",r.detail.custom),t.navigateTo({url:"/pages/commonNew/goods_out/goods_out?value=4&option=edit"})):1==r.detail.type&&(t.setStorageSync("producer",r.detail.producer),t.navigateTo({url:"/pages/commonNew/good_confrim/good_confrim?value=4&option=edit"}))}},fail:function(t){console.log(t.errMsg)}})},getdetail:function(t){var e=o.default.Query("order_opreations");e.include("opreater","custom","producer","stock","account"),e.get(t).then((function(t){console.log(t),r.detail=t,r.products=t.detail,r.bills=t.bills,r.loading=!1})).catch((function(t){console.log(t)}))},confrimOrder:function(){wx.showModal({title:"提示",content:"确定进行此操作！",success:function(e){e.confirm&&r.$http.Post("confrim_orderStatus",{orderId:r.detail.objectId,stockId:r.detail.stock.objectId,stockName:r.detail.stock.stock_name}).then((function(e){1==e.code&&(r.getdetail(a),t.showToast({icon:"none",title:"审核成功！"}))}))}})}}});e.default=u}).call(this,n("543d")["default"])}},[["484f","common/runtime","common/vendor"]]]);