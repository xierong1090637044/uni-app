(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/SellDetail/SellLaterDetail"],{"0130":function(t,e,o){"use strict";(function(t){o("d510"),o("921b");n(o("66fd"));var e=n(o("9d9a"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"76f7":function(t,e,o){},"9d9a":function(t,e,o){"use strict";o.r(e);var n=o("bc25"),i=o("f99b");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("afe8");var r,c=o("f0c5"),s=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=s.exports},ae27:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(o("9546"));i(o("856d")),i(o("7fd5"));function i(t){return t&&t.__esModule?t:{default:t}}var a,r,c=function(){o.e("components/Loading/index").then(function(){return resolve(o("120a"))}.bind(null,o)).catch(o.oe)},s=function(){o.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(o("96bd"))}.bind(null,o)).catch(o.oe)},u={components:{loading:c,uniNavBar:s},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:[],detail:"",stock:""}},onLoad:function(e){a=this,r=e.id,t.getStorageSync("uid"),a.user.rights&&a.user.rights.othercurrent&&(a.othercurrent=a.user.rights.othercurrent)},onShow:function(){a.stock=t.getStorageSync("warehouse")?t.getStorageSync("warehouse")[0].stock:"",a.getdetail(r)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/SellDetail/SellLaterDetail?id="+r}},methods:{gotoexpressDet:function(){a.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+a.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:a.detail.Images})},show_options:function(){var e=["打印"];-3!=a.detail.type&&-4!=a.detail.type||(-1!=a.othercurrent.indexOf("1")||1==a.identity?(e=-3==a.detail.type?["生成销售单","删除","打印"]:["生成采购单","删除","打印"],t.showActionSheet({itemList:e,success:function(e){0==e.tapIndex?(-4==a.detail.type?a.detail.status?t.showToast({title:"该笔订单已生成采购单",icon:"none"}):a.confrimOrder():-3==a.detail.type&&(a.detail.status?t.showToast({title:"该笔订单已生成销售单",icon:"none"}):a.confrimOrder()),t.setStorageSync("is_option",!0)):1==e.tapIndex?(a.detail.status?t.showToast({title:-4==a.detail.type?"该笔订单已生成采购单":"该笔订单已生成销售单",icon:"none"}):a.revoke(),t.setStorageSync("is_option",!0)):2==e.tapIndex&&a.$http.Post("stock_printInfo",{sn:t.getStorageSync("setting").sn,type:"opreations",id:a.detail.objectId}).then((function(t){console.log(t)}))},fail:function(t){console.log(t.errMsg)}})):t.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var o=n.default.Query("order_opreations");o.include("opreater","custom","producer","stock","account"),o.get(e).then((function(e){console.log(e),a.detail=e,a.products=e.opreatGood,a.bills=e.bills,a.loading=!1,-4==e.type?t.setNavigationBarTitle({title:"采购订单详情"}):-3==e.type&&t.setNavigationBarTitle({title:"销售订单详情"})})).catch((function(t){console.log(t)}))},revoke:function(){wx.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){if(e.confirm){t.showLoading({title:"撤销中..."});var o=n.default.Query("order_opreations");o.destroy(a.detail.objectId).then((function(e){t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"删除成功"})}),1e3)})).catch((function(t){console.log(t)}))}}})},confrimOrder:function(){-3==a.detail.type?wx.showModal({title:"提示",content:"是否生成销售单！",success:function(e){e.confirm&&(t.setStorageSync("custom",a.detail.custom),t.setStorageSync("products",a.detail.opreatGood),t.setStorageSync("otherMoney",a.detail.otherMoney),t.setStorageSync("haveGetMoney",a.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/goods_out/gooSellNew/gooSellNew?id="+a.detail.objectId}))}}):-4==a.detail.type&&wx.showModal({title:"提示",content:"是否生成采购单！",success:function(e){e.confirm&&(t.setStorageSync("producer",a.detail.producer),t.setStorageSync("products",a.detail.opreatGood),t.setStorageSync("otherMoney",a.detail.otherMoney),t.setStorageSync("haveGetMoney",a.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/good_confrim/goodPurchaseNew/goodPurchaseNew?id="+a.detail.objectId}))}})}}};e.default=u}).call(this,o("543d")["default"])},afe8:function(t,e,o){"use strict";var n=o("76f7"),i=o.n(n);i.a},bc25:function(t,e,o){"use strict";var n={"uni-nav-bar":function(){return o.e("components/uni-nav-bar/uni-nav-bar").then(o.bind(null,"96bd"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.detail.setDay.iso.split(" ")),n=t.detail.giveDay.iso.split(" "),i=t.detail.setDay.iso.split(" "),a=t.detail.giveDay.iso.split(" ");t.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,g3:a}})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},f99b:function(t,e,o){"use strict";o.r(e);var n=o("ae27"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a}},[["0130","common/runtime","common/vendor"]]]);