(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/SellDetail/SellDetail"],{"1d2e":function(t,e,o){},"40f5":function(t,e,o){"use strict";o.r(e);var n=o("9377"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"7cd8":function(t,e,o){"use strict";var n=o("1d2e"),i=o.n(n);i.a},"838a":function(t,e,o){"use strict";(function(t){o("d510"),o("921b");n(o("66fd"));var e=n(o("a9c6"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},9377:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(o("9546"));i(o("856d")),i(o("7fd5"));function i(t){return t&&t.__esModule?t:{default:t}}var a,r,c=function(){o.e("components/Loading/index").then(function(){return resolve(o("120a"))}.bind(null,o)).catch(o.oe)},s=function(){o.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(o("96bd"))}.bind(null,o)).catch(o.oe)},u={components:{loading:c,uniNavBar:s},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:null,detail:null,stock:""}},onLoad:function(e){console.log(e),a=this,r=e.id,t.getStorageSync("uid"),a.user.rights&&a.user.rights.othercurrent&&(a.othercurrent=a.user.rights.othercurrent),a.getdetail(r)},onShow:function(){a.stock=t.getStorageSync("warehouse")?t.getStorageSync("warehouse")[0].stock:""},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/detail/detail?id="+r}},methods:{gotoexpressDet:function(){a.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+a.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:a.detail.Images})},show_options:function(){var e=["打印"];-1!=a.detail.type&&1!=a.detail.type||(-1!=a.othercurrent.indexOf("1")||1==a.identity&&1==a.detail.extra_type?(e=["审核","撤销","打印","编辑"],t.showActionSheet({itemList:e,success:function(e){if(0==e.tapIndex)1==a.detail.type?a.detail.status?t.showToast({title:"该笔采购单已审核",icon:"none"}):a.confrimOrder():-1==a.detail.type&&(a.detail.status?t.showToast({title:"该笔销售单已审核",icon:"none"}):a.confrimOrder()),t.setStorageSync("is_option",!0);else if(1==e.tapIndex)t.showModal({title:"是否确定撤销",content:"撤销后数据无法恢复",success:function(e){e.confirm&&a.$http.Post("order_opreationSellPurchaseRevoke",{orderId:a.detail.objectId,negativeOut:getApp().globalData.setting.negativeOut}).then((function(e){1==e.code&&(t.setStorageSync("is_option",!0),t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"撤销成功"})}),1e3))}))}});else if(2==e.tapIndex)a.$http.Post("stock_printInfo",{sn:t.getStorageSync("setting").sn,type:"opreations",id:a.detail.objectId}).then((function(t){console.log(t)}));else if(3==e.tapIndex){var o={};o.stock=a.detail.stock,t.setStorageSync("account",a.detail.account),t.setStorageSync("warehouse",[o]),t.setStorageSync("products",a.detail.opreatGood),t.setStorageSync("orderId",a.detail.objectId),t.setStorageSync("beizhu_text",a.detail.beizhu),t.setStorageSync("Images",a.detail.Images),-1==a.detail.type?(t.setStorageSync("custom",a.detail.custom),t.navigateTo({url:"/pages/commonNew/goods_out/goods_out?value=3&option=edit"})):1==a.detail.type&&(t.setStorageSync("producer",a.detail.producer),t.navigateTo({url:"/pages/commonNew/good_confrim/good_confrim?value=3&option=edit"}))}},fail:function(t){console.log(t.errMsg)}})):t.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var o=n.default.Query("order_opreations");o.include("opreater","custom","producer","stock","account"),o.get(e).then((function(e){console.log(e),a.detail=e,a.products=e.detail,a.bills=e.bills,a.loading=!1,1==e.type&&t.setNavigationBarTitle({title:"采购单详情"})})).catch((function(t){console.log(t)}))},confrimOrder:function(){wx.showModal({title:"提示",content:"确定进行此操作！",success:function(e){e.confirm&&a.$http.Post("confrim_orderStatus",{orderId:a.detail.objectId,stockId:a.detail.stock.objectId,stockName:a.detail.stock.stock_name}).then((function(e){1==e.code&&(a.getdetail(r),t.showToast({icon:"none",title:"审核成功！"}))}))}})}}};e.default=u}).call(this,o("543d")["default"])},a9c6:function(t,e,o){"use strict";o.r(e);var n=o("ce52"),i=o("40f5");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("7cd8");var r,c=o("f0c5"),s=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=s.exports},ce52:function(t,e,o){"use strict";var n={"uni-nav-bar":function(){return o.e("components/uni-nav-bar/uni-nav-bar").then(o.bind(null,"96bd"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.detail.createdTime.iso.split(" ")),n=t.detail.createdTime.iso.split(" ");t.$mp.data=Object.assign({},{$root:{g0:o,g1:n}})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))}},[["838a","common/runtime","common/vendor"]]]);