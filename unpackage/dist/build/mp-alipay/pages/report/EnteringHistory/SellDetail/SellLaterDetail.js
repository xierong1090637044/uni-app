(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/SellDetail/SellLaterDetail"],{"0130":function(t,e,o){"use strict";(function(t){o("d510"),o("921b");n(o("66fd"));var e=n(o("9d9a"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("c11b")["createPage"])},"76f7":function(t,e,o){},"9d9a":function(t,e,o){"use strict";o.r(e);var n=o("bc25"),i=o("f99b");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("afe8");var r,c=o("f0c5"),s=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=s.exports},ae27:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o("9546"));a(o("856d")),a(o("7fd5"));function a(t){return t&&t.__esModule?t:{default:t}}var r,c,s=function(){o.e("components/Loading/index").then(function(){return resolve(o("120a"))}.bind(null,o)).catch(o.oe)},u=function(){o.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(o("96bd"))}.bind(null,o)).catch(o.oe)},l={components:{loading:s,uniNavBar:u},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:[],detail:"",stock:""}},onLoad:function(e){r=this,c=e.id,t.getStorageSync("uid"),r.user.rights&&r.user.rights.othercurrent&&(r.othercurrent=r.user.rights.othercurrent)},onShow:function(){r.stock=t.getStorageSync("warehouse")?t.getStorageSync("warehouse")[0].stock:"",r.getdetail(c)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/SellDetail/SellLaterDetail?id="+c}},methods:{gotoexpressDet:function(){r.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+r.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:r.detail.Images})},show_options:function(){var e=["打印"];-3!=r.detail.type&&-4!=r.detail.type||(-1!=r.othercurrent.indexOf("1")||1==r.identity?(e=-3==r.detail.type?["生成销售单","删除","打印"]:["生成采购单","删除","打印"],t.showActionSheet({itemList:e,success:function(e){0==e.tapIndex?(-4==r.detail.type?r.detail.status?t.showToast({title:"该笔订单已生成采购单",icon:"none"}):r.confrimOrder():-3==r.detail.type&&(r.detail.status?t.showToast({title:"该笔订单已生成销售单",icon:"none"}):r.confrimOrder()),t.setStorageSync("is_option",!0)):1==e.tapIndex?(r.detail.status?t.showToast({title:-4==r.detail.type?"该笔订单已生成采购单":"该笔订单已生成销售单",icon:"none"}):r.revoke(),t.setStorageSync("is_option",!0)):2==e.tapIndex&&r.$http.Post("stock_printInfo",{sn:t.getStorageSync("setting").sn,type:"opreations",id:r.detail.objectId}).then((function(t){console.log(t)}))},fail:function(t){console.log(t.errMsg)}})):t.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var o=i.default.Query("order_opreations");o.include("opreater","custom","producer","stock","account"),o.get(e).then((function(e){console.log(e),r.detail=e,r.products=e.opreatGood,r.bills=e.bills,r.loading=!1,-4==e.type?t.setNavigationBarTitle({title:"采购订单详情"}):-3==e.type&&t.setNavigationBarTitle({title:"销售订单详情"})})).catch((function(t){console.log(t)}))},revoke:function(){n.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){if(e.confirm){t.showLoading({title:"撤销中..."});var o=i.default.Query("order_opreations");o.destroy(r.detail.objectId).then((function(e){t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"删除成功"})}),1e3)})).catch((function(t){console.log(t)}))}}})},confrimOrder:function(){-3==r.detail.type?n.showModal({title:"提示",content:"是否生成销售单！",success:function(e){e.confirm&&(t.setStorageSync("custom",r.detail.custom),t.setStorageSync("products",r.detail.opreatGood),t.setStorageSync("otherMoney",r.detail.otherMoney),t.setStorageSync("haveGetMoney",r.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/goods_out/gooSellNew/gooSellNew?id="+r.detail.objectId}))}}):-4==r.detail.type&&n.showModal({title:"提示",content:"是否生成采购单！",success:function(e){e.confirm&&(t.setStorageSync("producer",r.detail.producer),t.setStorageSync("products",r.detail.opreatGood),t.setStorageSync("otherMoney",r.detail.otherMoney),t.setStorageSync("haveGetMoney",r.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/good_confrim/goodPurchaseNew/goodPurchaseNew?id="+r.detail.objectId}))}})}}};e.default=l}).call(this,o("c11b")["default"],o("c11b")["default"])},afe8:function(t,e,o){"use strict";var n=o("76f7"),i=o.n(n);i.a},bc25:function(t,e,o){"use strict";var n={"uni-nav-bar":function(){return o.e("components/uni-nav-bar/uni-nav-bar").then(o.bind(null,"96bd"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.detail.setDay.iso.split(" ")),n=t.detail.giveDay.iso.split(" "),i=t.detail.setDay.iso.split(" "),a=t.detail.giveDay.iso.split(" ");t.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,g3:a}})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},f99b:function(t,e,o){"use strict";o.r(e);var n=o("ae27"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a}},[["0130","common/runtime","common/vendor"]]]);