(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/report/EnteringHistory/SellDetail/SellLaterDetail"],{"0130":function(t,e,o){"use strict";(function(t){o("d510"),o("921b");n(o("66fd"));var e=n(o("9d9a"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("c11b")["createPage"])},"4cc3":function(t,e,o){"use strict";var n={"uni-nav-bar":function(){return o.e("components/uni-nav-bar/uni-nav-bar").then(o.bind(null,"96bd"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.detail.setDay.iso.split(" ")),n=t.detail.giveDay.iso.split(" "),i=t.detail.setDay.iso.split(" "),a=t.detail.giveDay.iso.split(" ");t.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,g3:a}})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},"76f7":function(t,e,o){},"9d9a":function(t,e,o){"use strict";o.r(e);var n=o("4cc3"),i=o("f99b");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("afe8");var r,c=o("f0c5"),s=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=s.exports},ae27:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("9546")),a=r(o("856d"));r(o("7fd5"));function r(t){return t&&t.__esModule?t:{default:t}}var c,s,u=function(){o.e("components/Loading/index").then(function(){return resolve(o("120a"))}.bind(null,o)).catch(o.oe)},l=function(){o.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(o("96bd"))}.bind(null,o)).catch(o.oe)},d={components:{loading:u,uniNavBar:l},data:function(){return{user:t.getStorageSync("user"),identity:t.getStorageSync("identity"),othercurrent:"",bills:[],loading:!0,products:[],detail:"",stock:""}},onLoad:function(e){c=this,s=e.id,t.getStorageSync("uid"),c.user.rights&&c.user.rights.othercurrent&&(c.othercurrent=c.user.rights.othercurrent)},onShow:function(){c.stock=t.getStorageSync("warehouse")?t.getStorageSync("warehouse")[0].stock:"",c.getdetail(s)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"库存表-操作单详情",path:"/pages/report/EnteringHistory/SellDetail/SellLaterDetail?id="+s}},methods:{gotoexpressDet:function(){c.user.is_vip?t.navigateTo({url:"../expressDet/expressDet?number="+c.detail.expressNum}):t.showToast({title:"您还不是会员，无法使用",icon:"none"})},priview:function(e){t.previewImage({current:e,urls:c.detail.Images})},show_options:function(){var e=["打印"];-3!=c.detail.type&&-4!=c.detail.type||(-1!=c.othercurrent.indexOf("1")||1==c.identity?(e=-3==c.detail.type?["生成销售单","删除"]:["生成采购单","删除"],t.showActionSheet({itemList:e,success:function(e){0==e.tapIndex?(-4==c.detail.type?c.detail.status?t.showToast({title:"该笔订单已生成采购单",icon:"none"}):c.confrimOrder():-3==c.detail.type&&(c.detail.status?t.showToast({title:"该笔订单已生成销售单",icon:"none"}):c.confrimOrder()),t.setStorageSync("is_option",!0)):1==e.tapIndex?(c.detail.status?t.showToast({title:-4==c.detail.type?"该笔订单已生成采购单":"该笔订单已生成销售单",icon:"none"}):c.revoke(),t.setStorageSync("is_option",!0)):2==e.tapIndex&&a.default.print_operations(c.detail,c.products)},fail:function(t){console.log(t.errMsg)}})):t.showToast({title:"暂无操作权限",icon:"none"}))},getdetail:function(e){var o=i.default.Query("order_opreations");o.include("opreater","custom","producer","stock","account"),o.get(e).then((function(e){console.log(e),c.detail=e,c.products=e.opreatGood,c.bills=e.bills,c.loading=!1,-4==e.type?t.setNavigationBarTitle({title:"采购订单详情"}):-3==e.type&&t.setNavigationBarTitle({title:"销售订单详情"})})).catch((function(t){console.log(t)}))},revoke:function(){n.showModal({title:"提示",content:"数据撤销后不可恢复，请谨慎撤销！",success:function(e){if(e.confirm){t.showLoading({title:"撤销中..."});var o=i.default.Query("order_opreations");o.destroy(c.detail.objectId).then((function(e){t.hideLoading(),t.navigateBack({delta:1}),setTimeout((function(){t.showToast({title:"删除成功"})}),1e3)})).catch((function(t){console.log(t)}))}}})},confrimOrder:function(){-3==c.detail.type?n.showModal({title:"提示",content:"是否生成销售单！",success:function(e){e.confirm&&(t.setStorageSync("custom",c.detail.custom),t.setStorageSync("products",c.detail.opreatGood),t.setStorageSync("otherMoney",c.detail.otherMoney),t.setStorageSync("haveGetMoney",c.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/goods_out/gooSellNew/gooSellNew?id="+c.detail.objectId}))}}):-4==c.detail.type&&n.showModal({title:"提示",content:"是否生成采购单！",success:function(e){e.confirm&&(t.setStorageSync("producer",c.detail.producer),t.setStorageSync("products",c.detail.opreatGood),t.setStorageSync("otherMoney",c.detail.otherMoney),t.setStorageSync("haveGetMoney",c.detail.haveGetMoney),t.navigateTo({url:"/pages/commonNew/good_confrim/goodPurchaseNew/goodPurchaseNew?id="+c.detail.objectId}))}})}}};e.default=d}).call(this,o("c11b")["default"],o("c11b")["default"])},afe8:function(t,e,o){"use strict";var n=o("76f7"),i=o.n(n);i.a},f99b:function(t,e,o){"use strict";o.r(e);var n=o("ae27"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a}},[["0130","common/runtime","common/vendor"]]]);