(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/manage/staff/add/add"],{"0e39":function(e,a,t){"use strict";t.r(a);var n=t("cbb4"),o=t("386f");for(var s in o)"default"!==s&&function(e){t.d(a,e,function(){return o[e]})}(s);t("b92e");var f=t("2877"),d=Object(f["a"])(o["default"],n["a"],n["b"],!1,null,null,null);a["default"]=d.exports},"386f":function(e,a,t){"use strict";t.r(a);var n=t("566b"),o=t.n(n);for(var s in n)"default"!==s&&function(e){t.d(a,e,function(){return n[e]})}(s);a["default"]=o.a},"566b":function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=o(t("e21e"));function o(e){return e&&e.__esModule?e:{default:e}}var s,f,d,r=function(){return t.e("components/uni-collapse/uni-collapse").then(t.bind(null,"4bdf"))},u=function(){return t.e("components/uni-collapse-item/uni-collapse-item").then(t.bind(null,"8988"))},i={},l={components:{uniCollapse:r,uniCollapseItem:u},data:function(){return{staff_name:null,staff_address:null,staff_phone:null,manage:[{id:1,name:"员工管理"},{id:2,name:"产品管理"},{id:3,name:"客户管理"},{id:4,name:"仓库管理"},{id:5,name:"产品类别管理"}],recode:[{id:1,name:"入库记录"},{id:2,name:"出库记录"},{id:3,name:"客户退货记录"},{id:4,name:"盘点记录"},{id:5,name:"货损记录"}],current:[],recodecurrent:[]}},onLoad:function(a){s=this,d=e.getStorageSync("uid")},onShow:function(){if(f=e.getStorageSync("staff"),f){s.staff_name=f.username,s.staff_address=f.address,s.staff_phone=f.mobilePhoneNumber;var a=!0,t=!1,n=void 0;try{for(var o,d=f.rights.current[Symbol.iterator]();!(a=(o=d.next()).done);a=!0){var r=o.value;console.log(r," at pages\\manage\\staff\\add\\add.vue:133"),s.manage[r].checked=!0}}catch(g){t=!0,n=g}finally{try{a||null==d.return||d.return()}finally{if(t)throw n}}var u=!0,i=!1,l=void 0;try{for(var c,m=f.rights.recodecurrent[Symbol.iterator]();!(u=(c=m.next()).done);u=!0){var h=c.value;s.recode[h].checked=!0}}catch(g){i=!0,l=g}finally{try{u||null==m.return||m.return()}finally{if(i)throw l}}}},methods:{checkboxChange:function(e){i.current=e.detail.value},checkboxChange_record:function(e){i.recodecurrent=e.detail.value},onNavigationBarButtonTap:function(a){console.log(this.staff_name," at pages\\manage\\staff\\add\\add.vue:161"),null==this.staff_name?e.showToast({title:"请输入姓名",icon:"none"}):null==this.staff_phone?e.showToast({title:"请输入账号",icon:"none"}):s.add_data()},add_data:function(){if(e.showLoading({title:"上传中..."}),f){e.hideLoading();var a=e.getStorageSync("uid"),t=n.default.Pointer("_User"),o=t.set(a),r=n.default.Query("staffs");r.set("username",s.staff_name),r.set("nickName",s.staff_name),r.set("password",s.staff_phone),r.set("mobilePhoneNumber",s.staff_phone),r.set("rights",i),r.set("address",null==s.staff_address?"":s.staff_address),r.set("masterId",o),r.set("id",f.objectId),r.save().then(function(a){console.log(a," at pages\\manage\\staff\\add\\add.vue:201"),e.showToast({title:"修改成功"})}).catch(function(e){console.log(e," at pages\\manage\\staff\\add\\add.vue:206")})}else{var u=n.default.Query("staffs");u.equalTo("masterId","==",d),u.equalTo("mobilePhoneNumber","==",s.staff_phone),u.find().then(function(a){if(console.log(a," at pages\\manage\\staff\\add\\add.vue:215"),0==a.length){e.hideLoading();var t=e.getStorageSync("uid"),o=n.default.Pointer("_User"),f=o.set(t),d=n.default.Query("staffs");d.set("username",s.staff_name),d.set("nickName",s.staff_name),d.set("password",s.staff_phone),d.set("mobilePhoneNumber",s.staff_phone),d.set("rights",i),d.set("address",null==s.staff_address?"":s.staff_address),d.set("masterId",f),d.save().then(function(a){console.log(a," at pages\\manage\\staff\\add\\add.vue:233"),e.showToast({title:"添加成功"})}).catch(function(e){console.log(e," at pages\\manage\\staff\\add\\add.vue:238")})}else e.showToast({title:"已存在此账号",icon:"none"})})}}}};a.default=l}).call(this,t("6e42")["default"])},b92e:function(e,a,t){"use strict";var n=t("dd38"),o=t.n(n);o.a},cbb4:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement;e._self._c},o=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return o})},dd38:function(e,a,t){}},[["7f11","common/runtime","common/vendor"]]]);